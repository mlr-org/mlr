<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Evaluating Learner Performance • mlr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../../bootstrap-toc.css">
<script src="../../bootstrap-toc.js"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<link href="../../extra.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Evaluating Learner Performance">
<meta property="og:description" content="mlr">
<meta property="og:image" content="https://mlr.mlr-org.com/logo.png">
<meta name="twitter:card" content="summary">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://mlr-org.com"><img src="https://raw.githubusercontent.com/mlr-org/mlr3/master/man/figures/logo.png" id="hexlogo" alt="mlr-org"></a>
        <a class="navbar-brand" href="../../index.html">mlr <small>v2.17.1.9000</small></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Task</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learner.html">Learner</a>
    </li>
    <li>
      <a href="../../articles/tutorial/train.html">Train</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmarking</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configureMlr.html">mlr Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection/Filtering</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Spatial Data</a>
    </li>
    <li>
      <a href="../../articles/tutorial/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Custom Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/example_tasks.html">Integrated Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/measures.html">Integrated Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlr-outreach">Talks, Videos and Workshops</a>
    </li>
    <li class="divider">
    <li>
      <a href="https://mlrmbo.mlr-org.com">mlrMBO</a>
    </li>
    <li>
      <a href="https://https://mlrcpo.mlr-org.com">mlrCPO</a>
    </li>
    <li>
      <a href="https://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="http://openml.github.io/openml-r/">OpenML</a>
    </li>
    <li class="divider">
    <li>
      <a href="../../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
        <li>
  <a href="https://github.com/mlr-org/mlr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://lmmisld-lmu-stats-slds.srv.mwn.de/mlr_invite/">
    <span class="fa fa fa fa-comments"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right docsearch" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Evaluating Learner Performance</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/tutorial/performance.Rmd"><code>vignettes/tutorial/performance.Rmd</code></a></small>
      <div class="hidden name"><code>performance.Rmd</code></div>

    </div>

    
    
<p>The quality of the predictions of a model in <code>mlr</code> can be assessed with respect to a number of different performance measures. In order to calculate the performance measures, call <code><a href="../../reference/performance.html">performance()</a></code> on the object returned by <code>predict</code> (<code><a href="../../reference/predict.WrappedModel.html">predict.WrappedModel()</a></code>) and specify the desired performance measures.</p>
<div id="available-performance-measures" class="section level1">
<h1 class="hasAnchor">
<a href="#available-performance-measures" class="anchor"></a>Available performance measures</h1>
<p><code>mlr</code> provides a large number of performance measures for all types of learning problems. Typical performance measures for <em>classification</em> are the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>), accuracy (<a href="measures.html" target="_blank">acc</a>) or measures based on <a href="roc_analysis.html" target="_blank">ROC analysis</a>. For <em>regression</em> the mean of squared errors (<a href="measures.html" target="_blank">mse</a>) or mean of absolute errors (<a href="measures.html" target="_blank">mae</a>) are usually considered. For <em>clustering</em> tasks, measures such as the Dunn index (<a href="measures.html" target="_blank">G1 index</a>) are provided, while for <em>survival</em> predictions, the Concordance Index (<a href="measures.html" target="_blank">cindex</a>) is supported, and for <em>cost-sensitive</em> predictions the misclassification penalty (<a href="measures.html" target="_blank">mcp</a>) and others. It is also possible to access the time to train the learner (<a href="measures.html" target="_blank">timetrain</a>), the time to compute the prediction (<a href="measures.html" target="_blank">timepredict</a>) and their sum (<a href="measures.html" target="_blank">timeboth</a>) as performance measures.</p>
<p>To see which performance measures are implemented, have a look at the table of <a href="measures.html" target="_blank">performance measures</a> and the <code><a href="../../reference/measures.html">measures()</a></code> documentation page.</p>
<p>If you want to implement an additional measure or include a measure with non-standard misclassification costs, see the section on <a href="create_measure.html" target="_blank">creating custom measures</a>.</p>
</div>
<div id="listing-measures" class="section level1">
<h1 class="hasAnchor">
<a href="#listing-measures" class="anchor"></a>Listing measures</h1>
<p>The properties and requirements of the individual measures are shown in the table of <a href="measures.html" target="_blank">performance measures</a>.</p>
<p>If you would like a list of available measures with certain properties or suitable for a certain learning <code><a href="../../reference/Task.html">Task()</a></code> use the function <code><a href="../../reference/listMeasures.html">listMeasures()</a></code>.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># Performance measures for classification with multiple classes</span>
<span class="fu"><a href="../../reference/listMeasures.html">listMeasures</a></span>(<span class="st">"classif"</span>, <span class="kw">properties</span> <span class="kw">=</span> <span class="st">"classif.multi"</span>)
<span class="co">##  [1] "featperc"         "mmce"             "lsr"              "bac"             </span>
<span class="co">##  [5] "qsr"              "timeboth"         "multiclass.aunp"  "timetrain"       </span>
<span class="co">##  [9] "multiclass.aunu"  "ber"              "timepredict"      "multiclass.brier"</span>
<span class="co">## [13] "ssr"              "acc"              "logloss"          "wkappa"          </span>
<span class="co">## [17] "multiclass.au1p"  "multiclass.au1u"  "kappa"</span>
<span class="co"># Performance measure suitable for the iris classification task</span>
<span class="fu"><a href="../../reference/listMeasures.html">listMeasures</a></span>(<span class="no">iris.task</span>)
<span class="co">##  [1] "featperc"         "mmce"             "lsr"              "bac"             </span>
<span class="co">##  [5] "qsr"              "timeboth"         "multiclass.aunp"  "timetrain"       </span>
<span class="co">##  [9] "multiclass.aunu"  "ber"              "timepredict"      "multiclass.brier"</span>
<span class="co">## [13] "ssr"              "acc"              "logloss"          "wkappa"          </span>
<span class="co">## [17] "multiclass.au1p"  "multiclass.au1u"  "kappa"</span></pre></body></html></div>
<p>For convenience there exists a default measure for each type of learning problem, which is calculated if nothing else is specified. As defaults we chose the most commonly used measures for the respective types, e.g., the mean squared error (<a href="measures.html" target="_blank">mse</a>) for regression and the misclassification rate (<a href="measures.html" target="_blank">mmce</a>) for classification. The help page of function <code><a href="../../reference/getDefaultMeasure.html">getDefaultMeasure()</a></code> lists all defaults for all types of learning problems. The function itself returns the default measure for a given task type, <code><a href="../../reference/Task.html">Task()</a></code> or <code><a href="../../reference/makeLearner.html">Learner()</a></code>.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># Get default measure for iris.task</span>
<span class="fu"><a href="../../reference/getDefaultMeasure.html">getDefaultMeasure</a></span>(<span class="no">iris.task</span>)
<span class="co">## Name: Mean misclassification error</span>
<span class="co">## Performance measure: mmce</span>
<span class="co">## Properties: classif,classif.multi,req.pred,req.truth</span>
<span class="co">## Minimize: TRUE</span>
<span class="co">## Best: 0; Worst: 1</span>
<span class="co">## Aggregated by: test.mean</span>
<span class="co">## Arguments: </span>
<span class="co">## Note: Defined as: mean(response != truth)</span>

<span class="co"># Get the default measure for linear regression</span>
<span class="fu"><a href="../../reference/getDefaultMeasure.html">getDefaultMeasure</a></span>(<span class="fu"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"regr.lm"</span>))
<span class="co">## Name: Mean of squared errors</span>
<span class="co">## Performance measure: mse</span>
<span class="co">## Properties: regr,req.pred,req.truth</span>
<span class="co">## Minimize: TRUE</span>
<span class="co">## Best: 0; Worst: Inf</span>
<span class="co">## Aggregated by: test.mean</span>
<span class="co">## Arguments: </span>
<span class="co">## Note: Defined as: mean((response - truth)^2)</span></pre></body></html></div>
</div>
<div id="calculate-performance-measures" class="section level1">
<h1 class="hasAnchor">
<a href="#calculate-performance-measures" class="anchor"></a>Calculate performance measures</h1>
<p>In the following example we fit a gradient boosting machine (<code><a href="https://rdrr.io/pkg/gbm/man/gbm.html">gbm::gbm()</a></code>) on a subset of the <code>BostonHousing</code> (<code><a href="https://rdrr.io/pkg/mlbench/man/BostonHousing.html">mlbench::BostonHousing()</a></code>) data set and calculate the default measure mean squared error (<a href="measures.html" target="_blank">mse</a>) on the remaining observations.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="no">n</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/getTaskSize.html">getTaskSize</a></span>(<span class="no">bh.task</span>)
<span class="no">lrn</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"regr.gbm"</span>, <span class="kw">n.trees</span> <span class="kw">=</span> <span class="fl">1000</span>)
<span class="no">mod</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/train.html">train</a></span>(<span class="no">lrn</span>, <span class="kw">task</span> <span class="kw">=</span> <span class="no">bh.task</span>, <span class="kw">subset</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">1</span>, <span class="no">n</span>, <span class="fl">2</span>))
<span class="no">pred</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">mod</span>, <span class="kw">task</span> <span class="kw">=</span> <span class="no">bh.task</span>, <span class="kw">subset</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">2</span>, <span class="no">n</span>, <span class="fl">2</span>))

<span class="fu"><a href="../../reference/performance.html">performance</a></span>(<span class="no">pred</span>)
<span class="co">##      mse </span>
<span class="co">## 14.38596</span></pre></body></html></div>
<p>The following code computes the median of squared errors (<a href="measures.html" target="_blank">medse</a>) instead.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="../../reference/performance.html">performance</a></span>(<span class="no">pred</span>, <span class="kw">measures</span> <span class="kw">=</span> <span class="no">medse</span>)
<span class="co">##    medse </span>
<span class="co">## 4.209155</span></pre></body></html></div>
<p>Of course, we can also calculate multiple performance measures at once by simply passing a list of measures which can also include <a href="create_measure.html" target="_blank">your own measure</a>.</p>
<p>Calculate the mean squared error, median squared error and mean absolute error (<a href="measures.html" target="_blank">mae</a>).</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="fu"><a href="../../reference/performance.html">performance</a></span>(<span class="no">pred</span>, <span class="kw">measures</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="no">mse</span>, <span class="no">medse</span>, <span class="no">mae</span>))
<span class="co">##       mse     medse       mae </span>
<span class="co">## 14.385956  4.209155  2.716451</span></pre></body></html></div>
<p>For the other types of learning problems and measures, calculating the performance basically works in the same way.</p>
<div id="requirements-of-performance-measures" class="section level2">
<h2 class="hasAnchor">
<a href="#requirements-of-performance-measures" class="anchor"></a>Requirements of performance measures</h2>
<p>Note that in order to calculate some performance measures it is required that you pass the <code><a href="../../reference/Task.html">Task()</a></code> or the fitted model (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) in addition to the <code><a href="../../reference/Prediction.html">Prediction()</a></code>.</p>
<p>For example in order to assess the time needed for training (<a href="measures.html" target="_blank">timetrain</a>), the fitted model has to be passed.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../../reference/performance.html">performance</a></span>(<span class="no">pred</span>, <span class="kw">measures</span> <span class="kw">=</span> <span class="no">timetrain</span>, <span class="kw">model</span> <span class="kw">=</span> <span class="no">mod</span>)
<span class="co">## timetrain</span>
<span class="co">##     0.055</span></pre></body></html></div>
<p>For many performance measures in cluster analysis the <code><a href="../../reference/Task.html">Task()</a></code> is required.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">lrn</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"cluster.kmeans"</span>, <span class="kw">centers</span> <span class="kw">=</span> <span class="fl">3</span>)
<span class="no">mod</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/train.html">train</a></span>(<span class="no">lrn</span>, <span class="no">mtcars.task</span>)
<span class="no">pred</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">mod</span>, <span class="kw">task</span> <span class="kw">=</span> <span class="no">mtcars.task</span>)

<span class="co"># Calculate the G1 index</span>
<span class="fu"><a href="../../reference/performance.html">performance</a></span>(<span class="no">pred</span>, <span class="kw">measures</span> <span class="kw">=</span> <span class="no">G1</span>, <span class="kw">task</span> <span class="kw">=</span> <span class="no">mtcars.task</span>)
<span class="co">##       G1 </span>
<span class="co">## 61.17497</span></pre></body></html></div>
<p>Moreover, some measures require a certain type of prediction. For example in binary classification in order to calculate the AUC (<a href="measures.html" target="_blank">auc</a>) – the area under the ROC (receiver operating characteristic) curve – we have to make sure that posterior probabilities are predicted. For more information on ROC analysis, see the section on <a href="roc_analysis.html" target="_blank">ROC analysis</a>.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="no">lrn</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="kw">predict.type</span> <span class="kw">=</span> <span class="st">"prob"</span>)
<span class="no">mod</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/train.html">train</a></span>(<span class="no">lrn</span>, <span class="kw">task</span> <span class="kw">=</span> <span class="no">sonar.task</span>)
<span class="no">pred</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">mod</span>, <span class="kw">task</span> <span class="kw">=</span> <span class="no">sonar.task</span>)

<span class="fu"><a href="../../reference/performance.html">performance</a></span>(<span class="no">pred</span>, <span class="kw">measures</span> <span class="kw">=</span> <span class="no">auc</span>)
<span class="co">##       auc </span>
<span class="co">## 0.9224018</span></pre></body></html></div>
<p>Also bear in mind that many of the performance measures that are available for classification, e.g., the false positive rate (<a href="measures.html" target="_blank">fpr</a>), are only suitable for binary problems.</p>
</div>
</div>
<div id="access-a-performance-measure" class="section level1">
<h1 class="hasAnchor">
<a href="#access-a-performance-measure" class="anchor"></a>Access a performance measure</h1>
<p>Performance measures in <code>mlr</code> are objects of class <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>). If you are interested in the properties or requirements of a single measure you can access it directly. See the help page of <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) for information on the individual slots.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="co"># Mean misclassification error</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">mmce</span>)
<span class="co">## List of 10</span>
<span class="co">##  $ id        : chr "mmce"</span>
<span class="co">##  $ minimize  : logi TRUE</span>
<span class="co">##  $ properties: chr [1:4] "classif" "classif.multi" "req.pred" "req.truth"</span>
<span class="co">##  $ fun       :function (task, model, pred, feats, extra.args)  </span>
<span class="co">##  $ extra.args: list()</span>
<span class="co">##  $ best      : num 0</span>
<span class="co">##  $ worst     : num 1</span>
<span class="co">##  $ name      : chr "Mean misclassification error"</span>
<span class="co">##  $ note      : chr "Defined as: mean(response != truth)"</span>
<span class="co">##  $ aggr      :List of 4</span>
<span class="co">##   ..$ id        : chr "test.mean"</span>
<span class="co">##   ..$ name      : chr "Test mean"</span>
<span class="co">##   ..$ fun       :function (task, perf.test, perf.train, measure, group, pred)  </span>
<span class="co">##   ..$ properties: chr "req.test"</span>
<span class="co">##   ..- attr(*, "class")= chr "Aggregation"</span>
<span class="co">##  - attr(*, "class")= chr "Measure"</span></pre></body></html></div>
</div>
<div id="binary-classification" class="section level1">
<h1 class="hasAnchor">
<a href="#binary-classification" class="anchor"></a>Binary classification</h1>
<p>For binary classification specialized techniques exist to analyze the performance.</p>
<div id="plot-performance-versus-threshold" class="section level2">
<h2 class="hasAnchor">
<a href="#plot-performance-versus-threshold" class="anchor"></a>Plot performance versus threshold</h2>
<p>As you may recall (see the previous section on <a href="predict.html" target="_blank">making predictions</a>) in binary classification we can adjust the threshold used to map probabilities to class labels. Helpful in this regard is are the functions <code><a href="../../reference/generateThreshVsPerfData.html">generateThreshVsPerfData()</a></code> and <code><a href="../../reference/plotThreshVsPerf.html">plotThreshVsPerf()</a></code>, which generate and plot, respectively, the learner performance versus the threshold.</p>
<p>For more performance plots and automatic threshold tuning see the section on <a href="roc_analysis.html" target="_blank">ROC analysis</a>.</p>
<p>In the following example we consider the <code><a href="https://rdrr.io/pkg/mlbench/man/Sonar.html">mlbench::Sonar()</a></code> data set and plot the false positive rate (<a href="measures.html" target="_blank">fpr</a>), the false negative rate (<a href="measures.html" target="_blank">fnr</a>) as well as the misclassification rate (<a href="measures.html" target="_blank">mmce</a>) for all possible threshold values.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">lrn</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.lda"</span>, <span class="kw">predict.type</span> <span class="kw">=</span> <span class="st">"prob"</span>)
<span class="no">n</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/getTaskSize.html">getTaskSize</a></span>(<span class="no">sonar.task</span>)
<span class="no">mod</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/train.html">train</a></span>(<span class="no">lrn</span>, <span class="kw">task</span> <span class="kw">=</span> <span class="no">sonar.task</span>, <span class="kw">subset</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">1</span>, <span class="no">n</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="fl">2</span>))
<span class="no">pred</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span>(<span class="no">mod</span>, <span class="kw">task</span> <span class="kw">=</span> <span class="no">sonar.task</span>, <span class="kw">subset</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="fl">2</span>, <span class="no">n</span>, <span class="kw">by</span> <span class="kw">=</span> <span class="fl">2</span>))

<span class="co"># Performance for the default threshold 0.5</span>
<span class="fu"><a href="../../reference/performance.html">performance</a></span>(<span class="no">pred</span>, <span class="kw">measures</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="no">fpr</span>, <span class="no">fnr</span>, <span class="no">mmce</span>))
<span class="co">##       fpr       fnr      mmce </span>
<span class="co">## 0.2500000 0.3035714 0.2788462</span>
<span class="co"># Plot false negative and positive rates as well as the error rate versus the threshold</span>
<span class="no">d</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/generateThreshVsPerfData.html">generateThreshVsPerfData</a></span>(<span class="no">pred</span>, <span class="kw">measures</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="no">fpr</span>, <span class="no">fnr</span>, <span class="no">mmce</span>))
<span class="fu"><a href="../../reference/plotThreshVsPerf.html">plotThreshVsPerf</a></span>(<span class="no">d</span>)</pre></body></html></div>
<p><img src="performance_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>There is an experimental <code>ggvis</code> plotting function <code>plotThreshVsPerfGGVIS()</code> which performs similarly to <code><a href="../../reference/plotThreshVsPerf.html">plotThreshVsPerf()</a></code> but instead of creating facetted subplots to visualize multiple learners and/or multiple measures, one of them is mapped to an interactive sidebar which selects what to display.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu">plotThreshVsPerfGGVIS</span>(<span class="no">d</span>)</pre></body></html></div>
</div>
<div id="roc-measures" class="section level2">
<h2 class="hasAnchor">
<a href="#roc-measures" class="anchor"></a>ROC measures</h2>
<p>For binary classification a large number of specialized measures exist, which can be nicely formatted into one matrix, see for example the <a href="https://en.wikipedia.org/wiki/Receiver_operating_characteristic">receiver operating characteristic page on wikipedia</a>.</p>
<p>We can generate a similiar table with the <code><a href="../../reference/calculateROCMeasures.html">calculateROCMeasures()</a></code> function.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="no">r</span> <span class="kw">=</span> <span class="fu"><a href="../../reference/calculateROCMeasures.html">calculateROCMeasures</a></span>(<span class="no">pred</span>)
<span class="no">r</span>
<span class="co">##     predicted</span>
<span class="co">## true M         R                            </span>
<span class="co">##    M 39        17        tpr: 0.7  fnr: 0.3 </span>
<span class="co">##    R 12        36        fpr: 0.25 tnr: 0.75</span>
<span class="co">##      ppv: 0.76 for: 0.32 lrp: 2.79 acc: 0.72</span>
<span class="co">##      fdr: 0.24 npv: 0.68 lrm: 0.4  dor: 6.88</span>
<span class="co">## </span>
<span class="co">## </span>
<span class="co">## Abbreviations:</span>
<span class="co">## tpr - True positive rate (Sensitivity, Recall)</span>
<span class="co">## fpr - False positive rate (Fall-out)</span>
<span class="co">## fnr - False negative rate (Miss rate)</span>
<span class="co">## tnr - True negative rate (Specificity)</span>
<span class="co">## ppv - Positive predictive value (Precision)</span>
<span class="co">## for - False omission rate</span>
<span class="co">## lrp - Positive likelihood ratio (LR+)</span>
<span class="co">## fdr - False discovery rate</span>
<span class="co">## npv - Negative predictive value</span>
<span class="co">## acc - Accuracy</span>
<span class="co">## lrm - Negative likelihood ratio (LR-)</span>
<span class="co">## dor - Diagnostic odds ratio</span></pre></body></html></div>
<p>The top left <span class="math inline">\(2 \times 2\)</span> matrix is the <a href="predict.html" target="_blank">confusion matrix</a>, which shows the relative frequency of correctly and incorrectly classified observations. Below and to the right a large number of performance measures that can be inferred from the confusion matrix are added. By default some additional info about the measures is printed. You can turn this off using the <code>abbreviations</code> argument of the <code>print</code> (<code><a href="../../reference/calculateROCMeasures.html">calculateROCMeasures()</a></code>) method: <code><a href="https://rdrr.io/r/base/print.html">print(r, abbreviations = FALSE)</a></code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Patrick Schratz, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
    indexName: 'mlr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>

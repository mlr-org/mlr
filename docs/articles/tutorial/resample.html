<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Resampling â€¢ mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="Resampling">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learner.html">Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/train.html">Train</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configureMlr.html">Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection/Filtering</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
    <li>
      <a href="../../articles/tutorial/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../../news/index.html">News</a>
    </li>
    <li>
      <a href="../../articles/tutorial/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="../../articles/tutorial/talks_videos_workshops.html">Talks, Videos and Workshops</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    mlr-org Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrCPO">mlrCPO</a>
    </li>
    <li>
      <a href="https://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="https://openml.github.io/openml-r/vignettes/OpenML.html">OpenML</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-blog.netlify.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Resampling</h1>
            
      
      <!--The 'toc' block was inserted manually by @pat-s. It triggeres the inline ToC in the vignettes.-->
            <div id="toc">
      <h3 class="hasAnchor">
<a href="#toc" class="anchor"></a>Table of Contents</h3>
      <ul>
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li><a href="#accessing-resample-results">Accessing resample results</a></li>
      <li><a href="#stratification-blocking-and-grouping">Stratification, Blocking and Grouping</a></li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li><a href="#aggregating-performance-values">Aggregating performance values</a></li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      
      <small>Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/tutorial/resample.Rmd"><code>vignettes/tutorial/resample.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<p>Resampling strategies are usually used to assess the performance of a learning algorithm: The entire data set is (repeatedly) split into training sets <span class="math inline">\(D^{*b}\)</span> and test sets <span class="math inline">\(D \setminus D^{*b}\)</span>, <span class="math inline">\(b = 1,\ldots,B\)</span>. The learner is trained on each training set, predictions are made on the corresponding test set (sometimes on the training set as well) and the performance measure <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> is calculated. Then the <span class="math inline">\(B\)</span> individual performance values are aggregated, most often by calculating the mean. There exist various different resampling strategies, for example cross-validation and bootstrap, to mention just two popular approaches.</p>
<div class="figure" style="text-align: center">
<img src="https://raw.githubusercontent.com/pat-s/mlr/master/vignettes/tutorial/devel/pdf/img/resampling.png" alt="Resampling Figure" width="600px"><p class="caption">
Resampling Figure
</p>
</div>
<p>If you want to read up on further details, the paper <a href="http://link.springer.com/chapter/10.1007%2F978-0-387-47509-7_8">Resampling Strategies for Model Assessment and Selection</a> by Simon is probably not a bad choice. Bernd has also published a paper <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/EVCO_a_00069">Resampling methods for meta-model validation with recommendations for evolutionary computation</a> which contains detailed descriptions and lots of statistical background information on resampling methods.</p>
<div id="defining-the-resampling-strategy" class="section level2">
<h2 class="hasAnchor">
<a href="#defining-the-resampling-strategy" class="anchor"></a>Defining the resampling strategy</h2>
<p>In <code>mlr</code> the resampling strategy can be defined via function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. It requires a string that specifies the resampling method and, depending on the selected strategy, further information like the number of iterations. The supported resampling strategies are:</p>
<ul>
<li>Cross-validation (<code>"CV"</code>),</li>
<li>Leave-one-out cross-validation (<code>"LOO"</code>),</li>
<li>Repeated cross-validation (<code>"RepCV"</code>),</li>
<li>Out-of-bag bootstrap and other variants like <em>b632</em> (<code>"Bootstrap"</code>),</li>
<li>Subsampling, also called Monte-Carlo cross-validation (<code>"Subsample"</code>),</li>
<li>Holdout (training/test) (<code>"Holdout"</code>).</li>
</ul>
<p>For example if you want to use 3-fold cross-validation type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb1-2" title="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" title="3">rdesc</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="co">## Resample description: cross-validation with 3 iterations.</span></a>
<a class="sourceLine" id="cb1-5" title="5"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co">## Stratification: FALSE</span></a></code></pre></div>
<p>For holdout estimation use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># Holdout estimation</span></a>
<a class="sourceLine" id="cb2-2" title="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</a>
<a class="sourceLine" id="cb2-3" title="3">rdesc</a>
<a class="sourceLine" id="cb2-4" title="4"><span class="co">## Resample description: holdout with 0.67 split rate.</span></a>
<a class="sourceLine" id="cb2-5" title="5"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">## Stratification: FALSE</span></a></code></pre></div>
<p>In order to save you some typing <code>mlr</code> contains some pre-defined resample descriptions for very common strategies like holdout (<code>hout</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)) as well as cross-validation with different numbers of folds (e.g., <code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) or <code>cv10</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">hout</a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">## Resample description: holdout with 0.67 split rate.</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co">## Stratification: FALSE</span></a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6">cv3</a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co">## Resample description: cross-validation with 3 iterations.</span></a>
<a class="sourceLine" id="cb3-8" title="8"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co">## Stratification: FALSE</span></a></code></pre></div>
</div>
<div id="performing-the-resampling" class="section level2">
<h2 class="hasAnchor">
<a href="#performing-the-resampling" class="anchor"></a>Performing the resampling</h2>
<p>Function <code><a href="../../reference/resample.html">resample()</a></code> evaluates a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) on a given machine learning <code><a href="../../reference/Task.html">Task()</a></code> using the selected resampling strategy (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<p>As a first example, the performance of linear regression (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm()</a></code>) on the <code>BostonHousing</code> (<code><a href="http://www.rdocumentation.org/packages/mlbench/topics/BostonHousing">mlbench::BostonHousing()</a></code>) data set is calculated using <em>3-fold cross-validation</em>.</p>
<p>Generally, for <em><span class="math inline">\(K\)</span>-fold cross-validation</em> the data set <span class="math inline">\(D\)</span> is partitioned into <span class="math inline">\(K\)</span> subsets of (approximately) equal size. In the <span class="math inline">\(b\)</span>-th of the <span class="math inline">\(K\)</span> iterations, the <span class="math inline">\(b\)</span>-th subset is used for testing, while the union of the remaining parts forms the training set.</p>
<p>As usual, you can either pass a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) object to <code><a href="../../reference/resample.html">resample()</a></code> or, as done here, provide the class name <code>"regr.lm"</code> of the learner. Since no performance measure is specified the default for regression learners (mean squared error, <a href="measures.html" target="_blank">mse</a>) is calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># Specify the resampling strategy (3-fold cross-validation)</span></a>
<a class="sourceLine" id="cb4-2" title="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-3" title="3"></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co"># Calculate the performance</span></a>
<a class="sourceLine" id="cb4-5" title="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc)</a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">## Resampling: cross-validation</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">## Measures:             mse</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">## [Resample] iter 1:    26.5039175</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">## [Resample] iter 2:    15.3511953</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">## [Resample] iter 3:    27.7059289</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">## </span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">## Aggregated Result: mse.test.mean=23.1870139</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">## </span></a>
<a class="sourceLine" id="cb4-14" title="14"></a>
<a class="sourceLine" id="cb4-15" title="15">r</a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="co">## Learner: regr.lm</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">## Aggr perf: mse.test.mean=23.1870139</span></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="co">## Runtime: 0.0324383</span></a></code></pre></div>
<p>The result <code>r</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> result. It contains performance results for the learner and some additional information like the runtime, predicted values, and optionally the models fitted in single resampling iterations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># Peak into r</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw">names</span>(r)</a>
<a class="sourceLine" id="cb5-3" title="3"><span class="co">##  [1] "learner.id"     "task.id"        "task.desc"      "measures.train"</span></a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">##  [5] "measures.test"  "aggr"           "pred"           "models"        </span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">##  [9] "err.msgs"       "err.dumps"      "extract"        "runtime"</span></a>
<a class="sourceLine" id="cb5-6" title="6"></a>
<a class="sourceLine" id="cb5-7" title="7">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">## mse.test.mean </span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">##      23.18701</span></a>
<a class="sourceLine" id="cb5-10" title="10"></a>
<a class="sourceLine" id="cb5-11" title="11">r<span class="op">$</span>measures.test</a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">##   iter      mse</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">## 1    1 26.50392</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">## 2    2 15.35120</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">## 3    3 27.70593</span></a></code></pre></div>
<p><code>r$measures.test</code> gives the performance on each of the 3 test data sets. <code>r$aggr</code> shows the aggregated performance value. Its name <code>"mse.test.mean"</code> indicates the performance measure, <a href="measures.html" target="_blank">mse</a>, and the method, <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), used to aggregate the 3 individual performances. <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) is the default aggregation scheme for most performance measures and, as the name implies, takes the mean over the performances on the test data sets.</p>
<p>Resampling in <code>mlr</code> works the same way for all types of learning problems and learners. Below is a classification example where a classification tree (rpart) (<code><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart::rpart()</a></code>) is evaluated on the <code>Sonar</code> (<code>mlbench::sonar()</code>) data set by subsampling with 5 iterations.</p>
<p>In each subsampling iteration the data set <span class="math inline">\(D\)</span> is randomly partitioned into a training and a test set according to a given percentage, e.g., 2/3 training and 1/3 test set. If there is just one iteration, the strategy is commonly called <em>holdout</em> or <em>test sample estimation</em>.</p>
<p>You can calculate several measures at once by passing a <code>list</code> of Measures (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>)s to <code><a href="../../reference/resample.html">resample()</a></code>. Below, the error rate (<a href="measures.html" target="_blank">mmce</a>), false positive and false negative rates (<a href="measures.html" target="_blank">fpr</a>, <a href="measures.html" target="_blank">fnr</a>), and the time it takes to train the learner (<a href="measures.html" target="_blank">timetrain</a>) are estimated by <em>subsampling</em> with 5 iterations.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># Subsampling with 5 iterations and default split ratio 2/3</span></a>
<a class="sourceLine" id="cb6-2" title="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co"># Subsampling with 5 iterations and 4/5 training data</span></a>
<a class="sourceLine" id="cb6-5" title="5">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>, <span class="dt">split =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-6" title="6"></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co"># Classification tree with information splitting criterion</span></a>
<a class="sourceLine" id="cb6-8" title="8">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>))</a>
<a class="sourceLine" id="cb6-9" title="9"></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co"># Calculate the performance measures</span></a>
<a class="sourceLine" id="cb6-11" title="11">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(lrn, sonar.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain))</a>
<a class="sourceLine" id="cb6-12" title="12"><span class="co">## Resampling: subsampling</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">## Measures:             mmce        fpr         fnr         timetrain</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co">## [Resample] iter 1:    0.4047619   0.5416667   0.2222222   0.0110000</span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">## [Resample] iter 2:    0.1666667   0.1200000   0.2352941   0.0070000</span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">## [Resample] iter 3:    0.3333333   0.1333333   0.4444444   0.0100000</span></a>
<a class="sourceLine" id="cb6-17" title="17"><span class="co">## [Resample] iter 4:    0.2380952   0.3913043   0.0526316   0.0280000</span></a>
<a class="sourceLine" id="cb6-18" title="18"><span class="co">## [Resample] iter 5:    0.3095238   0.2800000   0.3529412   0.0080000</span></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="co">## </span></a>
<a class="sourceLine" id="cb6-20" title="20"><span class="co">## Aggregated Result: mmce.test.mean=0.2904762,fpr.test.mean=0.2932609,fnr.test.mean=0.2615067,timetrain.test.mean=0.0128000</span></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="co">## </span></a>
<a class="sourceLine" id="cb6-22" title="22"></a>
<a class="sourceLine" id="cb6-23" title="23">r</a>
<a class="sourceLine" id="cb6-24" title="24"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb6-25" title="25"><span class="co">## Task: Sonar-example</span></a>
<a class="sourceLine" id="cb6-26" title="26"><span class="co">## Learner: classif.rpart</span></a>
<a class="sourceLine" id="cb6-27" title="27"><span class="co">## Aggr perf: mmce.test.mean=0.2904762,fpr.test.mean=0.2932609,fnr.test.mean=0.2615067,timetrain.test.mean=0.0128000</span></a>
<a class="sourceLine" id="cb6-28" title="28"><span class="co">## Runtime: 0.10692</span></a></code></pre></div>
<p>If you want to add further measures afterwards, use <code><a href="../../reference/addRRMeasure.html">addRRMeasure()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># Add balanced error rate (ber) and time used to predict</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw"><a href="../../reference/addRRMeasure.html">addRRMeasure</a></span>(r, <span class="kw">list</span>(ber, timepredict))</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">## Task: Sonar-example</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">## Learner: classif.rpart</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">## Aggr perf: mmce.test.mean=0.2904762,fpr.test.mean=0.2932609,fnr.test.mean=0.2615067,timetrain.test.mean=0.0128000,ber.test.mean=0.2773838,timepredict.test.mean=0.0032000</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">## Runtime: 0.10692</span></a></code></pre></div>
<p>By default, <code><a href="../../reference/resample.html">resample()</a></code> prints progress messages and intermediate results. You can turn this off by setting <code>show.info = FALSE</code>, as done in the code chunk below. (If you are interested in suppressing these messages permanently have a look at the tutorial page about <a href="configureMlr.html" target="_blank">configuring mlr</a>.)</p>
<p>In the above example, the Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) was explicitly constructed. For convenience you can also specify the learner as a string and pass any learner parameters via the <code>...</code> argument of <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>), sonar.task, rdesc,</a>
<a class="sourceLine" id="cb8-2" title="2">  <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" title="3"></a>
<a class="sourceLine" id="cb8-4" title="4">r</a>
<a class="sourceLine" id="cb8-5" title="5"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb8-6" title="6"><span class="co">## Task: Sonar-example</span></a>
<a class="sourceLine" id="cb8-7" title="7"><span class="co">## Learner: classif.rpart</span></a>
<a class="sourceLine" id="cb8-8" title="8"><span class="co">## Aggr perf: mmce.test.mean=0.2428571,fpr.test.mean=0.2968173,fnr.test.mean=0.1970195,timetrain.test.mean=0.0084000</span></a>
<a class="sourceLine" id="cb8-9" title="9"><span class="co">## Runtime: 0.0791025</span></a></code></pre></div>
</div>
<div id="accessing-resample-results" class="section level2">
<h2 class="hasAnchor">
<a href="#accessing-resample-results" class="anchor"></a>Accessing resample results</h2>
<p>Apart from the learner performance you can extract further information from the resample results, for example predicted values or the models fitted in individual resample iterations.</p>
<div id="predictions" class="section level3">
<h3 class="hasAnchor">
<a href="#predictions" class="anchor"></a>Predictions</h3>
<p>Per default, the <code><a href="../../reference/resample.html">resample()</a></code> result contains the predictions made during the resampling. If you do not want to keep them, e.g., in order to conserve memory, set <code>keep.pred = FALSE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<p>The predictions are stored in slot <code>$pred</code> of the resampling result, which can also be accessed by function <code><a href="../../reference/getRRPredictions.html">getRRPredictions()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">r<span class="op">$</span>pred</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="co">## Resampled Prediction for:</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co">## Resample description: subsampling with 5 iterations and 0.80 split rate.</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="co">## Stratification: FALSE</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">## predict.type: response</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co">## threshold: </span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">## time (mean): 0.00</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">##    id truth response iter  set</span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">## 1  18     R        M    1 test</span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co">## 2 189     M        M    1 test</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">## 3  88     R        R    1 test</span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="co">## 4 121     M        R    1 test</span></a>
<a class="sourceLine" id="cb9-14" title="14"><span class="co">## 5 165     M        R    1 test</span></a>
<a class="sourceLine" id="cb9-15" title="15"><span class="co">## 6 111     M        M    1 test</span></a>
<a class="sourceLine" id="cb9-16" title="16"><span class="co">## ... (#rows: 210, #cols: 5)</span></a>
<a class="sourceLine" id="cb9-17" title="17"></a>
<a class="sourceLine" id="cb9-18" title="18">pred =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictions.html">getRRPredictions</a></span>(r)</a>
<a class="sourceLine" id="cb9-19" title="19">pred</a>
<a class="sourceLine" id="cb9-20" title="20"><span class="co">## Resampled Prediction for:</span></a>
<a class="sourceLine" id="cb9-21" title="21"><span class="co">## Resample description: subsampling with 5 iterations and 0.80 split rate.</span></a>
<a class="sourceLine" id="cb9-22" title="22"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb9-23" title="23"><span class="co">## Stratification: FALSE</span></a>
<a class="sourceLine" id="cb9-24" title="24"><span class="co">## predict.type: response</span></a>
<a class="sourceLine" id="cb9-25" title="25"><span class="co">## threshold: </span></a>
<a class="sourceLine" id="cb9-26" title="26"><span class="co">## time (mean): 0.00</span></a>
<a class="sourceLine" id="cb9-27" title="27"><span class="co">##    id truth response iter  set</span></a>
<a class="sourceLine" id="cb9-28" title="28"><span class="co">## 1  18     R        M    1 test</span></a>
<a class="sourceLine" id="cb9-29" title="29"><span class="co">## 2 189     M        M    1 test</span></a>
<a class="sourceLine" id="cb9-30" title="30"><span class="co">## 3  88     R        R    1 test</span></a>
<a class="sourceLine" id="cb9-31" title="31"><span class="co">## 4 121     M        R    1 test</span></a>
<a class="sourceLine" id="cb9-32" title="32"><span class="co">## 5 165     M        R    1 test</span></a>
<a class="sourceLine" id="cb9-33" title="33"><span class="co">## 6 111     M        M    1 test</span></a>
<a class="sourceLine" id="cb9-34" title="34"><span class="co">## ... (#rows: 210, #cols: 5)</span></a></code></pre></div>
<p><code>pred</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> Prediction. Just as a <code><a href="../../reference/Prediction.html">Prediction()</a></code> object (see the tutorial page on making <a href="predict.html" target="_blank">predictions</a> it has an element <code>$data</code> which is a <code>data.frame</code> that contains the predictions and in the case of a supervised learning problem the true values of the target variable(s). You can use <code>as.data.frame</code> (<code><a href="../../reference/Prediction.html">Prediction()</a></code> to directly access the <code>$data</code> slot. Moreover, all getter functions for <code><a href="../../reference/Prediction.html">Prediction()</a></code> objects like <code><a href="../../reference/getPredictionResponse.html">getPredictionResponse()</a></code> or <code><a href="../../reference/getPredictionProbabilities.html">getPredictionProbabilities()</a></code> are applicable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">head</span>(<span class="kw">as.data.frame</span>(pred))</a>
<a class="sourceLine" id="cb10-2" title="2"><span class="co">##    id truth response iter  set</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co">## 1  18     R        M    1 test</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">## 2 189     M        M    1 test</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co">## 3  88     R        R    1 test</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">## 4 121     M        R    1 test</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="co">## 5 165     M        R    1 test</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">## 6 111     M        M    1 test</span></a>
<a class="sourceLine" id="cb10-9" title="9"></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionTruth</a></span>(pred))</a>
<a class="sourceLine" id="cb10-11" title="11"><span class="co">## [1] R M R M M M</span></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="co">## Levels: M R</span></a>
<a class="sourceLine" id="cb10-13" title="13"></a>
<a class="sourceLine" id="cb10-14" title="14"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionResponse</a></span>(pred))</a>
<a class="sourceLine" id="cb10-15" title="15"><span class="co">## [1] M M R R R M</span></a>
<a class="sourceLine" id="cb10-16" title="16"><span class="co">## Levels: M R</span></a></code></pre></div>
<p>The columns <code>iter</code> and <code>set</code> in the <code>data.frame</code> indicate the resampling iteration and the data set (<code>train</code> or <code>test</code>) for which the prediction was made.</p>
<p>By default, predictions are made for the test sets only. If predictions for the training set are required, set <code>predict = "train"</code> (for predictions on the train set only) or <code>predict = "both"</code> (for predictions on both train and test sets) in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. In any case, this is necessary for some bootstrap methods (<em>b632</em> and <em>b632+</em>) and some examples are shown later on.</p>
<p>Below, we use simple Holdout, i.e., split the data once into a training and test set, as resampling strategy and make predictions on both sets.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="co"># Make predictions on both training and test sets</span></a>
<a class="sourceLine" id="cb11-2" title="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb11-3" title="3"></a>
<a class="sourceLine" id="cb11-4" title="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-5" title="5">r</a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co">## Task: iris-example</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co">## Learner: classif.lda</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">## Aggr perf: mmce.test.mean=0.0200000</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="co">## Runtime: 0.00993848</span></a>
<a class="sourceLine" id="cb11-11" title="11"></a>
<a class="sourceLine" id="cb11-12" title="12">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb11-13" title="13"><span class="co">##   iter mmce</span></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="co">## 1    1 0.02</span></a></code></pre></div>
<p>(Please note that nonetheless the misclassification rate <code>r$aggr</code> is estimated on the test data only. How to calculate performance measures on the training sets is shown below.)</p>
<p>A second function to extract predictions from resample results is <code><a href="../../reference/getRRPredictionList.html">getRRPredictionList()</a></code> which returns a <code>list</code> of predictions split by data set (train/test) and resampling iteration.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1">predList =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictionList.html">getRRPredictionList</a></span>(r)</a>
<a class="sourceLine" id="cb12-2" title="2">predList</a>
<a class="sourceLine" id="cb12-3" title="3"><span class="co">## $train</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="co">## $train$`1`</span></a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co">## Prediction: 100 observations</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="co">## predict.type: response</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co">## threshold: </span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co">## time: 0.00</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">##      id      truth   response</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">## 96   96 versicolor versicolor</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">## 130 130  virginica  virginica</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">## 120 120  virginica  virginica</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">## 77   77 versicolor versicolor</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="co">## 23   23     setosa     setosa</span></a>
<a class="sourceLine" id="cb12-15" title="15"><span class="co">## 59   59 versicolor versicolor</span></a>
<a class="sourceLine" id="cb12-16" title="16"><span class="co">## ... (#rows: 100, #cols: 3)</span></a>
<a class="sourceLine" id="cb12-17" title="17"><span class="co">## </span></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="co">## </span></a>
<a class="sourceLine" id="cb12-19" title="19"><span class="co">## $test</span></a>
<a class="sourceLine" id="cb12-20" title="20"><span class="co">## $test$`1`</span></a>
<a class="sourceLine" id="cb12-21" title="21"><span class="co">## Prediction: 50 observations</span></a>
<a class="sourceLine" id="cb12-22" title="22"><span class="co">## predict.type: response</span></a>
<a class="sourceLine" id="cb12-23" title="23"><span class="co">## threshold: </span></a>
<a class="sourceLine" id="cb12-24" title="24"><span class="co">## time: 0.00</span></a>
<a class="sourceLine" id="cb12-25" title="25"><span class="co">##      id      truth   response</span></a>
<a class="sourceLine" id="cb12-26" title="26"><span class="co">## 92   92 versicolor versicolor</span></a>
<a class="sourceLine" id="cb12-27" title="27"><span class="co">## 58   58 versicolor versicolor</span></a>
<a class="sourceLine" id="cb12-28" title="28"><span class="co">## 48   48     setosa     setosa</span></a>
<a class="sourceLine" id="cb12-29" title="29"><span class="co">## 103 103  virginica  virginica</span></a>
<a class="sourceLine" id="cb12-30" title="30"><span class="co">## 70   70 versicolor versicolor</span></a>
<a class="sourceLine" id="cb12-31" title="31"><span class="co">## 82   82 versicolor versicolor</span></a>
<a class="sourceLine" id="cb12-32" title="32"><span class="co">## ... (#rows: 50, #cols: 3)</span></a></code></pre></div>
</div>
<div id="learner-models" class="section level3">
<h3 class="hasAnchor">
<a href="#learner-models" class="anchor"></a>Learner models</h3>
<p>In each resampling iteration a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) is fitted on the respective training set. By default, the resulting <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>)s are not included in the <code><a href="../../reference/resample.html">resample()</a></code> result and slot <code>$models</code> is empty. In order to keep them, set <code>models = TRUE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>, as in the following survival analysis example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb13-2" title="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" title="3"></a>
<a class="sourceLine" id="cb13-4" title="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"surv.coxph"</span>, lung.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-5" title="5">r<span class="op">$</span>models</a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">## Model for learner.id=surv.coxph; learner.class=surv.coxph</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">## Trained on: task.id = lung-example; obs = 111; features = 8</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">## Hyperparameters: </span></a>
<a class="sourceLine" id="cb13-10" title="10"><span class="co">## </span></a>
<a class="sourceLine" id="cb13-11" title="11"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb13-12" title="12"><span class="co">## Model for learner.id=surv.coxph; learner.class=surv.coxph</span></a>
<a class="sourceLine" id="cb13-13" title="13"><span class="co">## Trained on: task.id = lung-example; obs = 111; features = 8</span></a>
<a class="sourceLine" id="cb13-14" title="14"><span class="co">## Hyperparameters: </span></a>
<a class="sourceLine" id="cb13-15" title="15"><span class="co">## </span></a>
<a class="sourceLine" id="cb13-16" title="16"><span class="co">## [[3]]</span></a>
<a class="sourceLine" id="cb13-17" title="17"><span class="co">## Model for learner.id=surv.coxph; learner.class=surv.coxph</span></a>
<a class="sourceLine" id="cb13-18" title="18"><span class="co">## Trained on: task.id = lung-example; obs = 112; features = 8</span></a>
<a class="sourceLine" id="cb13-19" title="19"><span class="co">## Hyperparameters:</span></a></code></pre></div>
</div>
<div id="the-extract-option" class="section level3">
<h3 class="hasAnchor">
<a href="#the-extract-option" class="anchor"></a>The extract option</h3>
<p>Keeping complete fitted models can be memory-intensive if these objects are large or the number of resampling iterations is high. Alternatively, you can use the <code>extract</code> argument of <code><a href="../../reference/resample.html">resample()</a></code> to retain only the information you need. To this end you need to pass a function to <code>extract</code> which is applied to each <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) object fitted in each resampling iteration.</p>
<p>Below, we cluster the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/mtcars">datasets::mtcars()</a></code> data using the <span class="math inline">\(k\)</span>-means algorithm with <span class="math inline">\(k = 3\)</span> and keep only the cluster centers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb14-2" title="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-3" title="3"></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="co"># Extract the compute cluster centers</span></a>
<a class="sourceLine" id="cb14-5" title="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"cluster.kmeans"</span>, mtcars.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb14-6" title="6">  <span class="dt">centers =</span> <span class="dv">3</span>, <span class="dt">extract =</span> <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/getLearnerModel.html">getLearnerModel</a></span>(x)<span class="op">$</span>centers)</a>
<a class="sourceLine" id="cb14-7" title="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb14-8" title="8"><span class="co">## This is package 'modeest' written by P. PONCET.</span></a>
<a class="sourceLine" id="cb14-9" title="9"><span class="co">## For a complete list of functions, use 'library(help = "modeest")' or 'help.start()'.</span></a>
<a class="sourceLine" id="cb14-10" title="10">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb14-11" title="11"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb14-12" title="12"><span class="co">##        mpg      cyl      disp        hp     drat       wt     qsec</span></a>
<a class="sourceLine" id="cb14-13" title="13"><span class="co">## 1 26.18571 4.000000  99.31429  81.85714 4.188571 2.155714 18.74857</span></a>
<a class="sourceLine" id="cb14-14" title="14"><span class="co">## 2 14.36667 8.000000 342.15556 217.11111 3.265556 4.039333 16.68667</span></a>
<a class="sourceLine" id="cb14-15" title="15"><span class="co">## 3 20.06667 5.666667 166.40000 119.66667 3.670000 3.052500 18.50000</span></a>
<a class="sourceLine" id="cb14-16" title="16"><span class="co">##          vs        am     gear     carb</span></a>
<a class="sourceLine" id="cb14-17" title="17"><span class="co">## 1 0.8571429 0.8571429 4.000000 1.428571</span></a>
<a class="sourceLine" id="cb14-18" title="18"><span class="co">## 2 0.0000000 0.2222222 3.444444 3.888889</span></a>
<a class="sourceLine" id="cb14-19" title="19"><span class="co">## 3 0.5000000 0.5000000 4.000000 3.500000</span></a>
<a class="sourceLine" id="cb14-20" title="20"><span class="co">## </span></a>
<a class="sourceLine" id="cb14-21" title="21"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb14-22" title="22"><span class="co">##        mpg      cyl     disp       hp     drat       wt     qsec        vs</span></a>
<a class="sourceLine" id="cb14-23" title="23"><span class="co">## 1 22.93636 4.909091 147.7455 105.7273 3.680000 2.724818 18.50091 0.8181818</span></a>
<a class="sourceLine" id="cb14-24" title="24"><span class="co">## 2 13.67500 8.000000 443.0000 206.2500 3.060000 4.966000 17.56750 0.0000000</span></a>
<a class="sourceLine" id="cb14-25" title="25"><span class="co">## 3 15.61667 8.000000 333.4667 209.8333 3.421667 3.587500 16.24500 0.0000000</span></a>
<a class="sourceLine" id="cb14-26" title="26"><span class="co">##          am     gear     carb</span></a>
<a class="sourceLine" id="cb14-27" title="27"><span class="co">## 1 0.5454545 3.909091 2.272727</span></a>
<a class="sourceLine" id="cb14-28" title="28"><span class="co">## 2 0.0000000 3.000000 3.500000</span></a>
<a class="sourceLine" id="cb14-29" title="29"><span class="co">## 3 0.1666667 3.333333 3.166667</span></a>
<a class="sourceLine" id="cb14-30" title="30"><span class="co">## </span></a>
<a class="sourceLine" id="cb14-31" title="31"><span class="co">## [[3]]</span></a>
<a class="sourceLine" id="cb14-32" title="32"><span class="co">##        mpg      cyl     disp        hp     drat       wt     qsec</span></a>
<a class="sourceLine" id="cb14-33" title="33"><span class="co">## 1 16.38000 8.000000 372.2000 232.00000 3.242000 3.954000 16.38600</span></a>
<a class="sourceLine" id="cb14-34" title="34"><span class="co">## 2 16.92000 7.600000 286.3200 154.00000 3.026000 3.536000 17.84200</span></a>
<a class="sourceLine" id="cb14-35" title="35"><span class="co">## 3 25.96364 4.545455 118.4182  87.81818 4.078182 2.484818 18.86455</span></a>
<a class="sourceLine" id="cb14-36" title="36"><span class="co">##          vs        am     gear     carb</span></a>
<a class="sourceLine" id="cb14-37" title="37"><span class="co">## 1 0.0000000 0.2000000 3.400000 4.000000</span></a>
<a class="sourceLine" id="cb14-38" title="38"><span class="co">## 2 0.2000000 0.0000000 3.000000 2.200000</span></a>
<a class="sourceLine" id="cb14-39" title="39"><span class="co">## 3 0.8181818 0.6363636 4.181818 2.272727</span></a></code></pre></div>
<p>As a second example, we extract the variable importances from fitted regression trees using function <code><a href="../../reference/getFeatureImportance.html">getFeatureImportance()</a></code>. (For more detailed information on this topic see the <a href="feature_selection.html" target="_blank">feature selection</a> page.)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="co"># Extract the variable importance in a regression tree</span></a>
<a class="sourceLine" id="cb15-2" title="2">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">extract =</span> getFeatureImportance)</a>
<a class="sourceLine" id="cb15-3" title="3">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb15-4" title="4"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb15-5" title="5"><span class="co">## FeatureImportance:</span></a>
<a class="sourceLine" id="cb15-6" title="6"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb15-7" title="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb15-8" title="8"><span class="co">## Learner: regr.rpart</span></a>
<a class="sourceLine" id="cb15-9" title="9"><span class="co">## Measure: NA</span></a>
<a class="sourceLine" id="cb15-10" title="10"><span class="co">## Contrast: NA</span></a>
<a class="sourceLine" id="cb15-11" title="11"><span class="co">## Aggregation: function (x)  x</span></a>
<a class="sourceLine" id="cb15-12" title="12"><span class="co">## Replace: NA</span></a>
<a class="sourceLine" id="cb15-13" title="13"><span class="co">## Number of Monte-Carlo iterations: NA</span></a>
<a class="sourceLine" id="cb15-14" title="14"><span class="co">## Local: FALSE</span></a>
<a class="sourceLine" id="cb15-15" title="15"><span class="co">##       crim       zn    indus     chas      nox       rm      age      dis</span></a>
<a class="sourceLine" id="cb15-16" title="16"><span class="co">## 1 2296.292 4900.708 7185.948 79.10234 6241.758 11474.88 6083.884 1954.561</span></a>
<a class="sourceLine" id="cb15-17" title="17"><span class="co">##        rad      tax  ptratio        b    lstat</span></a>
<a class="sourceLine" id="cb15-18" title="18"><span class="co">## 1 390.2437 899.5688 696.5474 69.79616 16717.12</span></a>
<a class="sourceLine" id="cb15-19" title="19"><span class="co">## </span></a>
<a class="sourceLine" id="cb15-20" title="20"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb15-21" title="21"><span class="co">## FeatureImportance:</span></a>
<a class="sourceLine" id="cb15-22" title="22"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb15-23" title="23"><span class="co">## </span></a>
<a class="sourceLine" id="cb15-24" title="24"><span class="co">## Learner: regr.rpart</span></a>
<a class="sourceLine" id="cb15-25" title="25"><span class="co">## Measure: NA</span></a>
<a class="sourceLine" id="cb15-26" title="26"><span class="co">## Contrast: NA</span></a>
<a class="sourceLine" id="cb15-27" title="27"><span class="co">## Aggregation: function (x)  x</span></a>
<a class="sourceLine" id="cb15-28" title="28"><span class="co">## Replace: NA</span></a>
<a class="sourceLine" id="cb15-29" title="29"><span class="co">## Number of Monte-Carlo iterations: NA</span></a>
<a class="sourceLine" id="cb15-30" title="30"><span class="co">## Local: FALSE</span></a>
<a class="sourceLine" id="cb15-31" title="31"><span class="co">##       crim       zn    indus     chas      nox       rm      age      dis</span></a>
<a class="sourceLine" id="cb15-32" title="32"><span class="co">## 1 1395.617 1090.791 5515.936 263.4797 3863.708 18560.06 2655.462 2778.501</span></a>
<a class="sourceLine" id="cb15-33" title="33"><span class="co">##        rad      tax  ptratio        b    lstat</span></a>
<a class="sourceLine" id="cb15-34" title="34"><span class="co">## 1 1041.329 3414.084 3538.689 395.2196 11636.61</span></a>
<a class="sourceLine" id="cb15-35" title="35"><span class="co">## </span></a>
<a class="sourceLine" id="cb15-36" title="36"><span class="co">## [[3]]</span></a>
<a class="sourceLine" id="cb15-37" title="37"><span class="co">## FeatureImportance:</span></a>
<a class="sourceLine" id="cb15-38" title="38"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb15-39" title="39"><span class="co">## </span></a>
<a class="sourceLine" id="cb15-40" title="40"><span class="co">## Learner: regr.rpart</span></a>
<a class="sourceLine" id="cb15-41" title="41"><span class="co">## Measure: NA</span></a>
<a class="sourceLine" id="cb15-42" title="42"><span class="co">## Contrast: NA</span></a>
<a class="sourceLine" id="cb15-43" title="43"><span class="co">## Aggregation: function (x)  x</span></a>
<a class="sourceLine" id="cb15-44" title="44"><span class="co">## Replace: NA</span></a>
<a class="sourceLine" id="cb15-45" title="45"><span class="co">## Number of Monte-Carlo iterations: NA</span></a>
<a class="sourceLine" id="cb15-46" title="46"><span class="co">## Local: FALSE</span></a>
<a class="sourceLine" id="cb15-47" title="47"><span class="co">##      crim       zn    indus chas      nox       rm    age      dis</span></a>
<a class="sourceLine" id="cb15-48" title="48"><span class="co">## 1 1403.89 1278.869 3317.559    0 3590.567 13611.05 3636.2 2879.856</span></a>
<a class="sourceLine" id="cb15-49" title="49"><span class="co">##        rad      tax  ptratio        b    lstat</span></a>
<a class="sourceLine" id="cb15-50" title="50"><span class="co">## 1 554.1831 3024.233 2922.564 509.0973 12391.47</span></a></code></pre></div>
<p>There is also an convenience function <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices()</a></code> to extract the resampling indices from the <code>ResampleResult</code> object:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(r)</a>
<a class="sourceLine" id="cb16-2" title="2"><span class="co">## $train.inds</span></a>
<a class="sourceLine" id="cb16-3" title="3"><span class="co">## $train.inds[[1]]</span></a>
<a class="sourceLine" id="cb16-4" title="4"><span class="co">##   [1] 460 265 450 132 427 321 236 232 411  81   4 389 240 149 289 252 210</span></a>
<a class="sourceLine" id="cb16-5" title="5"><span class="co">##  [18]  72 282 401 108 408  69 112 271 202  60 372 451 324 474 190 250 400</span></a>
<a class="sourceLine" id="cb16-6" title="6"><span class="co">##  [35] 356 316 221 349 304 219 244 214 497 441 195   6 484 212 197  13  93</span></a>
<a class="sourceLine" id="cb16-7" title="7"><span class="co">##  [52] 216  14 200 486  52 483  83 186 243  88 489 239 332 117 278 290  33</span></a>
<a class="sourceLine" id="cb16-8" title="8"><span class="co">##  [69] 352 498  84  82 118 350 100  89 479  53 393 363 286  56 429 228 288</span></a>
<a class="sourceLine" id="cb16-9" title="9"><span class="co">##  [86] 463  75  10 346 284 309 318 420 306 155 432 499  22 329 249 194  45</span></a>
<a class="sourceLine" id="cb16-10" title="10"><span class="co">## [103] 158 342 156 381 150 470  99  98 196  46   1 292 299  66 410 434 261</span></a>
<a class="sourceLine" id="cb16-11" title="11"><span class="co">## [120] 209 131 388 192 491 253 129 417 102 397 390 123 237 396 503 273 143</span></a>
<a class="sourceLine" id="cb16-12" title="12"><span class="co">## [137]  23  16 360  12 313 229  57 205 107 142  39  44 294  91 173 302 119</span></a>
<a class="sourceLine" id="cb16-13" title="13"><span class="co">## [154] 505  87 105 103 120  47  20  54 394 359 438  48 501 485 151 391 147</span></a>
<a class="sourceLine" id="cb16-14" title="14"><span class="co">## [171]  65 225 482 187 341 469 488 495 246 146 248 167 145 191 235 333 440</span></a>
<a class="sourceLine" id="cb16-15" title="15"><span class="co">## [188] 458 204  24 172  64 335 231 277 502  15 272 478 465 130  17 283 266</span></a>
<a class="sourceLine" id="cb16-16" title="16"><span class="co">## [205]  90 154 168  42 185 476 377 366 179 367 220 500 419  41  40 136 334</span></a>
<a class="sourceLine" id="cb16-17" title="17"><span class="co">## [222] 307 362 504 481 404 152 347 409 368 473  80 176 116 260 376 475  85</span></a>
<a class="sourceLine" id="cb16-18" title="18"><span class="co">## [239] 436 415 275 315 177  58 139 280 426 338 104 467 320 121 422 480  63</span></a>
<a class="sourceLine" id="cb16-19" title="19"><span class="co">## [256] 159  37 213 135  11 466  51 459  34 452 424 433   3 343 208 399 267</span></a>
<a class="sourceLine" id="cb16-20" title="20"><span class="co">## [273] 141 171  67 357 444 303 183 106 137 101 279 224 268 416  70 263 180</span></a>
<a class="sourceLine" id="cb16-21" title="21"><span class="co">## [290] 382 337 462  49 364 134 122 203 447 193  32 109 477 312 227 439 369</span></a>
<a class="sourceLine" id="cb16-22" title="22"><span class="co">## [307] 178 269 464 124 160 181 255  27 378 127  79 310 276 297 340 403 238</span></a>
<a class="sourceLine" id="cb16-23" title="23"><span class="co">## [324]  38 305 496 406 111 413 211  86 454 300 455  77 386 157</span></a>
<a class="sourceLine" id="cb16-24" title="24"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-25" title="25"><span class="co">## $train.inds[[2]]</span></a>
<a class="sourceLine" id="cb16-26" title="26"><span class="co">##   [1] 374 427  55 319 321 411  81   4  62 443 493  36 389 240 138 258  74</span></a>
<a class="sourceLine" id="cb16-27" title="27"><span class="co">##  [18] 252 210 184  30 282 401 408 291 431 506 324 474 190 250 356 270 349</span></a>
<a class="sourceLine" id="cb16-28" title="28"><span class="co">##  [35] 304 219 398 254 128 449 358   6 484 182 383 461 126 212 197 446  13</span></a>
<a class="sourceLine" id="cb16-29" title="29"><span class="co">##  [52]  14 486  52  83  88 170 199 442 239 332 174 290  31 352  82 274 100</span></a>
<a class="sourceLine" id="cb16-30" title="30"><span class="co">##  [69] 217  89 479 348 370 453  53 345  56 429 222 328 125 241 463 384 339</span></a>
<a class="sourceLine" id="cb16-31" title="31"><span class="co">##  [86] 336 309  29 264 420 306 432 379 499  22 329   5 194  45 287 158 342</span></a>
<a class="sourceLine" id="cb16-32" title="32"><span class="co">## [103] 156 381 395 402  76 470  99 281 233 251 196 162 375 330   1 373 430</span></a>
<a class="sourceLine" id="cb16-33" title="33"><span class="co">## [120]  28 198 385 292  68 285 410 434   2 425 261 169 131 259 308 428 491</span></a>
<a class="sourceLine" id="cb16-34" title="34"><span class="co">## [137] 435 253 421 129 396 503 414 143  23 405  16 360 163 218 296 317 205</span></a>
<a class="sourceLine" id="cb16-35" title="35"><span class="co">## [154] 188 142  92  44 294 119 456 365  87  59 234 355  47  95 230 327 472</span></a>
<a class="sourceLine" id="cb16-36" title="36"><span class="co">## [171]  50 371  73 438  21 301 206 391 256 147  65 225 207 187 341 469 423</span></a>
<a class="sourceLine" id="cb16-37" title="37"><span class="co">## [188] 246 257 248 361 145 325 235 351 333 323 110 204  24 172 437 407  35</span></a>
<a class="sourceLine" id="cb16-38" title="38"><span class="co">## [205] 468 272 478  18 465 293 166  90 154 165  42 185 354 179 457 114 419</span></a>
<a class="sourceLine" id="cb16-39" title="39"><span class="co">## [222] 387  41 136 362  61 175 404 353 409   9  80   8 487 116 322 260 115</span></a>
<a class="sourceLine" id="cb16-40" title="40"><span class="co">## [239] 376 215 247 436 315  58 280  43 298 338 104  78 262 480  63 392 113</span></a>
<a class="sourceLine" id="cb16-41" title="41"><span class="co">## [256] 159 326  19  94 418  51 448  25 148 452 144 424   3 343 208 295 399</span></a>
<a class="sourceLine" id="cb16-42" title="42"><span class="co">## [273] 267 133 171 311 164 471 183 137 412 224 492 140 268 416 331 161 263</span></a>
<a class="sourceLine" id="cb16-43" title="43"><span class="co">## [290] 226 180 382  71 337  49 134 447 193 109 245 477 242  97  96 178 464</span></a>
<a class="sourceLine" id="cb16-44" title="44"><span class="co">## [307] 490 314 160 181 255 378 127  79 380 276 297 340 403 238   7 344 201</span></a>
<a class="sourceLine" id="cb16-45" title="45"><span class="co">## [324]  38 305 496 406  86 454 300 455 153 189 445 494 223  26</span></a>
<a class="sourceLine" id="cb16-46" title="46"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-47" title="47"><span class="co">## $train.inds[[3]]</span></a>
<a class="sourceLine" id="cb16-48" title="48"><span class="co">##   [1] 460 265 374 450 132  55 319 236 232  62 443 493  36 149 138 289 258</span></a>
<a class="sourceLine" id="cb16-49" title="49"><span class="co">##  [18]  74 184  30  72 108 291  69 431 112 271 202 506  60 372 451 400 316</span></a>
<a class="sourceLine" id="cb16-50" title="50"><span class="co">##  [35] 221 270 244 214 398 254 128 449 497 358 441 195 182 383 461 126 446</span></a>
<a class="sourceLine" id="cb16-51" title="51"><span class="co">##  [52]  93 216 200 483 186 243 170 199 489 442 174 117 278  33  31 498  84</span></a>
<a class="sourceLine" id="cb16-52" title="52"><span class="co">##  [69] 118 274 350 217 348 370 453 393 363 286 345 222 228 328 125 241 288</span></a>
<a class="sourceLine" id="cb16-53" title="53"><span class="co">##  [86] 384 339  75  10 346 284 336  29 318 264 155 379 249   5 287 150 395</span></a>
<a class="sourceLine" id="cb16-54" title="54"><span class="co">## [103] 402  76 281 233 251  98 162 375 330  46 373 430  28 198 385 299  66</span></a>
<a class="sourceLine" id="cb16-55" title="55"><span class="co">## [120]  68 285   2 425 169 209 259 308 388 192 428 435 421 417 102 397 390</span></a>
<a class="sourceLine" id="cb16-56" title="56"><span class="co">## [137] 123 237 414 273 405 163 218 296  12 313 229  57 317 107 188  92  39</span></a>
<a class="sourceLine" id="cb16-57" title="57"><span class="co">## [154]  91 173 302 456 505 365  59 105 234 103 120 355  95  20 230 327 472</span></a>
<a class="sourceLine" id="cb16-58" title="58"><span class="co">## [171]  54 394  50 359 371  73  48  21 501 485 151 301 206 256 207 482 488</span></a>
<a class="sourceLine" id="cb16-59" title="59"><span class="co">## [188] 495 423 257 146 167 361 191 325 351 440 323 458 110 437 407  64 335</span></a>
<a class="sourceLine" id="cb16-60" title="60"><span class="co">## [205] 231 277 502  35 468  15  18 130  17 283 293 266 166 165 168 354 476</span></a>
<a class="sourceLine" id="cb16-61" title="61"><span class="co">## [222] 377 366 367 457 220 114 500 387  40 334 307 504  61 481 175 152 353</span></a>
<a class="sourceLine" id="cb16-62" title="62"><span class="co">## [239] 347 368 473   9   8 487 176 322 115 475 215 247  85 415 275 177 139</span></a>
<a class="sourceLine" id="cb16-63" title="63"><span class="co">## [256]  43 298 426  78 262 467 320 121 422 392 113 326  37 213 135  11 466</span></a>
<a class="sourceLine" id="cb16-64" title="64"><span class="co">## [273]  19  94 418 459  34 448  25 148 144 433 295 133 141  67 311 357 164</span></a>
<a class="sourceLine" id="cb16-65" title="65"><span class="co">## [290] 471 444 303 106 101 412 279 492 140 331 161  70 226  71 462 364 122</span></a>
<a class="sourceLine" id="cb16-66" title="66"><span class="co">## [307] 203  32 245 312 242  97 227  96 439 369 269 124 490 314  27 380 310</span></a>
<a class="sourceLine" id="cb16-67" title="67"><span class="co">## [324]   7 344 201 111 413 211 153 189 445  77 494 386 157 223  26</span></a>
<a class="sourceLine" id="cb16-68" title="68"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-69" title="69"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-70" title="70"><span class="co">## $test.inds</span></a>
<a class="sourceLine" id="cb16-71" title="71"><span class="co">## $test.inds[[1]]</span></a>
<a class="sourceLine" id="cb16-72" title="72"><span class="co">##   [1]   2   5   7   8   9  18  19  21  25  26  28  29  30  31  35  36  43</span></a>
<a class="sourceLine" id="cb16-73" title="73"><span class="co">##  [18]  50  55  59  61  62  68  71  73  74  76  78  92  94  95  96  97 110</span></a>
<a class="sourceLine" id="cb16-74" title="74"><span class="co">##  [35] 113 114 115 125 126 128 133 138 140 144 148 153 161 162 163 164 165</span></a>
<a class="sourceLine" id="cb16-75" title="75"><span class="co">##  [52] 166 169 170 174 175 182 184 188 189 198 199 201 206 207 215 217 218</span></a>
<a class="sourceLine" id="cb16-76" title="76"><span class="co">##  [69] 222 223 226 230 233 234 241 242 245 247 251 254 256 257 258 259 262</span></a>
<a class="sourceLine" id="cb16-77" title="77"><span class="co">##  [86] 264 270 274 281 285 287 291 293 295 296 298 301 308 311 314 317 319</span></a>
<a class="sourceLine" id="cb16-78" title="78"><span class="co">## [103] 322 323 325 326 327 328 330 331 336 339 344 345 348 351 353 354 355</span></a>
<a class="sourceLine" id="cb16-79" title="79"><span class="co">## [120] 358 361 365 370 371 373 374 375 379 380 383 384 385 387 392 395 398</span></a>
<a class="sourceLine" id="cb16-80" title="80"><span class="co">## [137] 402 405 407 412 414 418 421 423 425 428 430 431 435 437 442 443 445</span></a>
<a class="sourceLine" id="cb16-81" title="81"><span class="co">## [154] 446 448 449 453 456 457 461 468 471 472 487 490 492 493 494 506</span></a>
<a class="sourceLine" id="cb16-82" title="82"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-83" title="83"><span class="co">## $test.inds[[2]]</span></a>
<a class="sourceLine" id="cb16-84" title="84"><span class="co">##   [1]  10  11  12  15  17  20  27  32  33  34  37  39  40  46  48  54  57</span></a>
<a class="sourceLine" id="cb16-85" title="85"><span class="co">##  [18]  60  64  66  67  69  70  72  75  77  84  85  91  93  98 101 102 103</span></a>
<a class="sourceLine" id="cb16-86" title="86"><span class="co">##  [35] 105 106 107 108 111 112 117 118 120 121 122 123 124 130 132 135 139</span></a>
<a class="sourceLine" id="cb16-87" title="87"><span class="co">##  [52] 141 146 149 150 151 152 155 157 167 168 173 176 177 186 191 192 195</span></a>
<a class="sourceLine" id="cb16-88" title="88"><span class="co">##  [69] 200 202 203 209 211 213 214 216 220 221 227 228 229 231 232 236 237</span></a>
<a class="sourceLine" id="cb16-89" title="89"><span class="co">##  [86] 243 244 249 265 266 269 271 273 275 277 278 279 283 284 286 288 289</span></a>
<a class="sourceLine" id="cb16-90" title="90"><span class="co">## [103] 299 302 303 307 310 312 313 316 318 320 334 335 346 347 350 357 359</span></a>
<a class="sourceLine" id="cb16-91" title="91"><span class="co">## [120] 363 364 366 367 368 369 372 377 386 388 390 393 394 397 400 413 415</span></a>
<a class="sourceLine" id="cb16-92" title="92"><span class="co">## [137] 417 422 426 433 439 440 441 444 450 451 458 459 460 462 466 467 473</span></a>
<a class="sourceLine" id="cb16-93" title="93"><span class="co">## [154] 475 476 481 482 483 485 488 489 495 497 498 500 501 502 504 505</span></a>
<a class="sourceLine" id="cb16-94" title="94"><span class="co">## </span></a>
<a class="sourceLine" id="cb16-95" title="95"><span class="co">## $test.inds[[3]]</span></a>
<a class="sourceLine" id="cb16-96" title="96"><span class="co">##   [1]   1   3   4   6  13  14  16  22  23  24  38  41  42  44  45  47  49</span></a>
<a class="sourceLine" id="cb16-97" title="97"><span class="co">##  [18]  51  52  53  56  58  63  65  79  80  81  82  83  86  87  88  89  90</span></a>
<a class="sourceLine" id="cb16-98" title="98"><span class="co">##  [35]  99 100 104 109 116 119 127 129 131 134 136 137 142 143 145 147 154</span></a>
<a class="sourceLine" id="cb16-99" title="99"><span class="co">##  [52] 156 158 159 160 171 172 178 179 180 181 183 185 187 190 193 194 196</span></a>
<a class="sourceLine" id="cb16-100" title="100"><span class="co">##  [69] 197 204 205 208 210 212 219 224 225 235 238 239 240 246 248 250 252</span></a>
<a class="sourceLine" id="cb16-101" title="101"><span class="co">##  [86] 253 255 260 261 263 267 268 272 276 280 282 290 292 294 297 300 304</span></a>
<a class="sourceLine" id="cb16-102" title="102"><span class="co">## [103] 305 306 309 315 321 324 329 332 333 337 338 340 341 342 343 349 352</span></a>
<a class="sourceLine" id="cb16-103" title="103"><span class="co">## [120] 356 360 362 376 378 381 382 389 391 396 399 401 403 404 406 408 409</span></a>
<a class="sourceLine" id="cb16-104" title="104"><span class="co">## [137] 410 411 416 419 420 424 427 429 432 434 436 438 447 452 454 455 463</span></a>
<a class="sourceLine" id="cb16-105" title="105"><span class="co">## [154] 464 465 469 470 474 477 478 479 480 484 486 491 496 499 503</span></a></code></pre></div>
</div>
</div>
<div id="stratification-blocking-and-grouping" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-blocking-and-grouping" class="anchor"></a>Stratification, Blocking and Grouping</h2>
<ul>
<li><p><em>Stratification</em> with respect to a categorical variable makes sure that all its values are present in each training and test set in approximately the same proportion as in the original data set. Stratification is possible with regard to categorical target variables (and thus for supervised classification and survival analysis) or categorical explanatory variables.</p></li>
<li><p><em>Blocking</em> refers to the situation that subsets of observations belong together and must not be separated during resampling. Hence, for one train/test set pair the entire block is either in the training set or in the test set.</p></li>
<li><p><em>Grouping</em> means that the folds are composed out of a factor vector given by the user. In this setting no repetitions are possible as all folds are predefined. The approach can also be used in a nested resampling setting. Note the subtle but important difference to â€œBlockingâ€: In â€œBlockingâ€ factor levels are respected when splitting into train and test (e.g.Â the test set could be composed out of two given factor levels) whereas in â€œGroupingâ€ the folds will strictly follow the factor level grouping (meaning that the test set will always only consist of one factor level).</p></li>
</ul>
<div id="stratification-with-respect-to-the-target-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#stratification-with-respect-to-the-target-variables" class="anchor"></a>Stratification with respect to the target variable(s)</h3>
<p>For classification, it is usually desirable to have the same proportion of the classes in all of the partitions of the original data set. This is particularly useful in the case of imbalanced classes and small data sets. Otherwise, it may happen that observations of less frequent classes are missing in some of the training sets which can decrease the performance of the learner, or lead to model crashes. In order to conduct stratified resampling, set <code>stratify = TRUE</code> in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb17-2" title="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-3" title="3"></a>
<a class="sourceLine" id="cb17-4" title="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-5" title="5">r</a>
<a class="sourceLine" id="cb17-6" title="6"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb17-7" title="7"><span class="co">## Task: iris-example</span></a>
<a class="sourceLine" id="cb17-8" title="8"><span class="co">## Learner: classif.lda</span></a>
<a class="sourceLine" id="cb17-9" title="9"><span class="co">## Aggr perf: mmce.test.mean=0.0200000</span></a>
<a class="sourceLine" id="cb17-10" title="10"><span class="co">## Runtime: 0.0176296</span></a></code></pre></div>
<p>Stratification is also available for survival tasks. Here the stratification balances the censoring rate.</p>
</div>
<div id="stratification-with-respect-to-explanatory-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#stratification-with-respect-to-explanatory-variables" class="anchor"></a>Stratification with respect to explanatory variables</h3>
<p>Sometimes it is required to also stratify on the input data, e.g., to ensure that all subgroups are represented in all training and test sets. To stratify on the input columns, specify <code>factor</code> columns of your task data via <code>stratify.cols</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>)</a>
<a class="sourceLine" id="cb18-2" title="2"></a>
<a class="sourceLine" id="cb18-3" title="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-4" title="4">r</a>
<a class="sourceLine" id="cb18-5" title="5"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb18-6" title="6"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb18-7" title="7"><span class="co">## Learner: regr.rpart</span></a>
<a class="sourceLine" id="cb18-8" title="8"><span class="co">## Aggr perf: mse.test.mean=23.8843587</span></a>
<a class="sourceLine" id="cb18-9" title="9"><span class="co">## Runtime: 0.0268815</span></a></code></pre></div>
</div>
<div id="blocking-cv-with-flexible-predefined-indices" class="section level3">
<h3 class="hasAnchor">
<a href="#blocking-cv-with-flexible-predefined-indices" class="anchor"></a>Blocking: CV with flexible predefined indices</h3>
<p>If some observations â€œbelong togetherâ€ and must not be separated when splitting the data into training and test sets for resampling, you can supply this information via a <code>blocking</code> factor when creating the <a href="task.html" target="_blank">task</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="co"># 5 blocks containing 30 observations each</span></a>
<a class="sourceLine" id="cb19-2" title="2">task =<span class="st"> </span><span class="kw"><a href="../../reference/Task.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>, <span class="dt">blocking =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each =</span> <span class="dv">30</span>)))</a>
<a class="sourceLine" id="cb19-3" title="3">task</a>
<a class="sourceLine" id="cb19-4" title="4"><span class="co">## Supervised task: iris</span></a>
<a class="sourceLine" id="cb19-5" title="5"><span class="co">## Type: classif</span></a>
<a class="sourceLine" id="cb19-6" title="6"><span class="co">## Target: Species</span></a>
<a class="sourceLine" id="cb19-7" title="7"><span class="co">## Observations: 150</span></a>
<a class="sourceLine" id="cb19-8" title="8"><span class="co">## Features:</span></a>
<a class="sourceLine" id="cb19-9" title="9"><span class="co">##    numerics     factors     ordered functionals </span></a>
<a class="sourceLine" id="cb19-10" title="10"><span class="co">##           4           0           0           0 </span></a>
<a class="sourceLine" id="cb19-11" title="11"><span class="co">## Missings: FALSE</span></a>
<a class="sourceLine" id="cb19-12" title="12"><span class="co">## Has weights: FALSE</span></a>
<a class="sourceLine" id="cb19-13" title="13"><span class="co">## Has blocking: TRUE</span></a>
<a class="sourceLine" id="cb19-14" title="14"><span class="co">## Has coordinates: FALSE</span></a>
<a class="sourceLine" id="cb19-15" title="15"><span class="co">## Classes: 3</span></a>
<a class="sourceLine" id="cb19-16" title="16"><span class="co">##     setosa versicolor  virginica </span></a>
<a class="sourceLine" id="cb19-17" title="17"><span class="co">##         50         50         50 </span></a>
<a class="sourceLine" id="cb19-18" title="18"><span class="co">## Positive class: NA</span></a></code></pre></div>
<p>When performing a simple â€œCVâ€ resampling and inspecting the result, we see that the training indices in fold 1 correspond to the specified grouping set in <code>blocking</code> in the task. To initiate this method, we need to set <code>blocking.cv = TRUE</code> when creating the resample description object.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">blocking.cv =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb20-2" title="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb20-3" title="3"><span class="co">## Resampling: cross-validation</span></a>
<a class="sourceLine" id="cb20-4" title="4"><span class="co">## Measures:             mmce</span></a>
<a class="sourceLine" id="cb20-5" title="5"><span class="co">## [Resample] iter 1:    0.0500000</span></a>
<a class="sourceLine" id="cb20-6" title="6"><span class="co">## [Resample] iter 2:    0.0500000</span></a>
<a class="sourceLine" id="cb20-7" title="7"><span class="co">## [Resample] iter 3:    0.0000000</span></a>
<a class="sourceLine" id="cb20-8" title="8"><span class="co">## </span></a>
<a class="sourceLine" id="cb20-9" title="9"><span class="co">## Aggregated Result: mmce.test.mean=0.0333333</span></a>
<a class="sourceLine" id="cb20-10" title="10"><span class="co">## </span></a>
<a class="sourceLine" id="cb20-11" title="11"></a>
<a class="sourceLine" id="cb20-12" title="12"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb20-13" title="13"><span class="co">##  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17</span></a>
<a class="sourceLine" id="cb20-14" title="14"><span class="co">## [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34</span></a>
<a class="sourceLine" id="cb20-15" title="15"><span class="co">## [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51</span></a>
<a class="sourceLine" id="cb20-16" title="16"><span class="co">## [52]  52  53  54  55  56  57  58  59  60 121 122 123 124 125 126 127 128</span></a>
<a class="sourceLine" id="cb20-17" title="17"><span class="co">## [69] 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145</span></a>
<a class="sourceLine" id="cb20-18" title="18"><span class="co">## [86] 146 147 148 149 150</span></a></code></pre></div>
<p>However, please note the effects of this method: The created folds will not have the same size! Here, Fold 1 has a 120/30 split while the other two folds have a 90/60 split.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb21-2" title="2"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb21-3" title="3"><span class="co">## [1] 90</span></a>
<a class="sourceLine" id="cb21-4" title="4"><span class="co">## </span></a>
<a class="sourceLine" id="cb21-5" title="5"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb21-6" title="6"><span class="co">## [1] 90</span></a>
<a class="sourceLine" id="cb21-7" title="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb21-8" title="8"><span class="co">## [[3]]</span></a>
<a class="sourceLine" id="cb21-9" title="9"><span class="co">## [1] 120</span></a></code></pre></div>
<p>This is caused by the fact that we supplied five groups that must belong together but only used a three fold resampling strategy here.</p>
</div>
<div id="grouping-cv-with-fixed-predefined-indices" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-cv-with-fixed-predefined-indices" class="anchor"></a>Grouping: CV with fixed predefined indices</h3>
<p>There is a second way of using predefined indices in resampling in <code>mlr</code>: Constructing the folds based on the supplied indices in <code>blocking</code>. We refer to this method here as â€œgroupingâ€ to distinguish it from â€œblockingâ€. This method is more restrictive in the way that it will always use the number of levels supplied via <code>blocking</code> as the number of folds. To use this method, we need to set <code>fixed = TRUE</code> instead of <code>blocking.cv</code> when creating the resampling description object.</p>
<p>We can leave out the <code>iters</code> argument, as it will be set internally to the number of supplied factor levels.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb22-2" title="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb22-3" title="3"><span class="co">## Warning in instantiateResampleInstance.CVDesc(desc, size, task): Adjusting</span></a>
<a class="sourceLine" id="cb22-4" title="4"><span class="co">## levels to match number of blocking levels.</span></a>
<a class="sourceLine" id="cb22-5" title="5"><span class="co">## Resampling: cross-validation</span></a>
<a class="sourceLine" id="cb22-6" title="6"><span class="co">## Measures:             mmce</span></a>
<a class="sourceLine" id="cb22-7" title="7"><span class="co">## [Resample] iter 1:    0.0000000</span></a>
<a class="sourceLine" id="cb22-8" title="8"><span class="co">## [Resample] iter 2:    0.0000000</span></a>
<a class="sourceLine" id="cb22-9" title="9"><span class="co">## [Resample] iter 3:    0.1000000</span></a>
<a class="sourceLine" id="cb22-10" title="10"><span class="co">## [Resample] iter 4:    0.0000000</span></a>
<a class="sourceLine" id="cb22-11" title="11"><span class="co">## [Resample] iter 5:    0.1000000</span></a>
<a class="sourceLine" id="cb22-12" title="12"><span class="co">## </span></a>
<a class="sourceLine" id="cb22-13" title="13"><span class="co">## Aggregated Result: mmce.test.mean=0.0400000</span></a>
<a class="sourceLine" id="cb22-14" title="14"><span class="co">## </span></a>
<a class="sourceLine" id="cb22-15" title="15"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb22-16" title="16"><span class="co">##   [1]  31  32  33  34  35  36  37  38  39  40  41  42  43  44  45  46  47</span></a>
<a class="sourceLine" id="cb22-17" title="17"><span class="co">##  [18]  48  49  50  51  52  53  54  55  56  57  58  59  60  61  62  63  64</span></a>
<a class="sourceLine" id="cb22-18" title="18"><span class="co">##  [35]  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81</span></a>
<a class="sourceLine" id="cb22-19" title="19"><span class="co">##  [52]  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98</span></a>
<a class="sourceLine" id="cb22-20" title="20"><span class="co">##  [69]  99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115</span></a>
<a class="sourceLine" id="cb22-21" title="21"><span class="co">##  [86] 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132</span></a>
<a class="sourceLine" id="cb22-22" title="22"><span class="co">## [103] 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149</span></a>
<a class="sourceLine" id="cb22-23" title="23"><span class="co">## [120] 150</span></a></code></pre></div>
<p>You can see that we automatically created five folds in which the test set always corresponds to one factor level.</p>
<p>Doing it this way also means that we cannot do repeated CV because there is no way to create multiple shuffled folds of this fixed arrangement.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb23-2" title="2"><span class="co">## [[1]]</span></a>
<a class="sourceLine" id="cb23-3" title="3"><span class="co">## [1] 120</span></a>
<a class="sourceLine" id="cb23-4" title="4"><span class="co">## </span></a>
<a class="sourceLine" id="cb23-5" title="5"><span class="co">## [[2]]</span></a>
<a class="sourceLine" id="cb23-6" title="6"><span class="co">## [1] 120</span></a>
<a class="sourceLine" id="cb23-7" title="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb23-8" title="8"><span class="co">## [[3]]</span></a>
<a class="sourceLine" id="cb23-9" title="9"><span class="co">## [1] 120</span></a>
<a class="sourceLine" id="cb23-10" title="10"><span class="co">## </span></a>
<a class="sourceLine" id="cb23-11" title="11"><span class="co">## [[4]]</span></a>
<a class="sourceLine" id="cb23-12" title="12"><span class="co">## [1] 120</span></a>
<a class="sourceLine" id="cb23-13" title="13"><span class="co">## </span></a>
<a class="sourceLine" id="cb23-14" title="14"><span class="co">## [[5]]</span></a>
<a class="sourceLine" id="cb23-15" title="15"><span class="co">## [1] 120</span></a></code></pre></div>
<p>However, this method can also be used in nested resampling settings (e.g.Â in hyperparameter tuning). In the inner level, the factor levels are honored and the function simply creates one fold less than in the outer level.</p>
<p>Please note that the <code>iters</code> argument has no effect in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> if <code>fixed = TRUE</code>. The number of folds will be automatically set based on the supplied number of factor levels via <code>blocking</code>. In the inner level, the number of folds will simply be one less than in the outer level.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="co"># test fixed in nested resampling</span></a>
<a class="sourceLine" id="cb24-2" title="2">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.lda"</span>)</a>
<a class="sourceLine" id="cb24-3" title="3">ctrl &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span>(<span class="dt">maxit =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb24-4" title="4">ps &lt;-<span class="st"> </span><span class="kw">makeParamSet</span>(<span class="kw">makeNumericParam</span>(<span class="st">"nu"</span>, <span class="dt">lower =</span> <span class="dv">2</span>, <span class="dt">upper =</span> <span class="dv">20</span>))</a>
<a class="sourceLine" id="cb24-5" title="5">inner =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-6" title="6">outer =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-7" title="7">tune_wrapper =<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneWrapper.html">makeTuneWrapper</a></span>(lrn, <span class="dt">resampling =</span> inner, <span class="dt">par.set =</span> ps,</a>
<a class="sourceLine" id="cb24-8" title="8">  <span class="dt">control =</span> ctrl, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb24-9" title="9"></a>
<a class="sourceLine" id="cb24-10" title="10">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(tune_wrapper, task, outer, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb24-11" title="11">  <span class="dt">extract =</span> getTuneResult)</a></code></pre></div>
<p>To check on the inner resampling indices, you can call <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices(inner = TRUE)</a></code>. You can see that for every outer fold (List of 5), four inner folds were created that respect the grouping supplied via the <code>blocking</code> argument.</p>
<p>Of course you can also use a normal random sampling â€œCVâ€ description in the inner level by just setting <code>fixed = FALSE</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">str</span>(<span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(p, <span class="dt">inner =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb25-2" title="2"><span class="co">## List of 5</span></a>
<a class="sourceLine" id="cb25-3" title="3"><span class="co">##  $ :List of 2</span></a>
<a class="sourceLine" id="cb25-4" title="4"><span class="co">##   ..$ train.inds:List of 4</span></a>
<a class="sourceLine" id="cb25-5" title="5"><span class="co">##   .. ..$ : int [1:90] 122 53 40 5 42 56 6 30 1 51 ...</span></a>
<a class="sourceLine" id="cb25-6" title="6"><span class="co">##   .. ..$ : int [1:90] 53 40 5 67 42 56 82 6 30 1 ...</span></a>
<a class="sourceLine" id="cb25-7" title="7"><span class="co">##   .. ..$ : int [1:90] 122 53 40 67 42 56 82 51 57 70 ...</span></a>
<a class="sourceLine" id="cb25-8" title="8"><span class="co">##   .. ..$ : int [1:90] 122 5 67 82 6 30 1 2 70 22 ...</span></a>
<a class="sourceLine" id="cb25-9" title="9"><span class="co">##   ..$ test.inds :List of 4</span></a>
<a class="sourceLine" id="cb25-10" title="10"><span class="co">##   .. ..$ : int [1:30] 77 71 82 87 74 65 89 68 84 90 ...</span></a>
<a class="sourceLine" id="cb25-11" title="11"><span class="co">##   .. ..$ : int [1:30] 130 139 133 146 129 127 137 123 122 128 ...</span></a>
<a class="sourceLine" id="cb25-12" title="12"><span class="co">##   .. ..$ : int [1:30] 17 30 3 11 19 12 13 1 26 25 ...</span></a>
<a class="sourceLine" id="cb25-13" title="13"><span class="co">##   .. ..$ : int [1:30] 55 45 46 36 44 42 33 53 34 40 ...</span></a>
<a class="sourceLine" id="cb25-14" title="14"><span class="co">##  $ :List of 2</span></a>
<a class="sourceLine" id="cb25-15" title="15"><span class="co">##   ..$ train.inds:List of 4</span></a>
<a class="sourceLine" id="cb25-16" title="16"><span class="co">##   .. ..$ : int [1:90] 108 138 95 46 56 139 104 60 41 31 ...</span></a>
<a class="sourceLine" id="cb25-17" title="17"><span class="co">##   .. ..$ : int [1:90] 138 46 56 139 60 41 31 54 132 33 ...</span></a>
<a class="sourceLine" id="cb25-18" title="18"><span class="co">##   .. ..$ : int [1:90] 108 95 46 56 104 60 41 31 94 54 ...</span></a>
<a class="sourceLine" id="cb25-19" title="19"><span class="co">##   .. ..$ : int [1:90] 108 138 95 139 104 94 132 146 20 149 ...</span></a>
<a class="sourceLine" id="cb25-20" title="20"><span class="co">##   ..$ test.inds :List of 4</span></a>
<a class="sourceLine" id="cb25-21" title="21"><span class="co">##   .. ..$ : int [1:30] 17 30 3 11 19 12 13 1 26 25 ...</span></a>
<a class="sourceLine" id="cb25-22" title="22"><span class="co">##   .. ..$ : int [1:30] 114 106 101 119 104 117 116 96 118 107 ...</span></a>
<a class="sourceLine" id="cb25-23" title="23"><span class="co">##   .. ..$ : int [1:30] 130 139 133 146 129 127 137 123 122 128 ...</span></a>
<a class="sourceLine" id="cb25-24" title="24"><span class="co">##   .. ..$ : int [1:30] 55 45 46 36 44 42 33 53 34 40 ...</span></a>
<a class="sourceLine" id="cb25-25" title="25"><span class="co">##  $ :List of 2</span></a>
<a class="sourceLine" id="cb25-26" title="26"><span class="co">##   ..$ train.inds:List of 4</span></a>
<a class="sourceLine" id="cb25-27" title="27"><span class="co">##   .. ..$ : int [1:90] 88 81 103 62 109 86 27 107 10 75 ...</span></a>
<a class="sourceLine" id="cb25-28" title="28"><span class="co">##   .. ..$ : int [1:90] 88 81 103 46 62 109 53 57 86 32 ...</span></a>
<a class="sourceLine" id="cb25-29" title="29"><span class="co">##   .. ..$ : int [1:90] 103 46 109 53 57 27 32 107 10 18 ...</span></a>
<a class="sourceLine" id="cb25-30" title="30"><span class="co">##   .. ..$ : int [1:90] 88 81 46 62 53 57 86 27 32 10 ...</span></a>
<a class="sourceLine" id="cb25-31" title="31"><span class="co">##   ..$ test.inds :List of 4</span></a>
<a class="sourceLine" id="cb25-32" title="32"><span class="co">##   .. ..$ : int [1:30] 55 45 46 36 44 42 33 53 34 40 ...</span></a>
<a class="sourceLine" id="cb25-33" title="33"><span class="co">##   .. ..$ : int [1:30] 17 30 3 11 19 12 13 1 26 25 ...</span></a>
<a class="sourceLine" id="cb25-34" title="34"><span class="co">##   .. ..$ : int [1:30] 77 71 82 87 74 65 89 68 84 90 ...</span></a>
<a class="sourceLine" id="cb25-35" title="35"><span class="co">##   .. ..$ : int [1:30] 114 106 101 119 104 117 116 96 118 107 ...</span></a>
<a class="sourceLine" id="cb25-36" title="36"><span class="co">##  $ :List of 2</span></a>
<a class="sourceLine" id="cb25-37" title="37"><span class="co">##   ..$ train.inds:List of 4</span></a>
<a class="sourceLine" id="cb25-38" title="38"><span class="co">##   .. ..$ : int [1:90] 82 103 66 96 78 129 145 86 73 85 ...</span></a>
<a class="sourceLine" id="cb25-39" title="39"><span class="co">##   .. ..$ : int [1:90] 60 82 103 66 96 78 86 73 85 61 ...</span></a>
<a class="sourceLine" id="cb25-40" title="40"><span class="co">##   .. ..$ : int [1:90] 60 103 96 129 145 140 113 150 99 58 ...</span></a>
<a class="sourceLine" id="cb25-41" title="41"><span class="co">##   .. ..$ : int [1:90] 60 82 66 78 129 145 86 73 85 61 ...</span></a>
<a class="sourceLine" id="cb25-42" title="42"><span class="co">##   ..$ test.inds :List of 4</span></a>
<a class="sourceLine" id="cb25-43" title="43"><span class="co">##   .. ..$ : int [1:30] 55 45 46 36 44 42 33 53 34 40 ...</span></a>
<a class="sourceLine" id="cb25-44" title="44"><span class="co">##   .. ..$ : int [1:30] 130 139 133 146 129 127 137 123 122 128 ...</span></a>
<a class="sourceLine" id="cb25-45" title="45"><span class="co">##   .. ..$ : int [1:30] 77 71 82 87 74 65 89 68 84 90 ...</span></a>
<a class="sourceLine" id="cb25-46" title="46"><span class="co">##   .. ..$ : int [1:30] 114 106 101 119 104 117 116 96 118 107 ...</span></a>
<a class="sourceLine" id="cb25-47" title="47"><span class="co">##  $ :List of 2</span></a>
<a class="sourceLine" id="cb25-48" title="48"><span class="co">##   ..$ train.inds:List of 4</span></a>
<a class="sourceLine" id="cb25-49" title="49"><span class="co">##   .. ..$ : int [1:90] 7 110 97 132 11 144 141 140 5 117 ...</span></a>
<a class="sourceLine" id="cb25-50" title="50"><span class="co">##   .. ..$ : int [1:90] 7 67 132 11 70 86 144 72 141 140 ...</span></a>
<a class="sourceLine" id="cb25-51" title="51"><span class="co">##   .. ..$ : int [1:90] 110 97 67 132 70 86 144 72 141 140 ...</span></a>
<a class="sourceLine" id="cb25-52" title="52"><span class="co">##   .. ..$ : int [1:90] 7 110 97 67 11 70 86 72 5 117 ...</span></a>
<a class="sourceLine" id="cb25-53" title="53"><span class="co">##   ..$ test.inds :List of 4</span></a>
<a class="sourceLine" id="cb25-54" title="54"><span class="co">##   .. ..$ : int [1:30] 77 71 82 87 74 65 89 68 84 90 ...</span></a>
<a class="sourceLine" id="cb25-55" title="55"><span class="co">##   .. ..$ : int [1:30] 114 106 101 119 104 117 116 96 118 107 ...</span></a>
<a class="sourceLine" id="cb25-56" title="56"><span class="co">##   .. ..$ : int [1:30] 17 30 3 11 19 12 13 1 26 25 ...</span></a>
<a class="sourceLine" id="cb25-57" title="57"><span class="co">##   .. ..$ : int [1:30] 130 139 133 146 129 127 137 123 122 128 ...</span></a></code></pre></div>
</div>
</div>
<div id="resample-descriptions-and-resample-instances" class="section level2">
<h2 class="hasAnchor">
<a href="#resample-descriptions-and-resample-instances" class="anchor"></a>Resample descriptions and resample instances</h2>
<p>As already mentioned, you can specify a resampling strategy using function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb26-2" title="2">rdesc</a>
<a class="sourceLine" id="cb26-3" title="3"><span class="co">## Resample description: cross-validation with 3 iterations.</span></a>
<a class="sourceLine" id="cb26-4" title="4"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb26-5" title="5"><span class="co">## Stratification: FALSE</span></a>
<a class="sourceLine" id="cb26-6" title="6"></a>
<a class="sourceLine" id="cb26-7" title="7"><span class="kw">str</span>(rdesc)</a>
<a class="sourceLine" id="cb26-8" title="8"><span class="co">## List of 6</span></a>
<a class="sourceLine" id="cb26-9" title="9"><span class="co">##  $ fixed      : logi FALSE</span></a>
<a class="sourceLine" id="cb26-10" title="10"><span class="co">##  $ blocking.cv: logi FALSE</span></a>
<a class="sourceLine" id="cb26-11" title="11"><span class="co">##  $ id         : chr "cross-validation"</span></a>
<a class="sourceLine" id="cb26-12" title="12"><span class="co">##  $ iters      : int 3</span></a>
<a class="sourceLine" id="cb26-13" title="13"><span class="co">##  $ predict    : chr "test"</span></a>
<a class="sourceLine" id="cb26-14" title="14"><span class="co">##  $ stratify   : logi FALSE</span></a>
<a class="sourceLine" id="cb26-15" title="15"><span class="co">##  - attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</span></a>
<a class="sourceLine" id="cb26-16" title="16"></a>
<a class="sourceLine" id="cb26-17" title="17"><span class="kw">str</span>(<span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>))</a>
<a class="sourceLine" id="cb26-18" title="18"><span class="co">## List of 8</span></a>
<a class="sourceLine" id="cb26-19" title="19"><span class="co">##  $ split        : num 0.667</span></a>
<a class="sourceLine" id="cb26-20" title="20"><span class="co">##  $ id           : chr "subsampling"</span></a>
<a class="sourceLine" id="cb26-21" title="21"><span class="co">##  $ iters        : int 30</span></a>
<a class="sourceLine" id="cb26-22" title="22"><span class="co">##  $ predict      : chr "test"</span></a>
<a class="sourceLine" id="cb26-23" title="23"><span class="co">##  $ stratify     : logi FALSE</span></a>
<a class="sourceLine" id="cb26-24" title="24"><span class="co">##  $ stratify.cols: chr "chas"</span></a>
<a class="sourceLine" id="cb26-25" title="25"><span class="co">##  $ fixed        : logi FALSE</span></a>
<a class="sourceLine" id="cb26-26" title="26"><span class="co">##  $ blocking.cv  : logi FALSE</span></a>
<a class="sourceLine" id="cb26-27" title="27"><span class="co">##  - attr(*, "class")= chr [1:2] "SubsampleDesc" "ResampleDesc"</span></a></code></pre></div>
<p>The result <code>rdesc</code> inherits from class <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) (short for resample description) and, in principle, contains all necessary information about the resampling strategy including the number of iterations, the proportion of training and test sets, stratification variables, etc.</p>
<p>Given either the size of the data set at hand or the <code><a href="../../reference/Task.html">Task()</a></code>, function <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> draws the training and test sets according to the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="co"># Create a resample instance based an a task</span></a>
<a class="sourceLine" id="cb27-2" title="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, iris.task)</a>
<a class="sourceLine" id="cb27-3" title="3">rin</a>
<a class="sourceLine" id="cb27-4" title="4"><span class="co">## Resample instance for 150 cases.</span></a>
<a class="sourceLine" id="cb27-5" title="5"><span class="co">## Resample description: cross-validation with 3 iterations.</span></a>
<a class="sourceLine" id="cb27-6" title="6"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb27-7" title="7"><span class="co">## Stratification: FALSE</span></a>
<a class="sourceLine" id="cb27-8" title="8"></a>
<a class="sourceLine" id="cb27-9" title="9"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb27-10" title="10"><span class="co">## List of 5</span></a>
<a class="sourceLine" id="cb27-11" title="11"><span class="co">##  $ desc      :List of 6</span></a>
<a class="sourceLine" id="cb27-12" title="12"><span class="co">##   ..$ fixed      : logi FALSE</span></a>
<a class="sourceLine" id="cb27-13" title="13"><span class="co">##   ..$ blocking.cv: logi FALSE</span></a>
<a class="sourceLine" id="cb27-14" title="14"><span class="co">##   ..$ id         : chr "cross-validation"</span></a>
<a class="sourceLine" id="cb27-15" title="15"><span class="co">##   ..$ iters      : int 3</span></a>
<a class="sourceLine" id="cb27-16" title="16"><span class="co">##   ..$ predict    : chr "test"</span></a>
<a class="sourceLine" id="cb27-17" title="17"><span class="co">##   ..$ stratify   : logi FALSE</span></a>
<a class="sourceLine" id="cb27-18" title="18"><span class="co">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</span></a>
<a class="sourceLine" id="cb27-19" title="19"><span class="co">##  $ size      : int 150</span></a>
<a class="sourceLine" id="cb27-20" title="20"><span class="co">##  $ train.inds:List of 3</span></a>
<a class="sourceLine" id="cb27-21" title="21"><span class="co">##   ..$ : int [1:100] 140 75 15 45 63 106 78 40 61 117 ...</span></a>
<a class="sourceLine" id="cb27-22" title="22"><span class="co">##   ..$ : int [1:100] 44 63 22 83 69 40 58 56 1 72 ...</span></a>
<a class="sourceLine" id="cb27-23" title="23"><span class="co">##   ..$ : int [1:100] 140 44 75 15 45 22 83 106 78 69 ...</span></a>
<a class="sourceLine" id="cb27-24" title="24"><span class="co">##  $ test.inds :List of 3</span></a>
<a class="sourceLine" id="cb27-25" title="25"><span class="co">##   ..$ : int [1:50] 1 7 18 19 22 25 27 29 32 33 ...</span></a>
<a class="sourceLine" id="cb27-26" title="26"><span class="co">##   ..$ : int [1:50] 2 3 5 6 11 12 13 14 15 21 ...</span></a>
<a class="sourceLine" id="cb27-27" title="27"><span class="co">##   ..$ : int [1:50] 4 8 9 10 16 17 20 26 28 40 ...</span></a>
<a class="sourceLine" id="cb27-28" title="28"><span class="co">##  $ group     : Factor w/ 0 levels: </span></a>
<a class="sourceLine" id="cb27-29" title="29"><span class="co">##  - attr(*, "class")= chr "ResampleInstance"</span></a>
<a class="sourceLine" id="cb27-30" title="30"></a>
<a class="sourceLine" id="cb27-31" title="31"><span class="co"># Create a resample instance given the size of the data set</span></a>
<a class="sourceLine" id="cb27-32" title="32">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">size =</span> <span class="kw">nrow</span>(iris))</a>
<a class="sourceLine" id="cb27-33" title="33"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb27-34" title="34"><span class="co">## List of 5</span></a>
<a class="sourceLine" id="cb27-35" title="35"><span class="co">##  $ desc      :List of 6</span></a>
<a class="sourceLine" id="cb27-36" title="36"><span class="co">##   ..$ fixed      : logi FALSE</span></a>
<a class="sourceLine" id="cb27-37" title="37"><span class="co">##   ..$ blocking.cv: logi FALSE</span></a>
<a class="sourceLine" id="cb27-38" title="38"><span class="co">##   ..$ id         : chr "cross-validation"</span></a>
<a class="sourceLine" id="cb27-39" title="39"><span class="co">##   ..$ iters      : int 3</span></a>
<a class="sourceLine" id="cb27-40" title="40"><span class="co">##   ..$ predict    : chr "test"</span></a>
<a class="sourceLine" id="cb27-41" title="41"><span class="co">##   ..$ stratify   : logi FALSE</span></a>
<a class="sourceLine" id="cb27-42" title="42"><span class="co">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</span></a>
<a class="sourceLine" id="cb27-43" title="43"><span class="co">##  $ size      : int 150</span></a>
<a class="sourceLine" id="cb27-44" title="44"><span class="co">##  $ train.inds:List of 3</span></a>
<a class="sourceLine" id="cb27-45" title="45"><span class="co">##   ..$ : int [1:100] 100 103 15 149 24 6 119 27 114 17 ...</span></a>
<a class="sourceLine" id="cb27-46" title="46"><span class="co">##   ..$ : int [1:100] 21 100 103 42 84 24 6 119 40 114 ...</span></a>
<a class="sourceLine" id="cb27-47" title="47"><span class="co">##   ..$ : int [1:100] 21 15 42 84 149 40 27 9 122 91 ...</span></a>
<a class="sourceLine" id="cb27-48" title="48"><span class="co">##  $ test.inds :List of 3</span></a>
<a class="sourceLine" id="cb27-49" title="49"><span class="co">##   ..$ : int [1:50] 5 8 9 11 14 16 18 21 26 30 ...</span></a>
<a class="sourceLine" id="cb27-50" title="50"><span class="co">##   ..$ : int [1:50] 2 3 4 7 12 15 23 25 27 28 ...</span></a>
<a class="sourceLine" id="cb27-51" title="51"><span class="co">##   ..$ : int [1:50] 1 6 10 13 17 19 20 22 24 31 ...</span></a>
<a class="sourceLine" id="cb27-52" title="52"><span class="co">##  $ group     : Factor w/ 0 levels: </span></a>
<a class="sourceLine" id="cb27-53" title="53"><span class="co">##  - attr(*, "class")= chr "ResampleInstance"</span></a>
<a class="sourceLine" id="cb27-54" title="54"></a>
<a class="sourceLine" id="cb27-55" title="55"><span class="co"># Access the indices of the training observations in iteration 3</span></a>
<a class="sourceLine" id="cb27-56" title="56">rin<span class="op">$</span>train.inds[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb27-57" title="57"><span class="co">##   [1]  21  15  42  84 149  40  27   9 122  91  95  16 140 138  38  70   3</span></a>
<a class="sourceLine" id="cb27-58" title="58"><span class="co">##  [18]   4 150 109  34  25 130  46  52  71  63 121  18  87 104 145 146  85</span></a>
<a class="sourceLine" id="cb27-59" title="59"><span class="co">##  [35] 106  61 110  36  75 124 136 120  73  55  57  62 118  33 142  96  76</span></a>
<a class="sourceLine" id="cb27-60" title="60"><span class="co">##  [52] 131  39   5  94  67   8  30  92  65  28  77 133  97  23 125  43  79</span></a>
<a class="sourceLine" id="cb27-61" title="61"><span class="co">##  [69] 105  12 144  53  11 139  29 101  88  51 128  14  90  49 113  35  60</span></a>
<a class="sourceLine" id="cb27-62" title="62"><span class="co">##  [86]  86   7 134  72 107  69  83  98  41 137 102  68   2  26 132</span></a></code></pre></div>
<p>The result <code>rin</code> inherits from class <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) and contains <code>list</code>s of index vectors for the train and test sets.</p>
<p>If a <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) is passed to <code><a href="../../reference/resample.html">resample()</a></code>, it is instantiated internally. Naturally, it is also possible to pass a <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) directly.</p>
<p>While the separation between resample descriptions, resample instances, and the <code><a href="../../reference/resample.html">resample()</a></code> function itself seems overly complicated, it has several advantages:</p>
<ul>
<li>Resample instances readily allow for paired experiments, that is comparing the performance of several learners on exactly the same training and test sets. This is particularly useful if you want to add another method to a comparison experiment you already did. Moreover, you can store the resample instance along with your data in order to be able to reproduce your results later on.</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb28-2" title="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">task =</span> iris.task)</a>
<a class="sourceLine" id="cb28-3" title="3"></a>
<a class="sourceLine" id="cb28-4" title="4"><span class="co"># Calculate the performance of two learners based on the same resample instance</span></a>
<a class="sourceLine" id="cb28-5" title="5">r.lda =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-6" title="6">r.rpart =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-7" title="7">r.lda<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb28-8" title="8"><span class="co">## mmce.test.mean </span></a>
<a class="sourceLine" id="cb28-9" title="9"><span class="co">##           0.02</span></a>
<a class="sourceLine" id="cb28-10" title="10"></a>
<a class="sourceLine" id="cb28-11" title="11">r.rpart<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb28-12" title="12"><span class="co">## mmce.test.mean </span></a>
<a class="sourceLine" id="cb28-13" title="13"><span class="co">##           0.06</span></a></code></pre></div>
<ul>
<li>In order to add further resampling methods you can simply derive from the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) and <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) classes, but you do neither have to touch <code><a href="../../reference/resample.html">resample()</a></code> nor any further methods that use the resampling strategy.</li>
</ul>
<p>Usually, when calling <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> the train and test index sets are drawn randomly. Mainly for <em>holdout</em> (<em>test sample</em>) <em>estimation</em> you might want full control about the training and tests set and specify them manually. This can be done using function <code><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance()</a></code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance</a></span>(<span class="dt">train.inds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">test.inds =</span> <span class="dv">101</span><span class="op">:</span><span class="dv">150</span>, <span class="dt">size =</span> <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb29-2" title="2">rin</a>
<a class="sourceLine" id="cb29-3" title="3"><span class="co">## Resample instance for 150 cases.</span></a>
<a class="sourceLine" id="cb29-4" title="4"><span class="co">## Resample description: holdout with 0.67 split rate.</span></a>
<a class="sourceLine" id="cb29-5" title="5"><span class="co">## Predict: test</span></a>
<a class="sourceLine" id="cb29-6" title="6"><span class="co">## Stratification: FALSE</span></a></code></pre></div>
</div>
<div id="aggregating-performance-values" class="section level2">
<h2 class="hasAnchor">
<a href="#aggregating-performance-values" class="anchor"></a>Aggregating performance values</h2>
<p>In each resampling iteration <span class="math inline">\(b = 1,\ldots,B\)</span> we get performance values <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> (for each measure we wish to calculate), which are then aggregated to an overall performance.</p>
<p>For the great majority of common resampling strategies (like holdout, cross-validation, subsampling) performance values are calculated on the test data sets only and for most measures aggregated by taking the mean (<code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>)).</p>
<p>Each performance <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) in <code>mlr</code> has a corresponding default aggregation method which is stored in slot <code>$aggr</code>. The default aggregation for most measures is <code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>). One exception is the root mean square error (<a href="measures.html" target="_blank">rmse</a>).</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="co"># Mean misclassification error</span></a>
<a class="sourceLine" id="cb30-2" title="2">mmce<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb30-3" title="3"><span class="co">## Aggregation function: test.mean</span></a>
<a class="sourceLine" id="cb30-4" title="4"></a>
<a class="sourceLine" id="cb30-5" title="5">mmce<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb30-6" title="6"><span class="co">## function(task, perf.test, perf.train, measure, group, pred) mean(perf.test)</span></a>
<a class="sourceLine" id="cb30-7" title="7"><span class="co">## &lt;bytecode: 0x55af89601a58&gt;</span></a>
<a class="sourceLine" id="cb30-8" title="8"><span class="co">## &lt;environment: namespace:mlr&gt;</span></a>
<a class="sourceLine" id="cb30-9" title="9"></a>
<a class="sourceLine" id="cb30-10" title="10"><span class="co"># Root mean square error</span></a>
<a class="sourceLine" id="cb30-11" title="11">rmse<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb30-12" title="12"><span class="co">## Aggregation function: test.rmse</span></a>
<a class="sourceLine" id="cb30-13" title="13"></a>
<a class="sourceLine" id="cb30-14" title="14">rmse<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb30-15" title="15"><span class="co">## function(task, perf.test, perf.train, measure, group, pred) sqrt(mean(perf.test^2))</span></a>
<a class="sourceLine" id="cb30-16" title="16"><span class="co">## &lt;bytecode: 0x55af8f368098&gt;</span></a>
<a class="sourceLine" id="cb30-17" title="17"><span class="co">## &lt;environment: namespace:mlr&gt;</span></a></code></pre></div>
<p>You can change the aggregation method of a <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) via function <code><a href="../../reference/setAggregation.html">setAggregation()</a></code>. All available aggregation schemes are listed on the <code><a href="../../reference/aggregations.html">aggregations()</a></code> documentation page.</p>
<div id="example-one-measure-with-different-aggregations" class="section level4">
<h4 class="hasAnchor">
<a href="#example-one-measure-with-different-aggregations" class="anchor"></a>Example: One measure with different aggregations</h4>
<p>The aggregation schemes <code>test.median</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), <code>test.min</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), and <code>text.max</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) compute the median, minimum, and maximum of the performance values on the test sets.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1">mseTestMedian =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.median)</a>
<a class="sourceLine" id="cb31-2" title="2">mseTestMin =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.min)</a>
<a class="sourceLine" id="cb31-3" title="3">mseTestMax =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.max)</a>
<a class="sourceLine" id="cb31-4" title="4"></a>
<a class="sourceLine" id="cb31-5" title="5">mseTestMedian</a>
<a class="sourceLine" id="cb31-6" title="6"><span class="co">## Name: Mean of squared errors</span></a>
<a class="sourceLine" id="cb31-7" title="7"><span class="co">## Performance measure: mse</span></a>
<a class="sourceLine" id="cb31-8" title="8"><span class="co">## Properties: regr,req.pred,req.truth</span></a>
<a class="sourceLine" id="cb31-9" title="9"><span class="co">## Minimize: TRUE</span></a>
<a class="sourceLine" id="cb31-10" title="10"><span class="co">## Best: 0; Worst: Inf</span></a>
<a class="sourceLine" id="cb31-11" title="11"><span class="co">## Aggregated by: test.median</span></a>
<a class="sourceLine" id="cb31-12" title="12"><span class="co">## Arguments: </span></a>
<a class="sourceLine" id="cb31-13" title="13"><span class="co">## Note: Defined as: mean((response - truth)^2)</span></a>
<a class="sourceLine" id="cb31-14" title="14"></a>
<a class="sourceLine" id="cb31-15" title="15">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb31-16" title="16">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mseTestMedian, mseTestMin, mseTestMax))</a>
<a class="sourceLine" id="cb31-17" title="17"><span class="co">## Resampling: cross-validation</span></a>
<a class="sourceLine" id="cb31-18" title="18"><span class="co">## Measures:             mse       mse       mse       mse</span></a>
<a class="sourceLine" id="cb31-19" title="19"><span class="co">## [Resample] iter 1:    24.078202624.078202624.078202624.0782026</span></a>
<a class="sourceLine" id="cb31-20" title="20"><span class="co">## [Resample] iter 2:    29.498307729.498307729.498307729.4983077</span></a>
<a class="sourceLine" id="cb31-21" title="21"><span class="co">## [Resample] iter 3:    18.689471818.689471818.689471818.6894718</span></a>
<a class="sourceLine" id="cb31-22" title="22"><span class="co">## </span></a>
<a class="sourceLine" id="cb31-23" title="23"><span class="co">## Aggregated Result: mse.test.mean=24.0886607,mse.test.median=24.0782026,mse.test.min=18.6894718,mse.test.max=29.4983077</span></a>
<a class="sourceLine" id="cb31-24" title="24"><span class="co">## </span></a>
<a class="sourceLine" id="cb31-25" title="25"></a>
<a class="sourceLine" id="cb31-26" title="26">r</a>
<a class="sourceLine" id="cb31-27" title="27"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb31-28" title="28"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb31-29" title="29"><span class="co">## Learner: regr.lm</span></a>
<a class="sourceLine" id="cb31-30" title="30"><span class="co">## Aggr perf: mse.test.mean=24.0886607,mse.test.median=24.0782026,mse.test.min=18.6894718,mse.test.max=29.4983077</span></a>
<a class="sourceLine" id="cb31-31" title="31"><span class="co">## Runtime: 0.0288048</span></a>
<a class="sourceLine" id="cb31-32" title="32"></a>
<a class="sourceLine" id="cb31-33" title="33">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb31-34" title="34"><span class="co">##   mse.test.mean mse.test.median    mse.test.min    mse.test.max </span></a>
<a class="sourceLine" id="cb31-35" title="35"><span class="co">##        24.08866        24.07820        18.68947        29.49831</span></a></code></pre></div>
</div>
<div id="example-calculating-the-training-error" class="section level3">
<h3 class="hasAnchor">
<a href="#example-calculating-the-training-error" class="anchor"></a>Example: Calculating the training error</h3>
<p>Below we calculate the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>) on the training and the test data sets. Note that we have to set <code>predict = "both"</code> when calling <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> in order to get predictions on both training and test sets.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">mmceTrainMean =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, train.mean)</a>
<a class="sourceLine" id="cb32-2" title="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb32-3" title="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceTrainMean))</a>
<a class="sourceLine" id="cb32-4" title="4"><span class="co">## Resampling: cross-validation</span></a>
<a class="sourceLine" id="cb32-5" title="5"><span class="co">## Measures:             mmce.train   mmce.test</span></a>
<a class="sourceLine" id="cb32-6" title="6"><span class="co">## [Resample] iter 1:    0.0500000    0.0400000</span></a>
<a class="sourceLine" id="cb32-7" title="7"><span class="co">## [Resample] iter 2:    0.0300000    0.0600000</span></a>
<a class="sourceLine" id="cb32-8" title="8"><span class="co">## [Resample] iter 3:    0.0300000    0.0600000</span></a>
<a class="sourceLine" id="cb32-9" title="9"><span class="co">## </span></a>
<a class="sourceLine" id="cb32-10" title="10"><span class="co">## Aggregated Result: mmce.test.mean=0.0533333,mmce.train.mean=0.0366667</span></a>
<a class="sourceLine" id="cb32-11" title="11"><span class="co">## </span></a>
<a class="sourceLine" id="cb32-12" title="12"></a>
<a class="sourceLine" id="cb32-13" title="13">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb32-14" title="14"><span class="co">##   iter mmce mmce</span></a>
<a class="sourceLine" id="cb32-15" title="15"><span class="co">## 1    1 0.05 0.05</span></a>
<a class="sourceLine" id="cb32-16" title="16"><span class="co">## 2    2 0.03 0.03</span></a>
<a class="sourceLine" id="cb32-17" title="17"><span class="co">## 3    3 0.03 0.03</span></a>
<a class="sourceLine" id="cb32-18" title="18"></a>
<a class="sourceLine" id="cb32-19" title="19">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb32-20" title="20"><span class="co">##  mmce.test.mean mmce.train.mean </span></a>
<a class="sourceLine" id="cb32-21" title="21"><span class="co">##      0.05333333      0.03666667</span></a></code></pre></div>
</div>
<div id="example-bootstrap" class="section level3">
<h3 class="hasAnchor">
<a href="#example-bootstrap" class="anchor"></a>Example: Bootstrap</h3>
<p>In <em>out-of-bag bootstrap estimation</em> <span class="math inline">\(B\)</span> new data sets <span class="math inline">\(D^{*1}, \ldots, D^{*B}\)</span> are drawn from the data set <span class="math inline">\(D\)</span> with replacement, each of the same size as <span class="math inline">\(D\)</span>. In the <span class="math inline">\(b\)</span>-th iteration, <span class="math inline">\(D^{*b}\)</span> forms the training set, while the remaining elements from <span class="math inline">\(D\)</span>, i.e., <span class="math inline">\(D \setminus D^{*b}\)</span>, form the test set.</p>
<!--(
                     |resampling_desc_figure|

                     |resampling_nested_resampling_figure|
)-->
<p>The <em>b632</em> and <em>b632+</em> variants calculate a convex combination of the training performance and the out-of-bag bootstrap performance and thus require predictions on the training sets and an appropriate aggregation strategy.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1"><span class="co"># Use bootstrap as resampling strategy and predict on both train and test sets</span></a>
<a class="sourceLine" id="cb33-2" title="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Bootstrap"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb33-3" title="3"></a>
<a class="sourceLine" id="cb33-4" title="4"><span class="co"># Set aggregation schemes for b632 and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb33-5" title="5">mmceB632 =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632)</a>
<a class="sourceLine" id="cb33-6" title="6">mmceB632plus =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632plus)</a>
<a class="sourceLine" id="cb33-7" title="7"></a>
<a class="sourceLine" id="cb33-8" title="8">mmceB632</a>
<a class="sourceLine" id="cb33-9" title="9"><span class="co">## Name: Mean misclassification error</span></a>
<a class="sourceLine" id="cb33-10" title="10"><span class="co">## Performance measure: mmce</span></a>
<a class="sourceLine" id="cb33-11" title="11"><span class="co">## Properties: classif,classif.multi,req.pred,req.truth</span></a>
<a class="sourceLine" id="cb33-12" title="12"><span class="co">## Minimize: TRUE</span></a>
<a class="sourceLine" id="cb33-13" title="13"><span class="co">## Best: 0; Worst: 1</span></a>
<a class="sourceLine" id="cb33-14" title="14"><span class="co">## Aggregated by: b632</span></a>
<a class="sourceLine" id="cb33-15" title="15"><span class="co">## Arguments: </span></a>
<a class="sourceLine" id="cb33-16" title="16"><span class="co">## Note: Defined as: mean(response != truth)</span></a>
<a class="sourceLine" id="cb33-17" title="17"></a>
<a class="sourceLine" id="cb33-18" title="18">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceB632, mmceB632plus),</a>
<a class="sourceLine" id="cb33-19" title="19">  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb33-20" title="20"><span class="kw">head</span>(r<span class="op">$</span>measures.train)</a>
<a class="sourceLine" id="cb33-21" title="21"><span class="co">##   iter       mmce       mmce       mmce</span></a>
<a class="sourceLine" id="cb33-22" title="22"><span class="co">## 1    1 0.03333333 0.03333333 0.03333333</span></a>
<a class="sourceLine" id="cb33-23" title="23"><span class="co">## 2    2 0.04666667 0.04666667 0.04666667</span></a>
<a class="sourceLine" id="cb33-24" title="24"><span class="co">## 3    3 0.02666667 0.02666667 0.02666667</span></a>
<a class="sourceLine" id="cb33-25" title="25"><span class="co">## 4    4 0.03333333 0.03333333 0.03333333</span></a>
<a class="sourceLine" id="cb33-26" title="26"><span class="co">## 5    5 0.02000000 0.02000000 0.02000000</span></a>
<a class="sourceLine" id="cb33-27" title="27"><span class="co">## 6    6 0.02666667 0.02666667 0.02666667</span></a>
<a class="sourceLine" id="cb33-28" title="28"></a>
<a class="sourceLine" id="cb33-29" title="29"><span class="co"># Compare misclassification rates for out-of-bag, b632, and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb33-30" title="30">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb33-31" title="31"><span class="co">## mmce.test.mean      mmce.b632  mmce.b632plus </span></a>
<a class="sourceLine" id="cb33-32" title="32"><span class="co">##     0.06093805     0.04881685     0.04993350</span></a></code></pre></div>
</div>
</div>
<div id="convenience-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#convenience-functions" class="anchor"></a>Convenience functions</h2>
<p>The functionality described on this page allows for much control and flexibility. However, when quickly trying out some learners, it can get tedious to type all the code for defining the resampling strategy, setting the aggregation scheme and so on. As mentioned above, <code>mlr</code> includes some pre-defined resample description objects for frequently used strategies like, e.g., 5-fold cross-validation (<code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)). Moreover, <code>mlr</code> provides special functions for the most common resampling methods, for example <code>holdout</code> (<code><a href="../../reference/resample.html">resample()</a></code>), <code>crossval</code> (<code><a href="../../reference/resample.html">resample()</a></code>), or <code>bootstrapB632</code> (<code><a href="../../reference/resample.html">resample()</a></code>).</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw"><a href="../../reference/resample.html">crossval</a></span>(<span class="st">"classif.lda"</span>, iris.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, ber))</a>
<a class="sourceLine" id="cb34-2" title="2"><span class="co">## Resampling: cross-validation</span></a>
<a class="sourceLine" id="cb34-3" title="3"><span class="co">## Measures:             mmce      ber</span></a>
<a class="sourceLine" id="cb34-4" title="4"><span class="co">## [Resample] iter 1:    0.0200000 0.0238095</span></a>
<a class="sourceLine" id="cb34-5" title="5"><span class="co">## [Resample] iter 2:    0.0400000 0.0370370</span></a>
<a class="sourceLine" id="cb34-6" title="6"><span class="co">## [Resample] iter 3:    0.0000000 0.0000000</span></a>
<a class="sourceLine" id="cb34-7" title="7"><span class="co">## </span></a>
<a class="sourceLine" id="cb34-8" title="8"><span class="co">## Aggregated Result: mmce.test.mean=0.0200000,ber.test.mean=0.0202822</span></a>
<a class="sourceLine" id="cb34-9" title="9"><span class="co">## </span></a>
<a class="sourceLine" id="cb34-10" title="10"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb34-11" title="11"><span class="co">## Task: iris-example</span></a>
<a class="sourceLine" id="cb34-12" title="12"><span class="co">## Learner: classif.lda</span></a>
<a class="sourceLine" id="cb34-13" title="13"><span class="co">## Aggr perf: mmce.test.mean=0.0200000,ber.test.mean=0.0202822</span></a>
<a class="sourceLine" id="cb34-14" title="14"><span class="co">## Runtime: 0.0205457</span></a>
<a class="sourceLine" id="cb34-15" title="15"></a>
<a class="sourceLine" id="cb34-16" title="16"><span class="kw"><a href="../../reference/resample.html">bootstrapB632plus</a></span>(<span class="st">"regr.lm"</span>, bh.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mae))</a>
<a class="sourceLine" id="cb34-17" title="17"><span class="co">## Resampling: OOB bootstrapping</span></a>
<a class="sourceLine" id="cb34-18" title="18"><span class="co">## Measures:             mse.train   mae.train   mse.test    mae.test</span></a>
<a class="sourceLine" id="cb34-19" title="19"><span class="co">## [Resample] iter 1:    24.6425511  3.4107320   16.3415466  3.0123263</span></a>
<a class="sourceLine" id="cb34-20" title="20"><span class="co">## [Resample] iter 2:    17.0963191  2.9809210   29.6056968  3.7131236</span></a>
<a class="sourceLine" id="cb34-21" title="21"><span class="co">## [Resample] iter 3:    23.1440608  3.5079975   24.4183753  3.3467443</span></a>
<a class="sourceLine" id="cb34-22" title="22"><span class="co">## </span></a>
<a class="sourceLine" id="cb34-23" title="23"><span class="co">## Aggregated Result: mse.b632plus=22.9359054,mae.b632plus=3.3459751</span></a>
<a class="sourceLine" id="cb34-24" title="24"><span class="co">## </span></a>
<a class="sourceLine" id="cb34-25" title="25"><span class="co">## Resample Result</span></a>
<a class="sourceLine" id="cb34-26" title="26"><span class="co">## Task: BostonHousing-example</span></a>
<a class="sourceLine" id="cb34-27" title="27"><span class="co">## Learner: regr.lm</span></a>
<a class="sourceLine" id="cb34-28" title="28"><span class="co">## Aggr perf: mse.b632plus=22.9359054,mae.b632plus=3.3459751</span></a>
<a class="sourceLine" id="cb34-29" title="29"><span class="co">## Runtime: 0.0419419</span></a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li><a href="#accessing-resample-results">Accessing resample results</a></li>
      <li><a href="#stratification-blocking-and-grouping">Stratification, Blocking and Grouping</a></li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li><a href="#aggregating-performance-values">Aggregating performance values</a></li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
â€ƒapiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
â€ƒindexName: 'mlr',
â€ƒinputSelector: 'input#search-input.form-control',
â€ƒdebug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>

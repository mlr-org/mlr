<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<!-- Google Site Verification --><meta name="google-site-verification" content="BrjL5fpoyHZu1rR8rwnnM2MBO3u3iIFB8NsmSuOsY84">
<title>Resampling â€¢ mlr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../jquery.sticky-kit.min.js"></script><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="Resampling">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
<link rel="icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
<link rel="apple-touch-icon" type="image/png" href="https://mlr-org.github.io/mlr/favicon.ico">
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../../index.html"></a>
      </div>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Basics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/task.html">Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learner.html">Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/train.html">Train</a>
    </li>
    <li>
      <a href="../../articles/tutorial/predict.html">Predict</a>
    </li>
    <li>
      <a href="../../articles/tutorial/preproc.html">Preprocessing</a>
    </li>
    <li>
      <a href="../../articles/tutorial/performance.html">Performance</a>
    </li>
    <li>
      <a href="../../articles/tutorial/resample.html">Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/tune.html">Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/benchmark_experiments.html">Benchmark Experiments</a>
    </li>
    <li>
      <a href="../../articles/tutorial/parallelization.html">Parallelization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/visualization.html">Visualization</a>
    </li>
    <li>
      <a href="../../articles/tutorial/usecase_regression.html">Use case - Regression</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Advanced
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/configureMlr.html">Configuration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/wrapper.html">Wrapped Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/impute.html">Imputation</a>
    </li>
    <li>
      <a href="../../articles/tutorial/bagging.html">Generic Bagging</a>
    </li>
    <li>
      <a href="../../articles/tutorial/advanced_tune.html">Advanced Tuning</a>
    </li>
    <li>
      <a href="../../articles/tutorial/feature_selection.html">Feature Selection/Filtering</a>
    </li>
    <li>
      <a href="../../articles/tutorial/nested_resampling.html">Nested Resampling</a>
    </li>
    <li>
      <a href="../../articles/tutorial/cost_sensitive_classif.html">Cost-Sensitive Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/over_and_undersampling.html">Imbalanced Classification Problems</a>
    </li>
    <li>
      <a href="../../articles/tutorial/roc_analysis.html">ROC Analysis and Performance Curves</a>
    </li>
    <li>
      <a href="../../articles/tutorial/multilabel.html">Multilabel Classification</a>
    </li>
    <li>
      <a href="../../articles/tutorial/learning_curve.html">Learning Curve Analysis</a>
    </li>
    <li>
      <a href="../../articles/tutorial/partial_dependence.html">Partial Dependence Plots</a>
    </li>
    <li>
      <a href="../../articles/tutorial/classifier_calibration.html">Classifier Calibration</a>
    </li>
    <li>
      <a href="../../articles/tutorial/hyperpar_tuning_effects.html">Hyperparameter Tuning Effects</a>
    </li>
    <li>
      <a href="../../articles/tutorial/out_of_bag_predictions.html">Out-of-Bag Predictions</a>
    </li>
    <li>
      <a href="../../articles/tutorial/handling_of_spatial_data.html">Handling of Spatial Data</a>
    </li>
    <li>
      <a href="../../articles/tutorial/functional_data.html">Functional Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Extending
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/tutorial/create_learner.html">Create Custom Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_measure.html">Create Custom Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_imputation.html">Create Imputation Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/create_filter.html">Create Custom Filters</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Appendix
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../reference/index.html">Function Reference</a>
    </li>
    <li>
      <a href="../../news/index.html">News</a>
    </li>
    <li>
      <a href="../../articles/tutorial/example_tasks.html">Example Tasks</a>
    </li>
    <li>
      <a href="../../articles/tutorial/integrated_learners.html">Integrated Learners</a>
    </li>
    <li>
      <a href="../../articles/tutorial/measures.html">Implemented Measures</a>
    </li>
    <li>
      <a href="../../articles/tutorial/filter_methods.html">Integrated Filter Methods</a>
    </li>
    <li>
      <a href="../../articles/tutorial/mlr_publications.html">mlr Publications</a>
    </li>
    <li>
      <a href="../../articles/tutorial/talks_videos_workshops.html">Talks, Videos and Workshops</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    mlr-org Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://github.com/mlr-org/mlrMBO">mlrMBO</a>
    </li>
    <li>
      <a href="https://github.com/mlr-org/mlrCPO">mlrCPO</a>
    </li>
    <li>
      <a href="http://jakob-r.de/mlrHyperopt/index.html">mlrHyperopt</a>
    </li>
    <li>
      <a href="http://openml.github.io/openml-r/vignettes/OpenML.html">OpenML</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mlr-org/mlr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fa fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fa fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-blog.netlify.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Resampling</h1>
            
      
      <!--The 'toc' block was inserted manually by @pat-s. It triggeres the inline ToC in the vignettes.-->
            <div id="toc">
      <h3 class="hasAnchor">
<a href="#toc" class="anchor"></a>Table of Contents</h3>
      <ul>
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li><a href="#accessing-resample-results">Accessing resample results</a></li>
      <li><a href="#stratification-blocking-and-grouping">Stratification, Blocking and Grouping</a></li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li><a href="#aggregating-performance-values">Aggregating performance values</a></li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      
      <small>Source: <a href="https://github.com/mlr-org/mlr/blob/master/vignettes/tutorial/resample.Rmd"><code>vignettes/tutorial/resample.Rmd</code></a></small>

    </div>

    
    
<div class="contents">
<p>Resampling strategies are usually used to assess the performance of a learning algorithm: The entire data set is (repeatedly) split into training sets <span class="math inline">\(D^{*b}\)</span> and test sets <span class="math inline">\(D \setminus D^{*b}\)</span>, <span class="math inline">\(b = 1,\ldots,B\)</span>. The learner is trained on each training set, predictions are made on the corresponding test set (sometimes on the training set as well) and the performance measure <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> is calculated. Then the <span class="math inline">\(B\)</span> individual performance values are aggregated, most often by calculating the mean. There exist various different resampling strategies, for example cross-validation and bootstrap, to mention just two popular approaches.</p>
<div class="figure" style="text-align: center">
<img src="https://raw.githubusercontent.com/pat-s/mlr/master/vignettes/tutorial/devel/pdf/img/resampling.png" alt="Resampling Figure" width="600px"><p class="caption">
Resampling Figure
</p>
</div>
<p>If you want to read up on further details, the paper <a href="http://link.springer.com/chapter/10.1007%2F978-0-387-47509-7_8">Resampling Strategies for Model Assessment and Selection</a> by Simon is probably not a bad choice. Bernd has also published a paper <a href="http://www.mitpressjournals.org/doi/pdf/10.1162/EVCO_a_00069">Resampling methods for meta-model validation with recommendations for evolutionary computation</a> which contains detailed descriptions and lots of statistical background information on resampling methods.</p>
<div id="defining-the-resampling-strategy" class="section level2">
<h2 class="hasAnchor">
<a href="#defining-the-resampling-strategy" class="anchor"></a>Defining the resampling strategy</h2>
<p>In <code>mlr</code> the resampling strategy can be defined via function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. It requires a string that specifies the resampling method and, depending on the selected strategy, further information like the number of iterations. The supported resampling strategies are:</p>
<ul>
<li>Cross-validation (<code>"CV"</code>),</li>
<li>Leave-one-out cross-validation (<code>"LOO"</code>),</li>
<li>Repeated cross-validation (<code>"RepCV"</code>),</li>
<li>Out-of-bag bootstrap and other variants like <em>b632</em> (<code>"Bootstrap"</code>),</li>
<li>Subsampling, also called Monte-Carlo cross-validation (<code>"Subsample"</code>),</li>
<li>Holdout (training/test) (<code>"Holdout"</code>).</li>
</ul>
<p>For example if you want to use 3-fold cross-validation type:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb1-4" data-line-number="4">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>For holdout estimation use:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Holdout estimation</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">rdesc</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
<p>In order to save you some typing <code>mlr</code> contains some pre-defined resample descriptions for very common strategies like holdout (<code>hout</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)) as well as cross-validation with different numbers of folds (e.g., <code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) or <code>cv10</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">hout</a>
<a class="sourceLine" id="cb3-2" data-line-number="2">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">## Predict: test</a>
<a class="sourceLine" id="cb3-4" data-line-number="4">## Stratification: FALSE</a>
<a class="sourceLine" id="cb3-5" data-line-number="5"></a>
<a class="sourceLine" id="cb3-6" data-line-number="6">cv3</a>
<a class="sourceLine" id="cb3-7" data-line-number="7">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb3-8" data-line-number="8">## Predict: test</a>
<a class="sourceLine" id="cb3-9" data-line-number="9">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="performing-the-resampling" class="section level2">
<h2 class="hasAnchor">
<a href="#performing-the-resampling" class="anchor"></a>Performing the resampling</h2>
<p>Function <code><a href="../../reference/resample.html">resample()</a></code> evaluates a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) on a given machine learning <code><a href="../../reference/Task.html">Task()</a></code> using the selected resampling strategy (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<p>As a first example, the performance of linear regression (<code><a href="http://www.rdocumentation.org/packages/stats/topics/lm">stats::lm()</a></code>) on the <code>BostonHousing</code> (<code><a href="http://www.rdocumentation.org/packages/mlbench/topics/BostonHousing">mlbench::BostonHousing()</a></code>) data set is calculated using <em>3-fold cross-validation</em>.</p>
<p>Generally, for <em><span class="math inline">\(K\)</span>-fold cross-validation</em> the data set <span class="math inline">\(D\)</span> is partitioned into <span class="math inline">\(K\)</span> subsets of (approximately) equal size. In the <span class="math inline">\(b\)</span>-th of the <span class="math inline">\(K\)</span> iterations, the <span class="math inline">\(b\)</span>-th subset is used for testing, while the union of the remaining parts forms the training set.</p>
<p>As usual, you can either pass a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) object to <code><a href="../../reference/resample.html">resample()</a></code> or, as done here, provide the class name <code>"regr.lm"</code> of the learner. Since no performance measure is specified the default for regression learners (mean squared error, <a href="measures.html" target="_blank">mse</a>) is calculated.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Specify the resampling strategy (3-fold cross-validation)</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="co"># Calculate the performance</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc)</a>
<a class="sourceLine" id="cb4-6" data-line-number="6">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">## Measures:             mse</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">## [Resample] iter 1:    26.7683475</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">## [Resample] iter 2:    22.6920479</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">## [Resample] iter 3:    21.5823511</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb4-12" data-line-number="12">## Aggregated Result: mse.test.mean=23.6809155</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb4-14" data-line-number="14"></a>
<a class="sourceLine" id="cb4-15" data-line-number="15">r</a>
<a class="sourceLine" id="cb4-16" data-line-number="16">## Resample Result</a>
<a class="sourceLine" id="cb4-17" data-line-number="17">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb4-18" data-line-number="18">## Learner: regr.lm</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">## Aggr perf: mse.test.mean=23.6809155</a>
<a class="sourceLine" id="cb4-20" data-line-number="20">## Runtime: 0.0389631</a></code></pre></div>
<p>The result <code>r</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> result. It contains performance results for the learner and some additional information like the runtime, predicted values, and optionally the models fitted in single resampling iterations.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Peak into r</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">names</span>(r)</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">##  [1] "learner.id"     "task.id"        "task.desc"      "measures.train"</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">##  [5] "measures.test"  "aggr"           "pred"           "models"        </a>
<a class="sourceLine" id="cb5-5" data-line-number="5">##  [9] "err.msgs"       "err.dumps"      "extract"        "runtime"</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a>
<a class="sourceLine" id="cb5-7" data-line-number="7">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb5-8" data-line-number="8">## mse.test.mean </a>
<a class="sourceLine" id="cb5-9" data-line-number="9">##      23.68092</a>
<a class="sourceLine" id="cb5-10" data-line-number="10"></a>
<a class="sourceLine" id="cb5-11" data-line-number="11">r<span class="op">$</span>measures.test</a>
<a class="sourceLine" id="cb5-12" data-line-number="12">##   iter      mse</a>
<a class="sourceLine" id="cb5-13" data-line-number="13">## 1    1 26.76835</a>
<a class="sourceLine" id="cb5-14" data-line-number="14">## 2    2 22.69205</a>
<a class="sourceLine" id="cb5-15" data-line-number="15">## 3    3 21.58235</a></code></pre></div>
<p><code>r$measures.test</code> gives the performance on each of the 3 test data sets. <code>r$aggr</code> shows the aggregated performance value. Its name <code>"mse.test.mean"</code> indicates the performance measure, <a href="measures.html" target="_blank">mse</a>, and the method, <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), used to aggregate the 3 individual performances. <code>test.mean</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) is the default aggregation scheme for most performance measures and, as the name implies, takes the mean over the performances on the test data sets.</p>
<p>Resampling in <code>mlr</code> works the same way for all types of learning problems and learners. Below is a classification example where a classification tree (rpart) (<code><a href="http://www.rdocumentation.org/packages/rpart/topics/rpart">rpart::rpart()</a></code>) is evaluated on the <code>Sonar</code> (<code>mlbench::sonar()</code>) data set by subsampling with 5 iterations.</p>
<p>In each subsampling iteration the data set <span class="math inline">\(D\)</span> is randomly partitioned into a training and a test set according to a given percentage, e.g., 2/3 training and 1/3 test set. If there is just one iteration, the strategy is commonly called <em>holdout</em> or <em>test sample estimation</em>.</p>
<p>You can calculate several measures at once by passing a <code>list</code> of Measures (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>)s to <code><a href="../../reference/resample.html">resample()</a></code>. Below, the error rate (<a href="measures.html" target="_blank">mmce</a>), false positive and false negative rates (<a href="measures.html" target="_blank">fpr</a>, <a href="measures.html" target="_blank">fnr</a>), and the time it takes to train the learner (<a href="measures.html" target="_blank">timetrain</a>) are estimated by <em>subsampling</em> with 5 iterations.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># Subsampling with 5 iterations and default split ratio 2/3</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co"># Subsampling with 5 iterations and 4/5 training data</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">iters =</span> <span class="dv">5</span>, <span class="dt">split =</span> <span class="dv">4</span><span class="op">/</span><span class="dv">5</span>)</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co"># Classification tree with information splitting criterion</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>))</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co"># Calculate the performance measures</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(lrn, sonar.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain))</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">## Resampling: subsampling</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">## Measures:             mmce        fpr         fnr         timetrain</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">## [Resample] iter 1:    0.3809524   0.5555556   0.0666667   0.0170000</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">## [Resample] iter 2:    0.2142857   0.3181818   0.1000000   0.0150000</a>
<a class="sourceLine" id="cb6-16" data-line-number="16">## [Resample] iter 3:    0.3095238   0.2727273   0.3500000   0.0150000</a>
<a class="sourceLine" id="cb6-17" data-line-number="17">## [Resample] iter 4:    0.1666667   0.1250000   0.1923077   0.0210000</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">## [Resample] iter 5:    0.1904762   0.1578947   0.2173913   0.0180000</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb6-20" data-line-number="20">## Aggregated Result: mmce.test.mean=0.2523810,fpr.test.mean=0.2858719,fnr.test.mean=0.1852731,timetrain.test.mean=0.0172000</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">## </a>
<a class="sourceLine" id="cb6-22" data-line-number="22"></a>
<a class="sourceLine" id="cb6-23" data-line-number="23">r</a>
<a class="sourceLine" id="cb6-24" data-line-number="24">## Resample Result</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">## Task: Sonar-example</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">## Aggr perf: mmce.test.mean=0.2523810,fpr.test.mean=0.2858719,fnr.test.mean=0.1852731,timetrain.test.mean=0.0172000</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">## Runtime: 0.14516</a></code></pre></div>
<p>If you want to add further measures afterwards, use <code><a href="../../reference/addRRMeasure.html">addRRMeasure()</a></code>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Add balanced error rate (ber) and time used to predict</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw"><a href="../../reference/addRRMeasure.html">addRRMeasure</a></span>(r, <span class="kw">list</span>(ber, timepredict))</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">## Resample Result</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">## Task: Sonar-example</a>
<a class="sourceLine" id="cb7-5" data-line-number="5">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb7-6" data-line-number="6">## Aggr perf: mmce.test.mean=0.2523810,fpr.test.mean=0.2858719,fnr.test.mean=0.1852731,timetrain.test.mean=0.0172000,ber.test.mean=0.2355725,timepredict.test.mean=0.0046000</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">## Runtime: 0.14516</a></code></pre></div>
<p>By default, <code><a href="../../reference/resample.html">resample()</a></code> prints progress messages and intermediate results. You can turn this off by setting <code>show.info = FALSE</code>, as done in the code chunk below. (If you are interested in suppressing these messages permanently have a look at the tutorial page about <a href="configureMlr.html" target="_blank">configuring mlr</a>.)</p>
<p>In the above example, the Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) was explicitly constructed. For convenience you can also specify the learner as a string and pass any learner parameters via the <code>...</code> argument of <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, <span class="dt">parms =</span> <span class="kw">list</span>(<span class="dt">split =</span> <span class="st">"information"</span>), sonar.task, rdesc,</a>
<a class="sourceLine" id="cb8-2" data-line-number="2">  <span class="dt">measures =</span> <span class="kw">list</span>(mmce, fpr, fnr, timetrain), <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb8-6" data-line-number="6">## Task: Sonar-example</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">## Learner: classif.rpart</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">## Aggr perf: mmce.test.mean=0.3190476,fpr.test.mean=0.3415134,fnr.test.mean=0.2772365,timetrain.test.mean=0.0150000</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">## Runtime: 0.134137</a></code></pre></div>
</div>
<div id="accessing-resample-results" class="section level2">
<h2 class="hasAnchor">
<a href="#accessing-resample-results" class="anchor"></a>Accessing resample results</h2>
<p>Apart from the learner performance you can extract further information from the resample results, for example predicted values or the models fitted in individual resample iterations.</p>
<div id="predictions" class="section level3">
<h3 class="hasAnchor">
<a href="#predictions" class="anchor"></a>Predictions</h3>
<p>Per default, the <code><a href="../../reference/resample.html">resample()</a></code> result contains the predictions made during the resampling. If you do not want to keep them, e.g., in order to conserve memory, set <code>keep.pred = FALSE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>.</p>
<p>The predictions are stored in slot <code>$pred</code> of the resampling result, which can also be accessed by function <code><a href="../../reference/getRRPredictions.html">getRRPredictions()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">r<span class="op">$</span>pred</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb9-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb9-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb9-8" data-line-number="8">## time (mean): 0.01</a>
<a class="sourceLine" id="cb9-9" data-line-number="9">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-10" data-line-number="10">## 1  78     R        M    1 test</a>
<a class="sourceLine" id="cb9-11" data-line-number="11">## 2  43     R        R    1 test</a>
<a class="sourceLine" id="cb9-12" data-line-number="12">## 3  21     R        R    1 test</a>
<a class="sourceLine" id="cb9-13" data-line-number="13">## 4 116     M        M    1 test</a>
<a class="sourceLine" id="cb9-14" data-line-number="14">## 5 170     M        M    1 test</a>
<a class="sourceLine" id="cb9-15" data-line-number="15">## 6 187     M        R    1 test</a>
<a class="sourceLine" id="cb9-16" data-line-number="16">## ... (#rows: 210, #cols: 5)</a>
<a class="sourceLine" id="cb9-17" data-line-number="17"></a>
<a class="sourceLine" id="cb9-18" data-line-number="18">pred =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictions.html">getRRPredictions</a></span>(r)</a>
<a class="sourceLine" id="cb9-19" data-line-number="19">pred</a>
<a class="sourceLine" id="cb9-20" data-line-number="20">## Resampled Prediction for:</a>
<a class="sourceLine" id="cb9-21" data-line-number="21">## Resample description: subsampling with 5 iterations and 0.80 split rate.</a>
<a class="sourceLine" id="cb9-22" data-line-number="22">## Predict: test</a>
<a class="sourceLine" id="cb9-23" data-line-number="23">## Stratification: FALSE</a>
<a class="sourceLine" id="cb9-24" data-line-number="24">## predict.type: response</a>
<a class="sourceLine" id="cb9-25" data-line-number="25">## threshold: </a>
<a class="sourceLine" id="cb9-26" data-line-number="26">## time (mean): 0.01</a>
<a class="sourceLine" id="cb9-27" data-line-number="27">##    id truth response iter  set</a>
<a class="sourceLine" id="cb9-28" data-line-number="28">## 1  78     R        M    1 test</a>
<a class="sourceLine" id="cb9-29" data-line-number="29">## 2  43     R        R    1 test</a>
<a class="sourceLine" id="cb9-30" data-line-number="30">## 3  21     R        R    1 test</a>
<a class="sourceLine" id="cb9-31" data-line-number="31">## 4 116     M        M    1 test</a>
<a class="sourceLine" id="cb9-32" data-line-number="32">## 5 170     M        M    1 test</a>
<a class="sourceLine" id="cb9-33" data-line-number="33">## 6 187     M        R    1 test</a>
<a class="sourceLine" id="cb9-34" data-line-number="34">## ... (#rows: 210, #cols: 5)</a></code></pre></div>
<p><code>pred</code> is an object of class <code><a href="../../reference/resample.html">resample()</a></code> Prediction. Just as a <code><a href="../../reference/Prediction.html">Prediction()</a></code> object (see the tutorial page on making <a href="predict.html" target="_blank">predictions</a> it has an element <code>$data</code> which is a <code>data.frame</code> that contains the predictions and in the case of a supervised learning problem the true values of the target variable(s). You can use <code>as.data.frame</code> (<code><a href="../../reference/Prediction.html">Prediction()</a></code> to directly access the <code>$data</code> slot. Moreover, all getter functions for <code><a href="../../reference/Prediction.html">Prediction()</a></code> objects like <code><a href="../../reference/getPredictionResponse.html">getPredictionResponse()</a></code> or <code><a href="../../reference/getPredictionProbabilities.html">getPredictionProbabilities()</a></code> are applicable.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">head</span>(<span class="kw">as.data.frame</span>(pred))</a>
<a class="sourceLine" id="cb10-2" data-line-number="2">##    id truth response iter  set</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">## 1  78     R        M    1 test</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">## 2  43     R        R    1 test</a>
<a class="sourceLine" id="cb10-5" data-line-number="5">## 3  21     R        R    1 test</a>
<a class="sourceLine" id="cb10-6" data-line-number="6">## 4 116     M        M    1 test</a>
<a class="sourceLine" id="cb10-7" data-line-number="7">## 5 170     M        M    1 test</a>
<a class="sourceLine" id="cb10-8" data-line-number="8">## 6 187     M        R    1 test</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionTruth</a></span>(pred))</a>
<a class="sourceLine" id="cb10-11" data-line-number="11">## [1] R R R M M M</a>
<a class="sourceLine" id="cb10-12" data-line-number="12">## Levels: M R</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="kw">head</span>(<span class="kw"><a href="../../reference/getPredictionResponse.html">getPredictionResponse</a></span>(pred))</a>
<a class="sourceLine" id="cb10-15" data-line-number="15">## [1] M R R M M R</a>
<a class="sourceLine" id="cb10-16" data-line-number="16">## Levels: M R</a></code></pre></div>
<p>The columns <code>iter</code> and <code>set</code> in the <code>data.frame</code> indicate the resampling iteration and the data set (<code>train</code> or <code>test</code>) for which the prediction was made.</p>
<p>By default, predictions are made for the test sets only. If predictions for the training set are required, set <code>predict = "train"</code> (for predictions on the train set only) or <code>predict = "both"</code> (for predictions on both train and test sets) in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>. In any case, this is necessary for some bootstrap methods (<em>b632</em> and <em>b632+</em>) and some examples are shown later on.</p>
<p>Below, we use simple Holdout, i.e., split the data once into a training and test set, as resampling strategy and make predictions on both sets.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="co"># Make predictions on both training and test sets</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Holdout"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"></a>
<a class="sourceLine" id="cb11-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0800000</a>
<a class="sourceLine" id="cb11-10" data-line-number="10">## Runtime: 0.0133858</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"></a>
<a class="sourceLine" id="cb11-12" data-line-number="12">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">##   iter mmce</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">## 1    1 0.01</a></code></pre></div>
<p>(Please note that nonetheless the misclassification rate <code>r$aggr</code> is estimated on the test data only. How to calculate performance measures on the training sets is shown below.)</p>
<p>A second function to extract predictions from resample results is <code><a href="../../reference/getRRPredictionList.html">getRRPredictionList()</a></code> which returns a <code>list</code> of predictions split by data set (train/test) and resampling iteration.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">predList =<span class="st"> </span><span class="kw"><a href="../../reference/getRRPredictionList.html">getRRPredictionList</a></span>(r)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">predList</a>
<a class="sourceLine" id="cb12-3" data-line-number="3">## $train</a>
<a class="sourceLine" id="cb12-4" data-line-number="4">## $train$`1`</a>
<a class="sourceLine" id="cb12-5" data-line-number="5">## Prediction: 100 observations</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">## predict.type: response</a>
<a class="sourceLine" id="cb12-7" data-line-number="7">## threshold: </a>
<a class="sourceLine" id="cb12-8" data-line-number="8">## time: 0.00</a>
<a class="sourceLine" id="cb12-9" data-line-number="9">##      id      truth   response</a>
<a class="sourceLine" id="cb12-10" data-line-number="10">## 127 127  virginica  virginica</a>
<a class="sourceLine" id="cb12-11" data-line-number="11">## 56   56 versicolor versicolor</a>
<a class="sourceLine" id="cb12-12" data-line-number="12">## 128 128  virginica  virginica</a>
<a class="sourceLine" id="cb12-13" data-line-number="13">## 115 115  virginica  virginica</a>
<a class="sourceLine" id="cb12-14" data-line-number="14">## 112 112  virginica  virginica</a>
<a class="sourceLine" id="cb12-15" data-line-number="15">## 136 136  virginica  virginica</a>
<a class="sourceLine" id="cb12-16" data-line-number="16">## ... (#rows: 100, #cols: 3)</a>
<a class="sourceLine" id="cb12-17" data-line-number="17">## </a>
<a class="sourceLine" id="cb12-18" data-line-number="18">## </a>
<a class="sourceLine" id="cb12-19" data-line-number="19">## $test</a>
<a class="sourceLine" id="cb12-20" data-line-number="20">## $test$`1`</a>
<a class="sourceLine" id="cb12-21" data-line-number="21">## Prediction: 50 observations</a>
<a class="sourceLine" id="cb12-22" data-line-number="22">## predict.type: response</a>
<a class="sourceLine" id="cb12-23" data-line-number="23">## threshold: </a>
<a class="sourceLine" id="cb12-24" data-line-number="24">## time: 0.00</a>
<a class="sourceLine" id="cb12-25" data-line-number="25">##      id      truth   response</a>
<a class="sourceLine" id="cb12-26" data-line-number="26">## 134 134  virginica versicolor</a>
<a class="sourceLine" id="cb12-27" data-line-number="27">## 117 117  virginica  virginica</a>
<a class="sourceLine" id="cb12-28" data-line-number="28">## 1     1     setosa     setosa</a>
<a class="sourceLine" id="cb12-29" data-line-number="29">## 145 145  virginica  virginica</a>
<a class="sourceLine" id="cb12-30" data-line-number="30">## 37   37     setosa     setosa</a>
<a class="sourceLine" id="cb12-31" data-line-number="31">## 77   77 versicolor versicolor</a>
<a class="sourceLine" id="cb12-32" data-line-number="32">## ... (#rows: 50, #cols: 3)</a></code></pre></div>
</div>
<div id="learner-models" class="section level3">
<h3 class="hasAnchor">
<a href="#learner-models" class="anchor"></a>Learner models</h3>
<p>In each resampling iteration a Learner (<code><a href="../../reference/makeLearner.html">makeLearner()</a></code>) is fitted on the respective training set. By default, the resulting <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>)s are not included in the <code><a href="../../reference/resample.html">resample()</a></code> result and slot <code>$models</code> is empty. In order to keep them, set <code>models = TRUE</code> when calling <code><a href="../../reference/resample.html">resample()</a></code>, as in the following survival analysis example.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb13-3" data-line-number="3"></a>
<a class="sourceLine" id="cb13-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"surv.coxph"</span>, lung.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">models =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-5" data-line-number="5">r<span class="op">$</span>models</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">## [[1]]</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">## Trained on: task.id = lung-example; obs = 112; features = 8</a>
<a class="sourceLine" id="cb13-9" data-line-number="9">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb13-11" data-line-number="11">## [[2]]</a>
<a class="sourceLine" id="cb13-12" data-line-number="12">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-13" data-line-number="13">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-14" data-line-number="14">## Hyperparameters: </a>
<a class="sourceLine" id="cb13-15" data-line-number="15">## </a>
<a class="sourceLine" id="cb13-16" data-line-number="16">## [[3]]</a>
<a class="sourceLine" id="cb13-17" data-line-number="17">## Model for learner.id=surv.coxph; learner.class=surv.coxph</a>
<a class="sourceLine" id="cb13-18" data-line-number="18">## Trained on: task.id = lung-example; obs = 111; features = 8</a>
<a class="sourceLine" id="cb13-19" data-line-number="19">## Hyperparameters:</a></code></pre></div>
</div>
<div id="the-extract-option" class="section level3">
<h3 class="hasAnchor">
<a href="#the-extract-option" class="anchor"></a>The extract option</h3>
<p>Keeping complete fitted models can be memory-intensive if these objects are large or the number of resampling iterations is high. Alternatively, you can use the <code>extract</code> argument of <code><a href="../../reference/resample.html">resample()</a></code> to retain only the information you need. To this end you need to pass a function to <code>extract</code> which is applied to each <code>WrappedModel</code> (<code><a href="../../reference/makeWrappedModel.html">makeWrappedModel()</a></code>) object fitted in each resampling iteration.</p>
<p>Below, we cluster the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/mtcars">datasets::mtcars()</a></code> data using the <span class="math inline">\(k\)</span>-means algorithm with <span class="math inline">\(k = 3\)</span> and keep only the cluster centers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co"># Extract the compute cluster centers</span></a>
<a class="sourceLine" id="cb14-5" data-line-number="5">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"cluster.kmeans"</span>, mtcars.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  <span class="dt">centers =</span> <span class="dv">3</span>, <span class="dt">extract =</span> <span class="cf">function</span>(x) <span class="kw"><a href="../../reference/getLearnerModel.html">getLearnerModel</a></span>(x)<span class="op">$</span>centers)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7">## Warning in rgl.init(initValue, onlyNULL): RGL: unable to open X11 display</a>
<a class="sourceLine" id="cb14-8" data-line-number="8">## Warning: 'rgl_init' failed, running with rgl.useNULL = TRUE</a>
<a class="sourceLine" id="cb14-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb14-10" data-line-number="10">## This is package 'modeest' written by P. PONCET.</a>
<a class="sourceLine" id="cb14-11" data-line-number="11">## For a complete list of functions, use 'library(help = "modeest")' or 'help.start()'.</a>
<a class="sourceLine" id="cb14-12" data-line-number="12">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb14-13" data-line-number="13">## [[1]]</a>
<a class="sourceLine" id="cb14-14" data-line-number="14">##        mpg cyl    disp        hp   drat       wt     qsec   vs   am</a>
<a class="sourceLine" id="cb14-15" data-line-number="15">## 1 16.82500 7.5 273.650 153.75000 2.9150 3.695000 18.02250 0.25 0.00</a>
<a class="sourceLine" id="cb14-16" data-line-number="16">## 2 15.48000 8.0 384.200 214.80000 3.4360 3.943800 16.36000 0.00 0.20</a>
<a class="sourceLine" id="cb14-17" data-line-number="17">## 3 24.58333 4.5 116.975  99.08333 4.0375 2.381917 18.49167 0.75 0.75</a>
<a class="sourceLine" id="cb14-18" data-line-number="18">##       gear     carb</a>
<a class="sourceLine" id="cb14-19" data-line-number="19">## 1 3.000000 2.250000</a>
<a class="sourceLine" id="cb14-20" data-line-number="20">## 2 3.400000 3.200000</a>
<a class="sourceLine" id="cb14-21" data-line-number="21">## 3 4.166667 2.333333</a>
<a class="sourceLine" id="cb14-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb14-23" data-line-number="23">## [[2]]</a>
<a class="sourceLine" id="cb14-24" data-line-number="24">##        mpg cyl     disp       hp     drat       wt     qsec    vs</a>
<a class="sourceLine" id="cb14-25" data-line-number="25">## 1 20.46000   6 178.1200 125.6000 3.684000 2.984000 17.34400 0.400</a>
<a class="sourceLine" id="cb14-26" data-line-number="26">## 2 15.45556   8 354.2889 208.3333 3.158889 4.033889 16.95667 0.000</a>
<a class="sourceLine" id="cb14-27" data-line-number="27">## 3 26.88750   4 107.1625  81.7500 4.126250 2.315375 18.99875 0.875</a>
<a class="sourceLine" id="cb14-28" data-line-number="28">##          am     gear     carb</a>
<a class="sourceLine" id="cb14-29" data-line-number="29">## 1 0.6000000 4.000000 3.800000</a>
<a class="sourceLine" id="cb14-30" data-line-number="30">## 2 0.1111111 3.222222 3.555556</a>
<a class="sourceLine" id="cb14-31" data-line-number="31">## 3 0.7500000 4.250000 1.750000</a>
<a class="sourceLine" id="cb14-32" data-line-number="32">## </a>
<a class="sourceLine" id="cb14-33" data-line-number="33">## [[3]]</a>
<a class="sourceLine" id="cb14-34" data-line-number="34">##     mpg cyl     disp       hp  drat       wt    qsec  vs  am gear     carb</a>
<a class="sourceLine" id="cb14-35" data-line-number="35">## 1 14.10   8 363.6571 187.1429 3.030 4.354857 17.5700 0.0 0.0  3.0 3.142857</a>
<a class="sourceLine" id="cb14-36" data-line-number="36">## 2 14.60   8 340.5000 272.2500 3.675 3.537500 15.0875 0.0 0.5  4.0 5.000000</a>
<a class="sourceLine" id="cb14-37" data-line-number="37">## 3 23.25   5 150.2800  95.4000 3.712 2.844000 19.1870 0.9 0.4  3.7 2.000000</a></code></pre></div>
<p>As a second example, we extract the variable importances from fitted regression trees using function <code><a href="../../reference/getFeatureImportance.html">getFeatureImportance()</a></code>. (For more detailed information on this topic see the <a href="feature_selection.html" target="_blank">feature selection</a> page.)</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co"># Extract the variable importance in a regression tree</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>, <span class="dt">extract =</span> getFeatureImportance)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">r<span class="op">$</span>extract</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">## [[1]]</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb15-8" data-line-number="8">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">## Measure: NA</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">## Contrast: NA</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-12" data-line-number="12">## Replace: NA</a>
<a class="sourceLine" id="cb15-13" data-line-number="13">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-14" data-line-number="14">## Local: FALSE</a>
<a class="sourceLine" id="cb15-15" data-line-number="15">##       crim       zn   indus chas      nox       rm      age      dis</a>
<a class="sourceLine" id="cb15-16" data-line-number="16">## 1 9863.454 329.1599 10171.7    0 9560.566 13279.24 6977.044 3228.988</a>
<a class="sourceLine" id="cb15-17" data-line-number="17">##        rad      tax  ptratio        b    lstat</a>
<a class="sourceLine" id="cb15-18" data-line-number="18">## 1 2045.706 1288.815 495.9243 23.33857 15885.67</a>
<a class="sourceLine" id="cb15-19" data-line-number="19">## </a>
<a class="sourceLine" id="cb15-20" data-line-number="20">## [[2]]</a>
<a class="sourceLine" id="cb15-21" data-line-number="21">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-22" data-line-number="22">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-23" data-line-number="23">## </a>
<a class="sourceLine" id="cb15-24" data-line-number="24">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-25" data-line-number="25">## Measure: NA</a>
<a class="sourceLine" id="cb15-26" data-line-number="26">## Contrast: NA</a>
<a class="sourceLine" id="cb15-27" data-line-number="27">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-28" data-line-number="28">## Replace: NA</a>
<a class="sourceLine" id="cb15-29" data-line-number="29">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-30" data-line-number="30">## Local: FALSE</a>
<a class="sourceLine" id="cb15-31" data-line-number="31">##       crim       zn    indus     chas      nox      rm      age      dis</a>
<a class="sourceLine" id="cb15-32" data-line-number="32">## 1 3893.343 1788.307 4814.524 349.8882 2318.557 16983.6 2761.224 3564.209</a>
<a class="sourceLine" id="cb15-33" data-line-number="33">##        rad      tax  ptratio       b    lstat</a>
<a class="sourceLine" id="cb15-34" data-line-number="34">## 1 771.8232 558.3713 3949.944 583.147 11601.53</a>
<a class="sourceLine" id="cb15-35" data-line-number="35">## </a>
<a class="sourceLine" id="cb15-36" data-line-number="36">## [[3]]</a>
<a class="sourceLine" id="cb15-37" data-line-number="37">## FeatureImportance:</a>
<a class="sourceLine" id="cb15-38" data-line-number="38">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb15-39" data-line-number="39">## </a>
<a class="sourceLine" id="cb15-40" data-line-number="40">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb15-41" data-line-number="41">## Measure: NA</a>
<a class="sourceLine" id="cb15-42" data-line-number="42">## Contrast: NA</a>
<a class="sourceLine" id="cb15-43" data-line-number="43">## Aggregation: function (x)  x</a>
<a class="sourceLine" id="cb15-44" data-line-number="44">## Replace: NA</a>
<a class="sourceLine" id="cb15-45" data-line-number="45">## Number of Monte-Carlo iterations: NA</a>
<a class="sourceLine" id="cb15-46" data-line-number="46">## Local: FALSE</a>
<a class="sourceLine" id="cb15-47" data-line-number="47">##       crim       zn    indus     chas      nox       rm     age      dis</a>
<a class="sourceLine" id="cb15-48" data-line-number="48">## 1 1086.749 1058.549 4298.778 165.8373 2593.169 15262.22 2826.28 2969.197</a>
<a class="sourceLine" id="cb15-49" data-line-number="49">##   rad      tax  ptratio b    lstat</a>
<a class="sourceLine" id="cb15-50" data-line-number="50">## 1   0 2096.066 3185.379 0 9834.019</a></code></pre></div>
<p>There is also an convenience function <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices()</a></code> to extract the resampling indices from the <code>ResampleResult</code> object:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(r)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2">## $train.inds</a>
<a class="sourceLine" id="cb16-3" data-line-number="3">## $train.inds[[1]]</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">##   [1] 462 152 426 260 437 211  14 383 342 403 409 400 338 224 457  80 432</a>
<a class="sourceLine" id="cb16-5" data-line-number="5">##  [18] 135  15 242 112 263  88 218 151 407 460 468 391  12 469 313 418 187</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">##  [35] 109 177 278  64 296 334 206 295 382 373 393 324 471  65   8 115  25</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">##  [52]  68 103 337 254  49  72 421 401 378 249  91 142 498 429 386 370 309</a>
<a class="sourceLine" id="cb16-8" data-line-number="8">##  [69] 428 415 311  84 318  35 140 485 162 412 439 494 380 308 406 129  41</a>
<a class="sourceLine" id="cb16-9" data-line-number="9">##  [86] 283 387 486 500  36 292  55 241 440   6 436 197 118 149 345  50 335</a>
<a class="sourceLine" id="cb16-10" data-line-number="10">## [103] 413  27 174 490  67 214 416 340 435 346  89 305 114 422 448 253 124</a>
<a class="sourceLine" id="cb16-11" data-line-number="11">## [120]  98 480 321  75 107  69 180 312 355 273 493  32 181 353  61 257 166</a>
<a class="sourceLine" id="cb16-12" data-line-number="12">## [137] 265 336 290  92 319 302  44 316   3 458  34 131 307 483 446 134 361</a>
<a class="sourceLine" id="cb16-13" data-line-number="13">## [154] 405 261 275 371  82 442 414 169 423 108 244 130   4 247 425  94 394</a>
<a class="sourceLine" id="cb16-14" data-line-number="14">## [171] 441  56 216 178  97 235 287 189  10 352 484 339 363 139 146 195 245</a>
<a class="sourceLine" id="cb16-15" data-line-number="15">## [188] 388 113 219 291 102 438  22  63 390 333 170 354 207 360 314 157 310</a>
<a class="sourceLine" id="cb16-16" data-line-number="16">## [205] 326 464  51 329 367  53 452 234 474 171 277 167 434 320 381 248 505</a>
<a class="sourceLine" id="cb16-17" data-line-number="17">## [222] 368 488 276 431 478   2 223 116 489  81 226 501 375 499 141   5 454</a>
<a class="sourceLine" id="cb16-18" data-line-number="18">## [239]  42 481  29  90  46 222 477  77 128 164 153 372 188 210 402 317 419</a>
<a class="sourceLine" id="cb16-19" data-line-number="19">## [256] 209 161 424 322 344 323 204 461 392 389 225 252 255 212  54 150  76</a>
<a class="sourceLine" id="cb16-20" data-line-number="20">## [273] 420 182 148  23   1  52 332  21 427 495 456  83 239  96 271  79 229</a>
<a class="sourceLine" id="cb16-21" data-line-number="21">## [290]  62 155  73 453 451 179 330  33 256  37 447 173 147 350 466 123 356</a>
<a class="sourceLine" id="cb16-22" data-line-number="22">## [307] 504 503 183 327 328 404 228  30 497 347 281 105 198  59 243 369 121</a>
<a class="sourceLine" id="cb16-23" data-line-number="23">## [324] 200 376 126 238  26 304   7 300 221 143 232 203 384 193</a>
<a class="sourceLine" id="cb16-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb16-25" data-line-number="25">## $train.inds[[2]]</a>
<a class="sourceLine" id="cb16-26" data-line-number="26">##   [1] 462 152 192 260 437 211  14 240 160 357 199 383  17 409 400 450 285</a>
<a class="sourceLine" id="cb16-27" data-line-number="27">##  [18] 502 506 269 457  80 351 242 112  88 250 220  40 358 301 391  12 313</a>
<a class="sourceLine" id="cb16-28" data-line-number="28">##  [35] 418 187 109 177 119 278 258 106 104 296 231 206 186 373 393 379   8</a>
<a class="sourceLine" id="cb16-29" data-line-number="29">##  [52] 115 176  78  39 103 254 401 378 272 498  74 429 386 370 201 309 246</a>
<a class="sourceLine" id="cb16-30" data-line-number="30">##  [69] 415  16 172  84 318  35 140 433 162 412  13  86 308 463 406 129 500</a>
<a class="sourceLine" id="cb16-31" data-line-number="31">##  [86]  36 292 241  43 127 482 118 149  50 306 196  11 413 266 215  66 101</a>
<a class="sourceLine" id="cb16-32" data-line-number="32">## [103] 444 159 411 174 184 268 492 340 298 305 270  93 253 124 480 321 107</a>
<a class="sourceLine" id="cb16-33" data-line-number="33">## [120] 236 359  69 180 217 355 493 181 257 282 286 133  92 302  44  18  87</a>
<a class="sourceLine" id="cb16-34" data-line-number="34">## [137] 348 274 341 307 158 132 483 110 446 261  19  20 395 445  82 470 414</a>
<a class="sourceLine" id="cb16-35" data-line-number="35">## [154] 251 455  99 108 244 430 297 491 294 394 235 479 465 287  10  31 484</a>
<a class="sourceLine" id="cb16-36" data-line-number="36">## [171] 443 185 284 363 154 315 139 227 195 113 219 291 438 303  63 390 333</a>
<a class="sourceLine" id="cb16-37" data-line-number="37">## [188] 170 136 262 117 360 157 310 326 496 464  57 329 449 145 125 367  53</a>
<a class="sourceLine" id="cb16-38" data-line-number="38">## [205]   9 234 167 191 434 111 122 467 163 202 368  24 488 276 100   2 223</a>
<a class="sourceLine" id="cb16-39" data-line-number="39">## [222] 299 116 267 208 362 499   5 454 349  29  48  90 230  46 205 138 222</a>
<a class="sourceLine" id="cb16-40" data-line-number="40">## [239] 477  77 128 164 153 372 188 402  95 397 161 233 288 424 322 396 323</a>
<a class="sourceLine" id="cb16-41" data-line-number="41">## [256] 204  45 120 165 365 225 252 459 408  71 168 279  54  60  85 476  47</a>
<a class="sourceLine" id="cb16-42" data-line-number="42">## [273] 175 182 144 148   1 332  21 427 495 456 137 343 271  79  58 472 264</a>
<a class="sourceLine" id="cb16-43" data-line-number="43">## [290] 331  73 451  33 289 256 377 385  37 473 325 447 293 123 364 156 356</a>
<a class="sourceLine" id="cb16-44" data-line-number="44">## [307] 190 504 487 503 399 280 228  30 194  70 281 105 198  38 213  28 243</a>
<a class="sourceLine" id="cb16-45" data-line-number="45">## [324] 369 121 374 376 238 475 410 366 237 143 417 398 203 259</a>
<a class="sourceLine" id="cb16-46" data-line-number="46">## </a>
<a class="sourceLine" id="cb16-47" data-line-number="47">## $train.inds[[3]]</a>
<a class="sourceLine" id="cb16-48" data-line-number="48">##   [1] 426 192 240 160 357 199 342  17 403 450 338 224 285 502 506 269 432</a>
<a class="sourceLine" id="cb16-49" data-line-number="49">##  [18] 135 351  15 263 218 250 220  40 151 407 358 460 468 301 469 119 258</a>
<a class="sourceLine" id="cb16-50" data-line-number="50">##  [35] 106  64 104 334 231 295 382 186 324 471 379  65 176  78  39  25  68</a>
<a class="sourceLine" id="cb16-51" data-line-number="51">##  [52] 337  49  72 421 249  91 142 272  74 201 246 428 311  16 172 433 485</a>
<a class="sourceLine" id="cb16-52" data-line-number="52">##  [69] 439  13 494 380  86 463  41 283 387 486  55  43 127 440 482   6 436</a>
<a class="sourceLine" id="cb16-53" data-line-number="53">##  [86] 197 345 306 196 335  11 266 215  66  27 101 444 159 411 184 268 492</a>
<a class="sourceLine" id="cb16-54" data-line-number="54">## [103] 490  67 214 416 298 435 346  89 270 114 422  93 448  98  75 236 359</a>
<a class="sourceLine" id="cb16-55" data-line-number="55">## [120] 312 217 273  32 353  61 166 282 265 286 133 336 290 319 316  18  87</a>
<a class="sourceLine" id="cb16-56" data-line-number="56">## [137]   3 348 458  34 274 341 131 158 132 110 134 361 405  19  20 395 445</a>
<a class="sourceLine" id="cb16-57" data-line-number="57">## [154] 275 371 470 442 251 169 423 455  99 430 297 491 130   4 247 425  94</a>
<a class="sourceLine" id="cb16-58" data-line-number="58">## [171] 294 441  56 216 178  97 479 465 189 352  31 443 185 339 284 154 315</a>
<a class="sourceLine" id="cb16-59" data-line-number="59">## [188] 227 146 245 388 102  22 303 136 354 207 262 117 314 496  57  51 449</a>
<a class="sourceLine" id="cb16-60" data-line-number="60">## [205] 145 125 452   9 474 171 277 191 111 320 381 122 467 163 202 248 505</a>
<a class="sourceLine" id="cb16-61" data-line-number="61">## [222]  24 431 100 478 299 489  81 267 208 226 501 362 375 141  42 349 481</a>
<a class="sourceLine" id="cb16-62" data-line-number="62">## [239]  48 230 205 138 210 317 419  95 209 397 233 288 344 396 461  45 120</a>
<a class="sourceLine" id="cb16-63" data-line-number="63">## [256] 165 365 392 389 459 255 408  71 212 168 279  60  85 150 476  47 175</a>
<a class="sourceLine" id="cb16-64" data-line-number="64">## [273]  76 420 144  23  52  83 239  96 137 343 229  58 472  62 155 264 331</a>
<a class="sourceLine" id="cb16-65" data-line-number="65">## [290] 453 179 330 289 377 385 473 325 173 147 350 293 466 364 156 190 487</a>
<a class="sourceLine" id="cb16-66" data-line-number="66">## [307] 183 399 327 328 404 280 497 347 194  70  38 213  59  28 200 374 126</a>
<a class="sourceLine" id="cb16-67" data-line-number="67">## [324]  26 475 410 304 366   7 237 300 221 417 232 398 384 193 259</a>
<a class="sourceLine" id="cb16-68" data-line-number="68">## </a>
<a class="sourceLine" id="cb16-69" data-line-number="69">## </a>
<a class="sourceLine" id="cb16-70" data-line-number="70">## $test.inds</a>
<a class="sourceLine" id="cb16-71" data-line-number="71">## $test.inds[[1]]</a>
<a class="sourceLine" id="cb16-72" data-line-number="72">##   [1]   9  11  13  16  17  18  19  20  24  28  31  38  39  40  43  45  47</a>
<a class="sourceLine" id="cb16-73" data-line-number="73">##  [18]  48  57  58  60  66  70  71  74  78  85  86  87  93  95  99 100 101</a>
<a class="sourceLine" id="cb16-74" data-line-number="74">##  [35] 104 106 110 111 117 119 120 122 125 127 132 133 136 137 138 144 145</a>
<a class="sourceLine" id="cb16-75" data-line-number="75">##  [52] 154 156 158 159 160 163 165 168 172 175 176 184 185 186 190 191 192</a>
<a class="sourceLine" id="cb16-76" data-line-number="76">##  [69] 194 196 199 201 202 205 208 213 215 217 220 227 230 231 233 236 237</a>
<a class="sourceLine" id="cb16-77" data-line-number="77">##  [86] 240 246 250 251 258 259 262 264 266 267 268 269 270 272 274 279 280</a>
<a class="sourceLine" id="cb16-78" data-line-number="78">## [103] 282 284 285 286 288 289 293 294 297 298 299 301 303 306 315 325 331</a>
<a class="sourceLine" id="cb16-79" data-line-number="79">## [120] 341 343 348 349 351 357 358 359 362 364 365 366 374 377 379 385 395</a>
<a class="sourceLine" id="cb16-80" data-line-number="80">## [137] 396 397 398 399 408 410 411 417 430 433 443 444 445 449 450 455 459</a>
<a class="sourceLine" id="cb16-81" data-line-number="81">## [154] 463 465 467 470 472 473 475 476 479 482 487 491 492 496 502 506</a>
<a class="sourceLine" id="cb16-82" data-line-number="82">## </a>
<a class="sourceLine" id="cb16-83" data-line-number="83">## $test.inds[[2]]</a>
<a class="sourceLine" id="cb16-84" data-line-number="84">##   [1]   3   4   6   7  15  22  23  25  26  27  32  34  41  42  49  51  52</a>
<a class="sourceLine" id="cb16-85" data-line-number="85">##  [18]  55  56  59  61  62  64  65  67  68  72  75  76  81  83  89  91  94</a>
<a class="sourceLine" id="cb16-86" data-line-number="86">##  [35]  96  97  98 102 114 126 130 131 134 135 141 142 146 147 150 151 155</a>
<a class="sourceLine" id="cb16-87" data-line-number="87">##  [52] 166 169 171 173 178 179 183 189 193 197 200 207 209 210 212 214 216</a>
<a class="sourceLine" id="cb16-88" data-line-number="88">##  [69] 218 221 224 226 229 232 239 245 247 248 249 255 263 265 273 275 277</a>
<a class="sourceLine" id="cb16-89" data-line-number="89">##  [86] 283 290 295 300 304 311 312 314 316 317 319 320 324 327 328 330 334</a>
<a class="sourceLine" id="cb16-90" data-line-number="90">## [103] 335 336 337 338 339 342 344 345 346 347 350 352 353 354 361 371 375</a>
<a class="sourceLine" id="cb16-91" data-line-number="91">## [120] 380 381 382 384 387 388 389 392 403 404 405 407 416 419 420 421 422</a>
<a class="sourceLine" id="cb16-92" data-line-number="92">## [137] 423 425 426 428 431 432 435 436 439 440 441 442 448 452 453 458 460</a>
<a class="sourceLine" id="cb16-93" data-line-number="93">## [154] 461 466 468 469 471 474 478 481 485 486 489 490 494 497 501 505</a>
<a class="sourceLine" id="cb16-94" data-line-number="94">## </a>
<a class="sourceLine" id="cb16-95" data-line-number="95">## $test.inds[[3]]</a>
<a class="sourceLine" id="cb16-96" data-line-number="96">##   [1]   1   2   5   8  10  12  14  21  29  30  33  35  36  37  44  46  50</a>
<a class="sourceLine" id="cb16-97" data-line-number="97">##  [18]  53  54  63  69  73  77  79  80  82  84  88  90  92 103 105 107 108</a>
<a class="sourceLine" id="cb16-98" data-line-number="98">##  [35] 109 112 113 115 116 118 121 123 124 128 129 139 140 143 148 149 152</a>
<a class="sourceLine" id="cb16-99" data-line-number="99">##  [52] 153 157 161 162 164 167 170 174 177 180 181 182 187 188 195 198 203</a>
<a class="sourceLine" id="cb16-100" data-line-number="100">##  [69] 204 206 211 219 222 223 225 228 234 235 238 241 242 243 244 252 253</a>
<a class="sourceLine" id="cb16-101" data-line-number="101">##  [86] 254 256 257 260 261 271 276 278 281 287 291 292 296 302 305 307 308</a>
<a class="sourceLine" id="cb16-102" data-line-number="102">## [103] 309 310 313 318 321 322 323 326 329 332 333 340 355 356 360 363 367</a>
<a class="sourceLine" id="cb16-103" data-line-number="103">## [120] 368 369 370 372 373 376 378 383 386 390 391 393 394 400 401 402 406</a>
<a class="sourceLine" id="cb16-104" data-line-number="104">## [137] 409 412 413 414 415 418 424 427 429 434 437 438 446 447 451 454 456</a>
<a class="sourceLine" id="cb16-105" data-line-number="105">## [154] 457 462 464 477 480 483 484 488 493 495 498 499 500 503 504</a></code></pre></div>
</div>
</div>
<div id="stratification-blocking-and-grouping" class="section level2">
<h2 class="hasAnchor">
<a href="#stratification-blocking-and-grouping" class="anchor"></a>Stratification, Blocking and Grouping</h2>
<ul>
<li><p><em>Stratification</em> with respect to a categorical variable makes sure that all its values are present in each training and test set in approximately the same proportion as in the original data set. Stratification is possible with regard to categorical target variables (and thus for supervised classification and survival analysis) or categorical explanatory variables.</p></li>
<li><p><em>Blocking</em> refers to the situation that subsets of observations belong together and must not be separated during resampling. Hence, for one train/test set pair the entire block is either in the training set or in the test set.</p></li>
<li><p><em>Grouping</em> means that the folds are composed out of a factor vector given by the user. In this setting no repetitions are possible as all folds are predefined. The approach can also be used in a nested resampling setting. Note the subtle but important difference to â€œBlockingâ€: In â€œBlockingâ€ factor levels are respected when splitting into train and test (e.g.Â the test set could be composed out of two given factor levels) whereas in â€œGroupingâ€ the folds will strictly follow the factor level grouping (meaning that the test set will always only consist of one factor level).</p></li>
</ul>
<div id="stratification-with-respect-to-the-target-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#stratification-with-respect-to-the-target-variables" class="anchor"></a>Stratification with respect to the target variable(s)</h3>
<p>For classification, it is usually desirable to have the same proportion of the classes in all of the partitions of the original data set. This is particularly useful in the case of imbalanced classes and small data sets. Otherwise, it may happen that observations of less frequent classes are missing in some of the training sets which can decrease the performance of the learner, or lead to model crashes. In order to conduct stratified resampling, set <code>stratify = TRUE</code> in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># 3-fold cross-validation</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3"></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">r</a>
<a class="sourceLine" id="cb17-6" data-line-number="6">## Resample Result</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">## Task: iris-example</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">## Learner: classif.lda</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">## Aggr perf: mmce.test.mean=0.0200000</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">## Runtime: 0.0211823</a></code></pre></div>
<p>Stratification is also available for survival tasks. Here the stratification balances the censoring rate.</p>
</div>
<div id="stratification-with-respect-to-explanatory-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#stratification-with-respect-to-explanatory-variables" class="anchor"></a>Stratification with respect to explanatory variables</h3>
<p>Sometimes it is required to also stratify on the input data, e.g., to ensure that all subgroups are represented in all training and test sets. To stratify on the input columns, specify <code>factor</code> columns of your task data via <code>stratify.cols</code>.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.rpart"</span>, bh.task, rdesc, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">r</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">## Resample Result</a>
<a class="sourceLine" id="cb18-6" data-line-number="6">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb18-7" data-line-number="7">## Learner: regr.rpart</a>
<a class="sourceLine" id="cb18-8" data-line-number="8">## Aggr perf: mse.test.mean=23.5088784</a>
<a class="sourceLine" id="cb18-9" data-line-number="9">## Runtime: 0.0385706</a></code></pre></div>
</div>
<div id="blocking-cv-with-flexible-predefined-indices" class="section level3">
<h3 class="hasAnchor">
<a href="#blocking-cv-with-flexible-predefined-indices" class="anchor"></a>Blocking: CV with flexible predefined indices</h3>
<p>If some observations â€œbelong togetherâ€ and must not be separated when splitting the data into training and test sets for resampling, you can supply this information via a <code>blocking</code> factor when creating the <a href="task.html" target="_blank">task</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># 5 blocks containing 30 observations each</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">task =<span class="st"> </span><span class="kw"><a href="../../reference/Task.html">makeClassifTask</a></span>(<span class="dt">data =</span> iris, <span class="dt">target =</span> <span class="st">"Species"</span>, <span class="dt">blocking =</span> <span class="kw">factor</span>(<span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dt">each =</span> <span class="dv">30</span>)))</a>
<a class="sourceLine" id="cb19-3" data-line-number="3">task</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">## Supervised task: iris</a>
<a class="sourceLine" id="cb19-5" data-line-number="5">## Type: classif</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">## Target: Species</a>
<a class="sourceLine" id="cb19-7" data-line-number="7">## Observations: 150</a>
<a class="sourceLine" id="cb19-8" data-line-number="8">## Features:</a>
<a class="sourceLine" id="cb19-9" data-line-number="9">##    numerics     factors     ordered functionals </a>
<a class="sourceLine" id="cb19-10" data-line-number="10">##           4           0           0           0 </a>
<a class="sourceLine" id="cb19-11" data-line-number="11">## Missings: FALSE</a>
<a class="sourceLine" id="cb19-12" data-line-number="12">## Has weights: FALSE</a>
<a class="sourceLine" id="cb19-13" data-line-number="13">## Has blocking: TRUE</a>
<a class="sourceLine" id="cb19-14" data-line-number="14">## Has coordinates: FALSE</a>
<a class="sourceLine" id="cb19-15" data-line-number="15">## Classes: 3</a>
<a class="sourceLine" id="cb19-16" data-line-number="16">##     setosa versicolor  virginica </a>
<a class="sourceLine" id="cb19-17" data-line-number="17">##         50         50         50 </a>
<a class="sourceLine" id="cb19-18" data-line-number="18">## Positive class: NA</a></code></pre></div>
<p>When performing a simple â€œCVâ€ resampling and inspecting the result, we see that the training indices in fold 1 correspond to the specified grouping set in <code>blocking</code> in the task. To initiate this method, we need to set <code>blocking.cv = TRUE</code> when creating the resample description object.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">blocking.cv =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">## Measures:             mmce</a>
<a class="sourceLine" id="cb20-5" data-line-number="5">## [Resample] iter 1:    0.0000000</a>
<a class="sourceLine" id="cb20-6" data-line-number="6">## [Resample] iter 2:    0.0500000</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">## [Resample] iter 3:    0.0000000</a>
<a class="sourceLine" id="cb20-8" data-line-number="8">## </a>
<a class="sourceLine" id="cb20-9" data-line-number="9">## Aggregated Result: mmce.test.mean=0.0166667</a>
<a class="sourceLine" id="cb20-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb20-11" data-line-number="11"></a>
<a class="sourceLine" id="cb20-12" data-line-number="12"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb20-13" data-line-number="13">##  [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17</a>
<a class="sourceLine" id="cb20-14" data-line-number="14">## [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  61  62  63  64</a>
<a class="sourceLine" id="cb20-15" data-line-number="15">## [35]  65  66  67  68  69  70  71  72  73  74  75  76  77  78  79  80  81</a>
<a class="sourceLine" id="cb20-16" data-line-number="16">## [52]  82  83  84  85  86  87  88  89  90  91  92  93  94  95  96  97  98</a>
<a class="sourceLine" id="cb20-17" data-line-number="17">## [69]  99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115</a>
<a class="sourceLine" id="cb20-18" data-line-number="18">## [86] 116 117 118 119 120</a></code></pre></div>
<p>However, please note the effects of this method: The created folds will not have the same size! Here, Fold 1 has a 120/30 split while the other two folds have a 90/60 split.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb21-2" data-line-number="2">## [[1]]</a>
<a class="sourceLine" id="cb21-3" data-line-number="3">## [1] 90</a>
<a class="sourceLine" id="cb21-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb21-5" data-line-number="5">## [[2]]</a>
<a class="sourceLine" id="cb21-6" data-line-number="6">## [1] 90</a>
<a class="sourceLine" id="cb21-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb21-8" data-line-number="8">## [[3]]</a>
<a class="sourceLine" id="cb21-9" data-line-number="9">## [1] 120</a></code></pre></div>
<p>This is caused by the fact that we supplied five groups that must belong together but only used a three fold resampling strategy here.</p>
</div>
<div id="grouping-cv-with-fixed-predefined-indices" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-cv-with-fixed-predefined-indices" class="anchor"></a>Grouping: CV with fixed predefined indices</h3>
<p>There is a second way of using predefined indices in resampling in <code>mlr</code>: Constructing the folds based on the supplied indices in <code>blocking</code>. We refer to this method here as â€œgroupingâ€ to distinguish it from â€œblockingâ€. This method is more restrictive in the way that it will always use the number of levels supplied via <code>blocking</code> as the number of folds. To use this method, we need to set <code>fixed = TRUE</code> instead of <code>blocking.cv</code> when creating the resampling description object.</p>
<p>We can leave out the <code>iters</code> argument, as it will be set internally to the number of supplied factor levels.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb22-2" data-line-number="2">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, task, rdesc)</a>
<a class="sourceLine" id="cb22-3" data-line-number="3">## Warning in instantiateResampleInstance.CVDesc(desc, size, task): Adjusting</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">## levels to match number of blocking levels.</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb22-6" data-line-number="6">## Measures:             mmce</a>
<a class="sourceLine" id="cb22-7" data-line-number="7">## [Resample] iter 1:    0.1000000</a>
<a class="sourceLine" id="cb22-8" data-line-number="8">## [Resample] iter 2:    0.1000000</a>
<a class="sourceLine" id="cb22-9" data-line-number="9">## [Resample] iter 3:    0.0000000</a>
<a class="sourceLine" id="cb22-10" data-line-number="10">## [Resample] iter 4:    0.0000000</a>
<a class="sourceLine" id="cb22-11" data-line-number="11">## [Resample] iter 5:    0.0000000</a>
<a class="sourceLine" id="cb22-12" data-line-number="12">## </a>
<a class="sourceLine" id="cb22-13" data-line-number="13">## Aggregated Result: mmce.test.mean=0.0400000</a>
<a class="sourceLine" id="cb22-14" data-line-number="14">## </a>
<a class="sourceLine" id="cb22-15" data-line-number="15"><span class="kw">sort</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds[[<span class="dv">1</span>]])</a>
<a class="sourceLine" id="cb22-16" data-line-number="16">##   [1]   1   2   3   4   5   6   7   8   9  10  11  12  13  14  15  16  17</a>
<a class="sourceLine" id="cb22-17" data-line-number="17">##  [18]  18  19  20  21  22  23  24  25  26  27  28  29  30  31  32  33  34</a>
<a class="sourceLine" id="cb22-18" data-line-number="18">##  [35]  35  36  37  38  39  40  41  42  43  44  45  46  47  48  49  50  51</a>
<a class="sourceLine" id="cb22-19" data-line-number="19">##  [52]  52  53  54  55  56  57  58  59  60  61  62  63  64  65  66  67  68</a>
<a class="sourceLine" id="cb22-20" data-line-number="20">##  [69]  69  70  71  72  73  74  75  76  77  78  79  80  81  82  83  84  85</a>
<a class="sourceLine" id="cb22-21" data-line-number="21">##  [86]  86  87  88  89  90  91  92  93  94  95  96  97  98  99 100 101 102</a>
<a class="sourceLine" id="cb22-22" data-line-number="22">## [103] 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119</a>
<a class="sourceLine" id="cb22-23" data-line-number="23">## [120] 120</a></code></pre></div>
<p>You can see that we automatically created five folds in which the test set always corresponds to one factor level.</p>
<p>Doing it this way also means that we cannot do repeated CV because there is no way to create multiple shuffled folds of this fixed arrangement.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">lapply</span>(p<span class="op">$</span>pred<span class="op">$</span>instance<span class="op">$</span>train.inds, <span class="cf">function</span>(x) <span class="kw">length</span>(x))</a>
<a class="sourceLine" id="cb23-2" data-line-number="2">## [[1]]</a>
<a class="sourceLine" id="cb23-3" data-line-number="3">## [1] 120</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">## </a>
<a class="sourceLine" id="cb23-5" data-line-number="5">## [[2]]</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">## [1] 120</a>
<a class="sourceLine" id="cb23-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb23-8" data-line-number="8">## [[3]]</a>
<a class="sourceLine" id="cb23-9" data-line-number="9">## [1] 120</a>
<a class="sourceLine" id="cb23-10" data-line-number="10">## </a>
<a class="sourceLine" id="cb23-11" data-line-number="11">## [[4]]</a>
<a class="sourceLine" id="cb23-12" data-line-number="12">## [1] 120</a>
<a class="sourceLine" id="cb23-13" data-line-number="13">## </a>
<a class="sourceLine" id="cb23-14" data-line-number="14">## [[5]]</a>
<a class="sourceLine" id="cb23-15" data-line-number="15">## [1] 120</a></code></pre></div>
<p>However, this method can also be used in nested resampling settings (e.g.Â in hyperparameter tuning). In the inner level, the factor levels are honored and the function simply creates one fold less than in the outer level.</p>
<p>Please note that the <code>iters</code> argument has no effect in <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> if <code>fixed = TRUE</code>. The number of folds will be automatically set based on the supplied number of factor levels via <code>blocking</code>. In the inner level, the number of folds will simply be one less than in the outer level.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co"># test fixed in nested resampling</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">lrn =<span class="st"> </span><span class="kw"><a href="../../reference/makeLearner.html">makeLearner</a></span>(<span class="st">"classif.lda"</span>)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3">ctrl &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneControlRandom.html">makeTuneControlRandom</a></span>(<span class="dt">maxit =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb24-4" data-line-number="4">ps &lt;-<span class="st"> </span><span class="kw">makeParamSet</span>(<span class="kw">makeNumericParam</span>(<span class="st">"nu"</span>, <span class="dt">lower =</span> <span class="dv">2</span>, <span class="dt">upper =</span> <span class="dv">20</span>))</a>
<a class="sourceLine" id="cb24-5" data-line-number="5">inner =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-6" data-line-number="6">outer =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">fixed =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb24-7" data-line-number="7">tune_wrapper =<span class="st"> </span><span class="kw"><a href="../../reference/makeTuneWrapper.html">makeTuneWrapper</a></span>(lrn, <span class="dt">resampling =</span> inner, <span class="dt">par.set =</span> ps,</a>
<a class="sourceLine" id="cb24-8" data-line-number="8">  <span class="dt">control =</span> ctrl, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb24-9" data-line-number="9"></a>
<a class="sourceLine" id="cb24-10" data-line-number="10">p =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(tune_wrapper, task, outer, <span class="dt">show.info =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb24-11" data-line-number="11">  <span class="dt">extract =</span> getTuneResult)</a></code></pre></div>
<p>To check on the inner resampling indices, you can call <code><a href="../../reference/getResamplingIndices.html">getResamplingIndices(inner = TRUE)</a></code>. You can see that for every outer fold (List of 5), four inner folds were created that respect the grouping supplied via the <code>blocking</code> argument.</p>
<p>Of course you can also use a normal random sampling â€œCVâ€ description in the inner level by just setting <code>fixed = FALSE</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">str</span>(<span class="kw"><a href="../../reference/getResamplingIndices.html">getResamplingIndices</a></span>(p, <span class="dt">inner =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb25-2" data-line-number="2">## List of 5</a>
<a class="sourceLine" id="cb25-3" data-line-number="3">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">##   .. ..$ : int [1:90] 93 28 27 4 108 19 43 56 22 51 ...</a>
<a class="sourceLine" id="cb25-6" data-line-number="6">##   .. ..$ : int [1:90] 134 93 108 43 136 56 51 57 116 132 ...</a>
<a class="sourceLine" id="cb25-7" data-line-number="7">##   .. ..$ : int [1:90] 134 93 28 27 4 108 19 136 22 15 ...</a>
<a class="sourceLine" id="cb25-8" data-line-number="8">##   .. ..$ : int [1:90] 134 28 27 4 19 43 136 56 22 51 ...</a>
<a class="sourceLine" id="cb25-9" data-line-number="9">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-10" data-line-number="10">##   .. ..$ : int [1:30] 147 137 130 132 136 122 143 148 125 126 ...</a>
<a class="sourceLine" id="cb25-11" data-line-number="11">##   .. ..$ : int [1:30] 5 8 13 16 28 19 6 11 15 3 ...</a>
<a class="sourceLine" id="cb25-12" data-line-number="12">##   .. ..$ : int [1:30] 39 45 41 44 36 46 52 35 49 53 ...</a>
<a class="sourceLine" id="cb25-13" data-line-number="13">##   .. ..$ : int [1:30] 101 107 112 119 95 97 117 100 115 113 ...</a>
<a class="sourceLine" id="cb25-14" data-line-number="14">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-15" data-line-number="15">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-16" data-line-number="16">##   .. ..$ : int [1:90] 79 67 31 78 25 75 41 65 37 83 ...</a>
<a class="sourceLine" id="cb25-17" data-line-number="17">##   .. ..$ : int [1:90] 31 99 25 113 41 37 102 96 11 1 ...</a>
<a class="sourceLine" id="cb25-18" data-line-number="18">##   .. ..$ : int [1:90] 79 67 99 78 25 113 75 65 83 102 ...</a>
<a class="sourceLine" id="cb25-19" data-line-number="19">##   .. ..$ : int [1:90] 79 67 31 99 78 113 75 41 65 37 ...</a>
<a class="sourceLine" id="cb25-20" data-line-number="20">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-21" data-line-number="21">##   .. ..$ : int [1:30] 101 107 112 119 95 97 117 100 115 113 ...</a>
<a class="sourceLine" id="cb25-22" data-line-number="22">##   .. ..$ : int [1:30] 86 65 71 74 77 88 82 84 89 83 ...</a>
<a class="sourceLine" id="cb25-23" data-line-number="23">##   .. ..$ : int [1:30] 39 45 41 44 36 46 52 35 49 53 ...</a>
<a class="sourceLine" id="cb25-24" data-line-number="24">##   .. ..$ : int [1:30] 5 8 13 16 28 19 6 11 15 3 ...</a>
<a class="sourceLine" id="cb25-25" data-line-number="25">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-26" data-line-number="26">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-27" data-line-number="27">##   .. ..$ : int [1:90] 87 145 150 69 149 13 19 17 15 80 ...</a>
<a class="sourceLine" id="cb25-28" data-line-number="28">##   .. ..$ : int [1:90] 87 69 111 13 115 106 113 19 17 15 ...</a>
<a class="sourceLine" id="cb25-29" data-line-number="29">##   .. ..$ : int [1:90] 87 145 150 69 149 111 115 106 113 80 ...</a>
<a class="sourceLine" id="cb25-30" data-line-number="30">##   .. ..$ : int [1:90] 145 150 149 111 13 115 106 113 19 17 ...</a>
<a class="sourceLine" id="cb25-31" data-line-number="31">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-32" data-line-number="32">##   .. ..$ : int [1:30] 101 107 112 119 95 97 117 100 115 113 ...</a>
<a class="sourceLine" id="cb25-33" data-line-number="33">##   .. ..$ : int [1:30] 147 137 130 132 136 122 143 148 125 126 ...</a>
<a class="sourceLine" id="cb25-34" data-line-number="34">##   .. ..$ : int [1:30] 5 8 13 16 28 19 6 11 15 3 ...</a>
<a class="sourceLine" id="cb25-35" data-line-number="35">##   .. ..$ : int [1:30] 86 65 71 74 77 88 82 84 89 83 ...</a>
<a class="sourceLine" id="cb25-36" data-line-number="36">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-37" data-line-number="37">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-38" data-line-number="38">##   .. ..$ : int [1:90] 84 115 140 86 76 69 91 63 130 74 ...</a>
<a class="sourceLine" id="cb25-39" data-line-number="39">##   .. ..$ : int [1:90] 84 140 86 76 42 40 69 55 49 63 ...</a>
<a class="sourceLine" id="cb25-40" data-line-number="40">##   .. ..$ : int [1:90] 84 115 86 76 42 40 69 91 55 49 ...</a>
<a class="sourceLine" id="cb25-41" data-line-number="41">##   .. ..$ : int [1:90] 115 140 42 40 91 55 49 130 53 51 ...</a>
<a class="sourceLine" id="cb25-42" data-line-number="42">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-43" data-line-number="43">##   .. ..$ : int [1:30] 39 45 41 44 36 46 52 35 49 53 ...</a>
<a class="sourceLine" id="cb25-44" data-line-number="44">##   .. ..$ : int [1:30] 101 107 112 119 95 97 117 100 115 113 ...</a>
<a class="sourceLine" id="cb25-45" data-line-number="45">##   .. ..$ : int [1:30] 147 137 130 132 136 122 143 148 125 126 ...</a>
<a class="sourceLine" id="cb25-46" data-line-number="46">##   .. ..$ : int [1:30] 86 65 71 74 77 88 82 84 89 83 ...</a>
<a class="sourceLine" id="cb25-47" data-line-number="47">##  $ :List of 2</a>
<a class="sourceLine" id="cb25-48" data-line-number="48">##   ..$ train.inds:List of 4</a>
<a class="sourceLine" id="cb25-49" data-line-number="49">##   .. ..$ : int [1:90] 4 143 78 21 125 128 130 145 62 25 ...</a>
<a class="sourceLine" id="cb25-50" data-line-number="50">##   .. ..$ : int [1:90] 4 78 21 42 62 25 54 1 79 35 ...</a>
<a class="sourceLine" id="cb25-51" data-line-number="51">##   .. ..$ : int [1:90] 143 78 125 128 130 42 145 62 54 149 ...</a>
<a class="sourceLine" id="cb25-52" data-line-number="52">##   .. ..$ : int [1:90] 4 143 21 125 128 130 42 145 25 54 ...</a>
<a class="sourceLine" id="cb25-53" data-line-number="53">##   ..$ test.inds :List of 4</a>
<a class="sourceLine" id="cb25-54" data-line-number="54">##   .. ..$ : int [1:30] 39 45 41 44 36 46 52 35 49 53 ...</a>
<a class="sourceLine" id="cb25-55" data-line-number="55">##   .. ..$ : int [1:30] 147 137 130 132 136 122 143 148 125 126 ...</a>
<a class="sourceLine" id="cb25-56" data-line-number="56">##   .. ..$ : int [1:30] 5 8 13 16 28 19 6 11 15 3 ...</a>
<a class="sourceLine" id="cb25-57" data-line-number="57">##   .. ..$ : int [1:30] 86 65 71 74 77 88 82 84 89 83 ...</a></code></pre></div>
</div>
</div>
<div id="resample-descriptions-and-resample-instances" class="section level2">
<h2 class="hasAnchor">
<a href="#resample-descriptions-and-resample-instances" class="anchor"></a>Resample descriptions and resample instances</h2>
<p>As already mentioned, you can specify a resampling strategy using function <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb26-2" data-line-number="2">rdesc</a>
<a class="sourceLine" id="cb26-3" data-line-number="3">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb26-4" data-line-number="4">## Predict: test</a>
<a class="sourceLine" id="cb26-5" data-line-number="5">## Stratification: FALSE</a>
<a class="sourceLine" id="cb26-6" data-line-number="6"></a>
<a class="sourceLine" id="cb26-7" data-line-number="7"><span class="kw">str</span>(rdesc)</a>
<a class="sourceLine" id="cb26-8" data-line-number="8">## List of 6</a>
<a class="sourceLine" id="cb26-9" data-line-number="9">##  $ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb26-10" data-line-number="10">##  $ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb26-11" data-line-number="11">##  $ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb26-12" data-line-number="12">##  $ iters      : int 3</a>
<a class="sourceLine" id="cb26-13" data-line-number="13">##  $ predict    : chr "test"</a>
<a class="sourceLine" id="cb26-14" data-line-number="14">##  $ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb26-15" data-line-number="15">##  - attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb26-16" data-line-number="16"></a>
<a class="sourceLine" id="cb26-17" data-line-number="17"><span class="kw">str</span>(<span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Subsample"</span>, <span class="dt">stratify.cols =</span> <span class="st">"chas"</span>))</a>
<a class="sourceLine" id="cb26-18" data-line-number="18">## List of 8</a>
<a class="sourceLine" id="cb26-19" data-line-number="19">##  $ split        : num 0.667</a>
<a class="sourceLine" id="cb26-20" data-line-number="20">##  $ id           : chr "subsampling"</a>
<a class="sourceLine" id="cb26-21" data-line-number="21">##  $ iters        : int 30</a>
<a class="sourceLine" id="cb26-22" data-line-number="22">##  $ predict      : chr "test"</a>
<a class="sourceLine" id="cb26-23" data-line-number="23">##  $ stratify     : logi FALSE</a>
<a class="sourceLine" id="cb26-24" data-line-number="24">##  $ stratify.cols: chr "chas"</a>
<a class="sourceLine" id="cb26-25" data-line-number="25">##  $ fixed        : logi FALSE</a>
<a class="sourceLine" id="cb26-26" data-line-number="26">##  $ blocking.cv  : logi FALSE</a>
<a class="sourceLine" id="cb26-27" data-line-number="27">##  - attr(*, "class")= chr [1:2] "SubsampleDesc" "ResampleDesc"</a></code></pre></div>
<p>The result <code>rdesc</code> inherits from class <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) (short for resample description) and, in principle, contains all necessary information about the resampling strategy including the number of iterations, the proportion of training and test sets, stratification variables, etc.</p>
<p>Given either the size of the data set at hand or the <code><a href="../../reference/Task.html">Task()</a></code>, function <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> draws the training and test sets according to the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>).</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="co"># Create a resample instance based an a task</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, iris.task)</a>
<a class="sourceLine" id="cb27-3" data-line-number="3">rin</a>
<a class="sourceLine" id="cb27-4" data-line-number="4">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb27-5" data-line-number="5">## Resample description: cross-validation with 3 iterations.</a>
<a class="sourceLine" id="cb27-6" data-line-number="6">## Predict: test</a>
<a class="sourceLine" id="cb27-7" data-line-number="7">## Stratification: FALSE</a>
<a class="sourceLine" id="cb27-8" data-line-number="8"></a>
<a class="sourceLine" id="cb27-9" data-line-number="9"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb27-10" data-line-number="10">## List of 5</a>
<a class="sourceLine" id="cb27-11" data-line-number="11">##  $ desc      :List of 6</a>
<a class="sourceLine" id="cb27-12" data-line-number="12">##   ..$ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb27-13" data-line-number="13">##   ..$ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb27-14" data-line-number="14">##   ..$ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb27-15" data-line-number="15">##   ..$ iters      : int 3</a>
<a class="sourceLine" id="cb27-16" data-line-number="16">##   ..$ predict    : chr "test"</a>
<a class="sourceLine" id="cb27-17" data-line-number="17">##   ..$ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb27-18" data-line-number="18">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb27-19" data-line-number="19">##  $ size      : int 150</a>
<a class="sourceLine" id="cb27-20" data-line-number="20">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb27-21" data-line-number="21">##   ..$ : int [1:100] 105 34 64 36 35 12 126 46 53 10 ...</a>
<a class="sourceLine" id="cb27-22" data-line-number="22">##   ..$ : int [1:100] 105 34 22 133 15 142 111 46 150 11 ...</a>
<a class="sourceLine" id="cb27-23" data-line-number="23">##   ..$ : int [1:100] 22 133 64 36 15 35 12 142 111 126 ...</a>
<a class="sourceLine" id="cb27-24" data-line-number="24">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb27-25" data-line-number="25">##   ..$ : int [1:50] 4 11 15 16 17 18 21 22 24 28 ...</a>
<a class="sourceLine" id="cb27-26" data-line-number="26">##   ..$ : int [1:50] 2 3 5 10 12 14 23 25 31 35 ...</a>
<a class="sourceLine" id="cb27-27" data-line-number="27">##   ..$ : int [1:50] 1 6 7 8 9 13 19 20 26 27 ...</a>
<a class="sourceLine" id="cb27-28" data-line-number="28">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb27-29" data-line-number="29">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb27-30" data-line-number="30"></a>
<a class="sourceLine" id="cb27-31" data-line-number="31"><span class="co"># Create a resample instance given the size of the data set</span></a>
<a class="sourceLine" id="cb27-32" data-line-number="32">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">size =</span> <span class="kw">nrow</span>(iris))</a>
<a class="sourceLine" id="cb27-33" data-line-number="33"><span class="kw">str</span>(rin)</a>
<a class="sourceLine" id="cb27-34" data-line-number="34">## List of 5</a>
<a class="sourceLine" id="cb27-35" data-line-number="35">##  $ desc      :List of 6</a>
<a class="sourceLine" id="cb27-36" data-line-number="36">##   ..$ fixed      : logi FALSE</a>
<a class="sourceLine" id="cb27-37" data-line-number="37">##   ..$ blocking.cv: logi FALSE</a>
<a class="sourceLine" id="cb27-38" data-line-number="38">##   ..$ id         : chr "cross-validation"</a>
<a class="sourceLine" id="cb27-39" data-line-number="39">##   ..$ iters      : int 3</a>
<a class="sourceLine" id="cb27-40" data-line-number="40">##   ..$ predict    : chr "test"</a>
<a class="sourceLine" id="cb27-41" data-line-number="41">##   ..$ stratify   : logi FALSE</a>
<a class="sourceLine" id="cb27-42" data-line-number="42">##   ..- attr(*, "class")= chr [1:2] "CVDesc" "ResampleDesc"</a>
<a class="sourceLine" id="cb27-43" data-line-number="43">##  $ size      : int 150</a>
<a class="sourceLine" id="cb27-44" data-line-number="44">##  $ train.inds:List of 3</a>
<a class="sourceLine" id="cb27-45" data-line-number="45">##   ..$ : int [1:100] 65 9 13 120 105 21 99 31 132 97 ...</a>
<a class="sourceLine" id="cb27-46" data-line-number="46">##   ..$ : int [1:100] 44 9 13 120 105 21 106 99 31 25 ...</a>
<a class="sourceLine" id="cb27-47" data-line-number="47">##   ..$ : int [1:100] 65 44 106 25 131 132 16 93 79 111 ...</a>
<a class="sourceLine" id="cb27-48" data-line-number="48">##  $ test.inds :List of 3</a>
<a class="sourceLine" id="cb27-49" data-line-number="49">##   ..$ : int [1:50] 4 10 12 14 18 19 23 24 25 27 ...</a>
<a class="sourceLine" id="cb27-50" data-line-number="50">##   ..$ : int [1:50] 5 7 8 11 16 17 26 38 40 41 ...</a>
<a class="sourceLine" id="cb27-51" data-line-number="51">##   ..$ : int [1:50] 1 2 3 6 9 13 15 20 21 22 ...</a>
<a class="sourceLine" id="cb27-52" data-line-number="52">##  $ group     : Factor w/ 0 levels: </a>
<a class="sourceLine" id="cb27-53" data-line-number="53">##  - attr(*, "class")= chr "ResampleInstance"</a>
<a class="sourceLine" id="cb27-54" data-line-number="54"></a>
<a class="sourceLine" id="cb27-55" data-line-number="55"><span class="co"># Access the indices of the training observations in iteration 3</span></a>
<a class="sourceLine" id="cb27-56" data-line-number="56">rin<span class="op">$</span>train.inds[[<span class="dv">3</span>]]</a>
<a class="sourceLine" id="cb27-57" data-line-number="57">##   [1]  65  44 106  25 131 132  16  93  79 111 108  88 138  55 129 121  56</a>
<a class="sourceLine" id="cb27-58" data-line-number="58">##  [18]  98 147  86  71  40  10 102  70  48 118  32  27  41  94  75  76 114</a>
<a class="sourceLine" id="cb27-59" data-line-number="59">##  [35]  78  37 150 109  36  26 103 146  45  61  85 123 125  81 142  19 107</a>
<a class="sourceLine" id="cb27-60" data-line-number="60">##  [52] 101  83  52   8 128  67 110   5  43 137  49  42  51  29 124  91  50</a>
<a class="sourceLine" id="cb27-61" data-line-number="61">##  [69]  18  92   4  12 136  39  82 141  24  23  63 139  53  74  17 100  72</a>
<a class="sourceLine" id="cb27-62" data-line-number="62">##  [86] 140  38  68  14 117 112  89  95 119  59 133  11 144  35   7</a></code></pre></div>
<p>The result <code>rin</code> inherits from class <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) and contains <code>list</code>s of index vectors for the train and test sets.</p>
<p>If a <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) is passed to <code><a href="../../reference/resample.html">resample()</a></code>, it is instantiated internally. Naturally, it is also possible to pass a <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) directly.</p>
<p>While the separation between resample descriptions, resample instances, and the <code><a href="../../reference/resample.html">resample()</a></code> function itself seems overly complicated, it has several advantages:</p>
<ul>
<li>Resample instances readily allow for paired experiments, that is comparing the performance of several learners on exactly the same training and test sets. This is particularly useful if you want to add another method to a comparison experiment you already did. Moreover, you can store the resample instance along with your data in order to be able to reproduce your results later on.</li>
</ul>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb28-2" data-line-number="2">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleInstance.html">makeResampleInstance</a></span>(rdesc, <span class="dt">task =</span> iris.task)</a>
<a class="sourceLine" id="cb28-3" data-line-number="3"></a>
<a class="sourceLine" id="cb28-4" data-line-number="4"><span class="co"># Calculate the performance of two learners based on the same resample instance</span></a>
<a class="sourceLine" id="cb28-5" data-line-number="5">r.lda =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.lda"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-6" data-line-number="6">r.rpart =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rin, <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb28-7" data-line-number="7">r.lda<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb28-8" data-line-number="8">## mmce.test.mean </a>
<a class="sourceLine" id="cb28-9" data-line-number="9">##           0.02</a>
<a class="sourceLine" id="cb28-10" data-line-number="10"></a>
<a class="sourceLine" id="cb28-11" data-line-number="11">r.rpart<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb28-12" data-line-number="12">## mmce.test.mean </a>
<a class="sourceLine" id="cb28-13" data-line-number="13">##     0.05333333</a></code></pre></div>
<ul>
<li>In order to add further resampling methods you can simply derive from the <code>ResampleDesc</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>) and <code>ResampleInstance</code> (<code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code>) classes, but you do neither have to touch <code><a href="../../reference/resample.html">resample()</a></code> nor any further methods that use the resampling strategy.</li>
</ul>
<p>Usually, when calling <code><a href="../../reference/makeResampleInstance.html">makeResampleInstance()</a></code> the train and test index sets are drawn randomly. Mainly for <em>holdout</em> (<em>test sample</em>) <em>estimation</em> you might want full control about the training and tests set and specify them manually. This can be done using function <code><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance()</a></code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">rin =<span class="st"> </span><span class="kw"><a href="../../reference/makeFixedHoldoutInstance.html">makeFixedHoldoutInstance</a></span>(<span class="dt">train.inds =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">100</span>, <span class="dt">test.inds =</span> <span class="dv">101</span><span class="op">:</span><span class="dv">150</span>, <span class="dt">size =</span> <span class="dv">150</span>)</a>
<a class="sourceLine" id="cb29-2" data-line-number="2">rin</a>
<a class="sourceLine" id="cb29-3" data-line-number="3">## Resample instance for 150 cases.</a>
<a class="sourceLine" id="cb29-4" data-line-number="4">## Resample description: holdout with 0.67 split rate.</a>
<a class="sourceLine" id="cb29-5" data-line-number="5">## Predict: test</a>
<a class="sourceLine" id="cb29-6" data-line-number="6">## Stratification: FALSE</a></code></pre></div>
</div>
<div id="aggregating-performance-values" class="section level2">
<h2 class="hasAnchor">
<a href="#aggregating-performance-values" class="anchor"></a>Aggregating performance values</h2>
<p>In each resampling iteration <span class="math inline">\(b = 1,\ldots,B\)</span> we get performance values <span class="math inline">\(S(D^{*b}, D \setminus D^{*b})\)</span> (for each measure we wish to calculate), which are then aggregated to an overall performance.</p>
<p>For the great majority of common resampling strategies (like holdout, cross-validation, subsampling) performance values are calculated on the test data sets only and for most measures aggregated by taking the mean (<code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>)).</p>
<p>Each performance <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) in <code>mlr</code> has a corresponding default aggregation method which is stored in slot <code>$aggr</code>. The default aggregation for most measures is <code>test.mean</code>(<code><a href="../../reference/aggregations.html">aggregations()</a></code>). One exception is the root mean square error (<a href="measures.html" target="_blank">rmse</a>).</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="co"># Mean misclassification error</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">mmce<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">## Aggregation function: test.mean</a>
<a class="sourceLine" id="cb30-4" data-line-number="4"></a>
<a class="sourceLine" id="cb30-5" data-line-number="5">mmce<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb30-7" data-line-number="7">## mean(perf.test)</a>
<a class="sourceLine" id="cb30-8" data-line-number="8">## &lt;bytecode: 0x9fe7520&gt;</a>
<a class="sourceLine" id="cb30-9" data-line-number="9">## &lt;environment: namespace:mlr&gt;</a>
<a class="sourceLine" id="cb30-10" data-line-number="10"></a>
<a class="sourceLine" id="cb30-11" data-line-number="11"><span class="co"># Root mean square error</span></a>
<a class="sourceLine" id="cb30-12" data-line-number="12">rmse<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb30-13" data-line-number="13">## Aggregation function: test.rmse</a>
<a class="sourceLine" id="cb30-14" data-line-number="14"></a>
<a class="sourceLine" id="cb30-15" data-line-number="15">rmse<span class="op">$</span>aggr<span class="op">$</span>fun</a>
<a class="sourceLine" id="cb30-16" data-line-number="16">## function (task, perf.test, perf.train, measure, group, pred) </a>
<a class="sourceLine" id="cb30-17" data-line-number="17">## sqrt(mean(perf.test^2))</a>
<a class="sourceLine" id="cb30-18" data-line-number="18">## &lt;bytecode: 0x12bdb2c8&gt;</a>
<a class="sourceLine" id="cb30-19" data-line-number="19">## &lt;environment: namespace:mlr&gt;</a></code></pre></div>
<p>You can change the aggregation method of a <code>Measure</code> (<code><a href="../../reference/makeMeasure.html">makeMeasure()</a></code>) via function <code><a href="../../reference/setAggregation.html">setAggregation()</a></code>. All available aggregation schemes are listed on the <code><a href="../../reference/aggregations.html">aggregations()</a></code> documentation page.</p>
<div id="example-one-measure-with-different-aggregations" class="section level4">
<h4 class="hasAnchor">
<a href="#example-one-measure-with-different-aggregations" class="anchor"></a>Example: One measure with different aggregations</h4>
<p>The aggregation schemes <code>test.median</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), <code>test.min</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>), and <code>text.max</code> (<code><a href="../../reference/aggregations.html">aggregations()</a></code>) compute the median, minimum, and maximum of the performance values on the test sets.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">mseTestMedian =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.median)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2">mseTestMin =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.min)</a>
<a class="sourceLine" id="cb31-3" data-line-number="3">mseTestMax =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mse, test.max)</a>
<a class="sourceLine" id="cb31-4" data-line-number="4"></a>
<a class="sourceLine" id="cb31-5" data-line-number="5">mseTestMedian</a>
<a class="sourceLine" id="cb31-6" data-line-number="6">## Name: Mean of squared errors</a>
<a class="sourceLine" id="cb31-7" data-line-number="7">## Performance measure: mse</a>
<a class="sourceLine" id="cb31-8" data-line-number="8">## Properties: regr,req.pred,req.truth</a>
<a class="sourceLine" id="cb31-9" data-line-number="9">## Minimize: TRUE</a>
<a class="sourceLine" id="cb31-10" data-line-number="10">## Best: 0; Worst: Inf</a>
<a class="sourceLine" id="cb31-11" data-line-number="11">## Aggregated by: test.median</a>
<a class="sourceLine" id="cb31-12" data-line-number="12">## Arguments: list()</a>
<a class="sourceLine" id="cb31-13" data-line-number="13">## Note: Defined as: mean((response - truth)^2)</a>
<a class="sourceLine" id="cb31-14" data-line-number="14"></a>
<a class="sourceLine" id="cb31-15" data-line-number="15">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb31-16" data-line-number="16">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"regr.lm"</span>, bh.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mseTestMedian, mseTestMin, mseTestMax))</a>
<a class="sourceLine" id="cb31-17" data-line-number="17">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb31-18" data-line-number="18">## Measures:             mse       mse       mse       mse</a>
<a class="sourceLine" id="cb31-19" data-line-number="19">## [Resample] iter 1:    20.526766220.526766220.526766220.5267662</a>
<a class="sourceLine" id="cb31-20" data-line-number="20">## [Resample] iter 2:    33.304381433.304381433.304381433.3043814</a>
<a class="sourceLine" id="cb31-21" data-line-number="21">## [Resample] iter 3:    19.663185519.663185519.663185519.6631855</a>
<a class="sourceLine" id="cb31-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb31-23" data-line-number="23">## Aggregated Result: mse.test.mean=24.4981110,mse.test.median=20.5267662,mse.test.min=19.6631855,mse.test.max=33.3043814</a>
<a class="sourceLine" id="cb31-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb31-25" data-line-number="25"></a>
<a class="sourceLine" id="cb31-26" data-line-number="26">r</a>
<a class="sourceLine" id="cb31-27" data-line-number="27">## Resample Result</a>
<a class="sourceLine" id="cb31-28" data-line-number="28">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb31-29" data-line-number="29">## Learner: regr.lm</a>
<a class="sourceLine" id="cb31-30" data-line-number="30">## Aggr perf: mse.test.mean=24.4981110,mse.test.median=20.5267662,mse.test.min=19.6631855,mse.test.max=33.3043814</a>
<a class="sourceLine" id="cb31-31" data-line-number="31">## Runtime: 0.0364752</a>
<a class="sourceLine" id="cb31-32" data-line-number="32"></a>
<a class="sourceLine" id="cb31-33" data-line-number="33">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb31-34" data-line-number="34">##   mse.test.mean mse.test.median    mse.test.min    mse.test.max </a>
<a class="sourceLine" id="cb31-35" data-line-number="35">##        24.49811        20.52677        19.66319        33.30438</a></code></pre></div>
</div>
<div id="example-calculating-the-training-error" class="section level3">
<h3 class="hasAnchor">
<a href="#example-calculating-the-training-error" class="anchor"></a>Example: Calculating the training error</h3>
<p>Below we calculate the mean misclassification error (<a href="measures.html" target="_blank">mmce</a>) on the training and the test data sets. Note that we have to set <code>predict = "both"</code> when calling <code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code> in order to get predictions on both training and test sets.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">mmceTrainMean =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, train.mean)</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"CV"</span>, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">predict =</span> <span class="st">"both"</span>)</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceTrainMean))</a>
<a class="sourceLine" id="cb32-4" data-line-number="4">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb32-5" data-line-number="5">## Measures:             mmce.train   mmce.test</a>
<a class="sourceLine" id="cb32-6" data-line-number="6">## [Resample] iter 1:    0.0200000    0.0800000</a>
<a class="sourceLine" id="cb32-7" data-line-number="7">## [Resample] iter 2:    0.0500000    0.0200000</a>
<a class="sourceLine" id="cb32-8" data-line-number="8">## [Resample] iter 3:    0.0300000    0.0800000</a>
<a class="sourceLine" id="cb32-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb32-10" data-line-number="10">## Aggregated Result: mmce.test.mean=0.0600000,mmce.train.mean=0.0333333</a>
<a class="sourceLine" id="cb32-11" data-line-number="11">## </a>
<a class="sourceLine" id="cb32-12" data-line-number="12"></a>
<a class="sourceLine" id="cb32-13" data-line-number="13">r<span class="op">$</span>measures.train</a>
<a class="sourceLine" id="cb32-14" data-line-number="14">##   iter mmce mmce</a>
<a class="sourceLine" id="cb32-15" data-line-number="15">## 1    1 0.02 0.02</a>
<a class="sourceLine" id="cb32-16" data-line-number="16">## 2    2 0.05 0.05</a>
<a class="sourceLine" id="cb32-17" data-line-number="17">## 3    3 0.03 0.03</a>
<a class="sourceLine" id="cb32-18" data-line-number="18"></a>
<a class="sourceLine" id="cb32-19" data-line-number="19">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb32-20" data-line-number="20">##  mmce.test.mean mmce.train.mean </a>
<a class="sourceLine" id="cb32-21" data-line-number="21">##      0.06000000      0.03333333</a></code></pre></div>
</div>
<div id="example-bootstrap" class="section level3">
<h3 class="hasAnchor">
<a href="#example-bootstrap" class="anchor"></a>Example: Bootstrap</h3>
<p>In <em>out-of-bag bootstrap estimation</em> <span class="math inline">\(B\)</span> new data sets <span class="math inline">\(D^{*1}, \ldots, D^{*B}\)</span> are drawn from the data set <span class="math inline">\(D\)</span> with replacement, each of the same size as <span class="math inline">\(D\)</span>. In the <span class="math inline">\(b\)</span>-th iteration, <span class="math inline">\(D^{*b}\)</span> forms the training set, while the remaining elements from <span class="math inline">\(D\)</span>, i.e., <span class="math inline">\(D \setminus D^{*b}\)</span>, form the test set.</p>
<!--(
                     |resampling_desc_figure|

                     |resampling_nested_resampling_figure|
)-->
<p>The <em>b632</em> and <em>b632+</em> variants calculate a convex combination of the training performance and the out-of-bag bootstrap performance and thus require predictions on the training sets and an appropriate aggregation strategy.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="co"># Use bootstrap as resampling strategy and predict on both train and test sets</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2">rdesc =<span class="st"> </span><span class="kw"><a href="../../reference/makeResampleDesc.html">makeResampleDesc</a></span>(<span class="st">"Bootstrap"</span>, <span class="dt">predict =</span> <span class="st">"both"</span>, <span class="dt">iters =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb33-3" data-line-number="3"></a>
<a class="sourceLine" id="cb33-4" data-line-number="4"><span class="co"># Set aggregation schemes for b632 and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb33-5" data-line-number="5">mmceB632 =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632)</a>
<a class="sourceLine" id="cb33-6" data-line-number="6">mmceB632plus =<span class="st"> </span><span class="kw"><a href="../../reference/setAggregation.html">setAggregation</a></span>(mmce, b632plus)</a>
<a class="sourceLine" id="cb33-7" data-line-number="7"></a>
<a class="sourceLine" id="cb33-8" data-line-number="8">mmceB632</a>
<a class="sourceLine" id="cb33-9" data-line-number="9">## Name: Mean misclassification error</a>
<a class="sourceLine" id="cb33-10" data-line-number="10">## Performance measure: mmce</a>
<a class="sourceLine" id="cb33-11" data-line-number="11">## Properties: classif,classif.multi,req.pred,req.truth</a>
<a class="sourceLine" id="cb33-12" data-line-number="12">## Minimize: TRUE</a>
<a class="sourceLine" id="cb33-13" data-line-number="13">## Best: 0; Worst: 1</a>
<a class="sourceLine" id="cb33-14" data-line-number="14">## Aggregated by: b632</a>
<a class="sourceLine" id="cb33-15" data-line-number="15">## Arguments: list()</a>
<a class="sourceLine" id="cb33-16" data-line-number="16">## Note: Defined as: mean(response != truth)</a>
<a class="sourceLine" id="cb33-17" data-line-number="17"></a>
<a class="sourceLine" id="cb33-18" data-line-number="18">r =<span class="st"> </span><span class="kw"><a href="../../reference/resample.html">resample</a></span>(<span class="st">"classif.rpart"</span>, iris.task, rdesc, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, mmceB632, mmceB632plus),</a>
<a class="sourceLine" id="cb33-19" data-line-number="19">  <span class="dt">show.info =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb33-20" data-line-number="20"><span class="kw">head</span>(r<span class="op">$</span>measures.train)</a>
<a class="sourceLine" id="cb33-21" data-line-number="21">##   iter       mmce       mmce       mmce</a>
<a class="sourceLine" id="cb33-22" data-line-number="22">## 1    1 0.04000000 0.04000000 0.04000000</a>
<a class="sourceLine" id="cb33-23" data-line-number="23">## 2    2 0.04000000 0.04000000 0.04000000</a>
<a class="sourceLine" id="cb33-24" data-line-number="24">## 3    3 0.02000000 0.02000000 0.02000000</a>
<a class="sourceLine" id="cb33-25" data-line-number="25">## 4    4 0.01333333 0.01333333 0.01333333</a>
<a class="sourceLine" id="cb33-26" data-line-number="26">## 5    5 0.04000000 0.04000000 0.04000000</a>
<a class="sourceLine" id="cb33-27" data-line-number="27">## 6    6 0.02000000 0.02000000 0.02000000</a>
<a class="sourceLine" id="cb33-28" data-line-number="28"></a>
<a class="sourceLine" id="cb33-29" data-line-number="29"><span class="co"># Compare misclassification rates for out-of-bag, b632, and b632+ bootstrap</span></a>
<a class="sourceLine" id="cb33-30" data-line-number="30">r<span class="op">$</span>aggr</a>
<a class="sourceLine" id="cb33-31" data-line-number="31">## mmce.test.mean      mmce.b632  mmce.b632plus </a>
<a class="sourceLine" id="cb33-32" data-line-number="32">##     0.05612775     0.04504074     0.04597437</a></code></pre></div>
</div>
</div>
<div id="convenience-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#convenience-functions" class="anchor"></a>Convenience functions</h2>
<p>The functionality described on this page allows for much control and flexibility. However, when quickly trying out some learners, it can get tedious to type all the code for defining the resampling strategy, setting the aggregation scheme and so on. As mentioned above, <code>mlr</code> includes some pre-defined resample description objects for frequently used strategies like, e.g., 5-fold cross-validation (<code>cv5</code> (<code><a href="../../reference/makeResampleDesc.html">makeResampleDesc()</a></code>)). Moreover, <code>mlr</code> provides special functions for the most common resampling methods, for example <code>holdout</code> (<code><a href="../../reference/resample.html">resample()</a></code>), <code>crossval</code> (<code><a href="../../reference/resample.html">resample()</a></code>), or <code>bootstrapB632</code> (<code><a href="../../reference/resample.html">resample()</a></code>).</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw"><a href="../../reference/resample.html">crossval</a></span>(<span class="st">"classif.lda"</span>, iris.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mmce, ber))</a>
<a class="sourceLine" id="cb34-2" data-line-number="2">## Resampling: cross-validation</a>
<a class="sourceLine" id="cb34-3" data-line-number="3">## Measures:             mmce      ber</a>
<a class="sourceLine" id="cb34-4" data-line-number="4">## [Resample] iter 1:    0.0200000 0.0196078</a>
<a class="sourceLine" id="cb34-5" data-line-number="5">## [Resample] iter 2:    0.0000000 0.0000000</a>
<a class="sourceLine" id="cb34-6" data-line-number="6">## [Resample] iter 3:    0.0400000 0.0370370</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">## </a>
<a class="sourceLine" id="cb34-8" data-line-number="8">## Aggregated Result: mmce.test.mean=0.0200000,ber.test.mean=0.0188816</a>
<a class="sourceLine" id="cb34-9" data-line-number="9">## </a>
<a class="sourceLine" id="cb34-10" data-line-number="10">## Resample Result</a>
<a class="sourceLine" id="cb34-11" data-line-number="11">## Task: iris-example</a>
<a class="sourceLine" id="cb34-12" data-line-number="12">## Learner: classif.lda</a>
<a class="sourceLine" id="cb34-13" data-line-number="13">## Aggr perf: mmce.test.mean=0.0200000,ber.test.mean=0.0188816</a>
<a class="sourceLine" id="cb34-14" data-line-number="14">## Runtime: 0.0257125</a>
<a class="sourceLine" id="cb34-15" data-line-number="15"></a>
<a class="sourceLine" id="cb34-16" data-line-number="16"><span class="kw"><a href="../../reference/resample.html">bootstrapB632plus</a></span>(<span class="st">"regr.lm"</span>, bh.task, <span class="dt">iters =</span> <span class="dv">3</span>, <span class="dt">measures =</span> <span class="kw">list</span>(mse, mae))</a>
<a class="sourceLine" id="cb34-17" data-line-number="17">## Resampling: OOB bootstrapping</a>
<a class="sourceLine" id="cb34-18" data-line-number="18">## Measures:             mse.train   mae.train   mse.test    mae.test</a>
<a class="sourceLine" id="cb34-19" data-line-number="19">## [Resample] iter 1:    20.4595348  3.2014615   22.2185044  3.4370103</a>
<a class="sourceLine" id="cb34-20" data-line-number="20">## [Resample] iter 2:    18.2650944  3.0636108   29.9455318  3.5789762</a>
<a class="sourceLine" id="cb34-21" data-line-number="21">## [Resample] iter 3:    23.2276912  3.3805883   19.3987233  3.1755243</a>
<a class="sourceLine" id="cb34-22" data-line-number="22">## </a>
<a class="sourceLine" id="cb34-23" data-line-number="23">## Aggregated Result: mse.b632plus=22.7660981,mae.b632plus=3.3347034</a>
<a class="sourceLine" id="cb34-24" data-line-number="24">## </a>
<a class="sourceLine" id="cb34-25" data-line-number="25">## Resample Result</a>
<a class="sourceLine" id="cb34-26" data-line-number="26">## Task: BostonHousing-example</a>
<a class="sourceLine" id="cb34-27" data-line-number="27">## Learner: regr.lm</a>
<a class="sourceLine" id="cb34-28" data-line-number="28">## Aggr perf: mse.b632plus=22.7660981,mae.b632plus=3.3347034</a>
<a class="sourceLine" id="cb34-29" data-line-number="29">## Runtime: 0.0419447</a></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#defining-the-resampling-strategy">Defining the resampling strategy</a></li>
      <li><a href="#performing-the-resampling">Performing the resampling</a></li>
      <li><a href="#accessing-resample-results">Accessing resample results</a></li>
      <li><a href="#stratification-blocking-and-grouping">Stratification, Blocking and Grouping</a></li>
      <li><a href="#resample-descriptions-and-resample-instances">Resample descriptions and resample instances</a></li>
      <li><a href="#aggregating-performance-values">Aggregating performance values</a></li>
      <li><a href="#convenience-functions">Convenience functions</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><!--<div class="copyright">
  <p>Developed by Bernd Bischl, Michel Lang, Lars Kotthoff, Julia Schiffner, Jakob Richter, Zachary Jones, Giuseppe Casalicchio, Mason Gallo, Patrick Schratz.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>
--></footer>
</div>

   
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script type="text/javascript"> docsearch({
â€ƒapiKey: 'e300ecafdf04fe1199e3339c825ce7d0',
â€ƒindexName: 'mlr',
â€ƒinputSelector: 'input#search-input.form-control',
â€ƒdebug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>
</html>
